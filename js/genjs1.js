sugestplace=function(a,b,g){var h=b.replace(/ /g,"");window.plname=a;window.plcoors=h;window.city=g;var h=$("#sugest_panel"),k=$("#sugest_panel #box-body");h.show();h.panel("open");k.load("https://myezplan.com/mobile/appdata/data_ajax/suggest_content.cfm",{action:"suggest_p",name:a,coors:b,city:g})};showhowitworks=function(){window.open("howitworks.html","_blank")};
closefaq=function(){$("#showvideo").empty();"undefined"!=typeof var_win_advopt&&var_win_advopt&&(var_win_advopt=!1,$(".advance_opt").show());"undefined"!=typeof isfromrutasview&&isfromrutasview&&(isfromrutasview=!1,$("#myeztravel-faq").fadeOut(300),$("#roadmapplace-boxmedia_r").fadeIn(1E3));"undefined"!=typeof isfromprutasview&&isfromprutasview&&(isfromprutasview=!1,$("#myeztravel-faq").fadeOut(300),$("#drawroutes").fadeIn(1E3));"undefined"==typeof isfromrutasview&&"undefined"==typeof isfromprutasview&&
($("#mask-faq").fadeOut(300),$("#myeztravel-faq").fadeOut(300),$("#mask-faq").remove(this))};showsubtopics_steps_=function(a,b,g){$("#Faq_subtopics_steps").showLoading("Please Wait,<br/>Retriving Steps...<br/>",!1);a={action:"Faq_subtopics_steps_",stid:a,storder:b,donde:g};$("#Faq_subtopics_steps").load("https://myezplan.com/mobile/appdata/data_ajax/faq_ajax_content.cfm?aleat=123819283791",a,function(a,b,g){switch(b){case "error":$("#Faq_subtopics_steps").empty()}})};
showsubtopics_steps=function(a){$("#Faq_subtopics_steps").showLoading("Please Wait,<br/>Retriving Steps...<br/>",!1);if(sessionStorage.getItem("subfaqst"+a))$("#Faq_subtopics_steps").html(sessionStorage.getItem("subfaqst"+a));else{var b={action:"Faq_subtopics_steps",stid:a};$("#Faq_subtopics_steps").load("https://myezplan.com/mobile/appdata/data_ajax/faq_ajax_content.cfm?aleat=123819283791",b,function(b,h,k){switch(h){case "error":$("#Faq_subtopics_steps").empty();break;case "success":sessionStorage.setItem("subfaqst"+
a,b)}})}};
showsubtopics=function(a){$("#Faq_subtopics").showLoading("Please Wait,<br/>Retriving SubTopics...<br/>",!1);$("#Faq_subtopics_steps").empty();if(sessionStorage.getItem("subfaq"+a))$("#Faq_subtopics").html(sessionStorage.getItem("subfaq"+a));else{var b={action:"Faq_subtopics",tid:a};$("#Faq_subtopics").load("https://myezplan.com/mobile/appdata/data_ajax/faq_ajax_content.cfm?aleat=123819283791",b,function(b,h,k){switch(h){case "error":$("#Faq_subtopics").empty();break;case "success":sessionStorage.setItem("subfaq"+a,
b)}})}};$(document).ready(function(a){$(".show_load").click(function(){$(".load_img").css("display","block")})});
function validateEmail(a){return(new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i)).test(a)}
function formatPhoneNumber(a){var b=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,g="";b.test(a)&&(g=a.replace(b,"$1$2$3"));return g}emptyMessageError=function(a){$(a).empty()};ishidingmessageerror=!1;global_messageerrortimer=0;closePopup=function(a){a="undefined"==typeof a?0:a;$("#mask, .popup-inside").fadeOut(a,function(){$("#mask").remove()})};closePopup2=function(){$("#shareitplans-box2").fadeOut(300,function(){$("#mapcitycity-box").fadeIn(300)})};
hideMessageError=function(a,b,g,h){if(!ishidingmessageerror){b="undefined"==typeof b?!1:b;var k="undefined"==typeof h?!0:h;ishidingmessageerror=!0;clearTimeout(global_messageerrortimer);global_messageerrortimer=b?window.setTimeout(function(){$(a).html();$(a).fadeOut(g);closePopup();ishidingmessageerror=!1;k&&verifyPendingRefresh()},3E3):window.setTimeout(function(){$(a).html();$(a).fadeOut(g);ishidingmessageerror=!1;k&&verifyPendingRefresh()},3E3)}};
showMessageError=function(a,b,g,h,k){$(a).removeClass();k&&""!=k?$(a).addClass("message message-"+h+" message-"+k):$(a).addClass("message message-"+h);$(a).html(b);$(a).fadeIn(g)};existsUrlHash=function(){return window.location.hash};getUrlHash=function(){return window.location.hash.replace("#","")};getUrlParamValue=function(a){a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(window.location.href);return null==a?"":a[1]||0};getUrlParamFromString=function(a,b){return(new RegExp("[\\?&]"+b+"=([^&#]*)")).exec(a)};
getUrlStringParam=function(a,b){var g=getUrlParamFromString(a,b);return null==g?"":g[0]||""};getUrlStringParamValue=function(a,b){var g=getUrlParamFromString(a,b);return null==g?"":g[1]||""};verifyPendingRefresh=function(){"undefined"!=typeof cf_sidP&&cf_sidP&&window.top.location.reload()};function randomNumberUrl(){return 1E16*Math.random()}
function goToCart(a,b){var g="undefined"!=typeof b&&"boolean"==typeof b?b:!0,h="cart.cfm"+(""==("undefined"==typeof a?"":a)?"":"?"+a);$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/cart_ajax_events.cfm",async:!1,cache:!1,data:{action:"countitems"},error:function(a,b,g){myezAlert.render(g)},success:function(a){if(!(0<parseInt(a)))return myezAlert.render("Your Shopping Cart is empty."),!1;g?window.open(h,"_blank"):window.open(h,"_cart")}})}
function showHideTab(a,b,g,h){var k=h&&"class"==h?".":"#";void 0==g?(h=$(k+a),h.parent().find("a:first"),a=0<$(k+a+":hidden").length,"show"!=b&&"hide"!=b&&(b=a?"show":"hide"),"hide"==b?h.hide():h.show()):(h=$(k+a),$(g),a=0<$(k+a+":hidden").length,"show"!=b&&"hide"!=b&&(b=a?"show":"hide"),"hide"==b?(h.hide(),$("#"+g+" use").attr("xlink:href","#icon-expand_more")):($("#"+g+" use").attr("xlink:href","#icon-expand_less"),h.show()))}
cargar_citypic=function(a){$("#citymap_img_map_preview").attr("src",_img_map_preview);var b=1E16*Math.random();$.ajax({type:"POST",url:"html_ajax/cargar_citypic_ajax.cfm",async:!0,cache:!1,data:"idciudad="+a+"&aleat="+b,success:function(a){""!=a&&$("#citymap_img_map_preview").attr("src",a)}})};jQuery.fn.extend({formReset:function(){$(this).each(function(){this.reset()})}});jQuery.fn.extend({scrollToMe:function(){var a=jQuery(this).offset().top-25;jQuery("html,body").animate({scrollTop:a},200)}});
jQuery.fn.extend({showLoading:function(a,b){var g="string"==typeof a?"<br />"+a:"",h="boolean"==typeof b?b:!1,k=$(this);h&&k.empty();k.prepend('<div class="mask-loading"><div class="mask-loading-image"><img width="32px" height="32px" src="images/icons/32/loader1.gif" />'+g+"</div></div>");g=k.find(".mask-loading");h=g.find(".mask-loading-image");h.find("img");g.fadeIn("fast");g.height(k.height());g.width(k.width());h.css({"margin-top":-(h.height()/2),"margin-left":-(h.width()/2)})}});
jQuery.fn.extend({serializeToObject:function(){var a={},b=this.serializeArray();$.each(b,function(){void 0!==a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""});return a}});
countMyUserPlan=function(){$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm?upuserid="+sessionStorage.cf_sid,async:!1,cache:!1,data:"action=countuserplan&",error:function(a,b,g){countuserplan=0},success:function(a){countuserplan=a}})};
myPlanRename=function(a,b){var g=$("#"+a),h=$(g).find("#messageerror-myuserplan"),k=$(g).find("#up_namenew_"+b),q=$.trim($(k).val()),u=$(g).find("#up_name_"+b);""==q?($(k).focus(),showMessageError(h,"Name is required. Please try again.",300),hideMessageError(h,!1,300)):$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",async:!1,cache:!1,data:"action=saveuserplan&saveaction=up&upname="+q+"&upid="+b+"&upuserid="+sessionStorage.cf_sid,error:function(a,b,g){showMessageError(h,
g,300);hideMessageError(h,!1,300)},success:function(a){a=a.split("|");$(u).html(q);showMessageError(h,a[0],300);hideMessageError(h,!1,300)}})};myPlanPrint=function(a){window.open(a,"mywindow").focus()};
myPlanShare=function(a,b,g){$("#share-box").panel();var h=$("#"+b);$(a.currentTarget).attr("data-f");a=h.find("#share-mail-s").attr("href");var k=h.find("#share-facebook-s").attr("href");b=h.find("#share-twitter-s").attr("href");var q=h.find("#share-blogger-s").attr("href"),h=h.find("#share-gpx-s").attr("href"),u=$("#share-box");u.find("#share_submit_1").attr("data-url",a);u.find("#share-box-mail-e").attr("href",a);u.find("#share-box-2 #sharelink").val(a);u.find("#share-box-2 #sharelinkgpx").val(h);
u.find("#share_option").val(g);u.find("#share-box-facebook-e").click(function(a){window.open(k,"sharer","toolbar=0,status=0,height=436");return!1});u.find("#share-box-twitter-e").attr("href",b);u.find("#share-box-blogger-e").attr("href",q);$("#share-box").show();$("#share-box").panel("open");u.find("#title-box-2").click();u.height();u.width();u.css({});$(window).height();$(window).scrollTop();u.css({})};
myPersonalPlanShare=function(a,b,g,h,k,q){$(event.currentTarget).attr("data-f");var u=$("#share-box");u.panel();u.show();u.panel("open");u.find("#share_submit_1").attr("data-url",a);u.find("#share-box-mail-e").attr("href",a);u.find("#share-box-2 #sharelink").val(a);u.find("#share-box-2 #sharelinkgpx").val(k);u.find("#share_option").val(q);u.find("#share-box-facebook-e").click(function(a){window.open(b,"sharer","toolbar=0,status=0,height=436");return!1});u.find("#share-box-twitter-e").attr("href",
g);u.find("#share-box-blogger-e").attr("href",h);u.find("#title-box-2").click();u.height();u.width();u.css({});$(window).height();$(window).scrollTop();u.css({})};
myPlanDelete=function(a,b){var g=$("#"+a),h=g.find("#messageerror-myuserplan");g.find("#row_"+b);var k="action=saveuserplan&saveaction=dp&upid="+b+"&upuserid="+sessionStorage.cf_sid;window.confirm("You are going to permanently delete this plan. Are you sure?")&&$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",async:!1,cache:!1,data:k,error:function(a,b,g){showMessageError(h,g,300);hideMessageError(h,!1,300)},success:function(a){a=a.split("|");$(g).css("background-color",
"#990000").slideToggle(250);showMessageError(h,a[0],300);hideMessageError(h,!1,300)}})};
plantocurrentItineraryValida=function(a,b){$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/myitinerary_content_ajax.cfm",async:!1,cache:!1,data:{action:"saveuseritinerary",saveaction:"validalimiteplanscurrenI",ui_userid:sessionStorage.cf_sid}}).success(function(g){if(30==g)return myezAlert.render("You have reached the maximum limit of Plans for Itinerary (30), if you want to add more plans you have to create a new one"),!1;myPlanAddToCurrentItinerary(a,b)})};
myPlanAddToCurrentItinerary=function(a,b){var g=$("#"+a),h=g.find(".message-error"),k=g.find("#row_"+b);$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/myitinerary_content_ajax.cfm",async:!1,cache:!1,data:"action=addplantocurrentitinerary&up_id="+b+"&ui_userid="+sessionStorage.cf_sid,error:function(a,b,g){showMessageError(h,g,300);hideMessageError(h,!1,300)},success:function(a){global_addtocurrentplan||($(k).css("background-color","#4F6228").animate({opacity:.5},1E3,function(){$(k).css("background-color",
"transparent").animate({opacity:1})}),showMessageError(h,a,300),global_addtocurrentplan&&hideMessageError(h,!0,300),hideMessageError(h,!1,300));global_addtocurrentplan=!1}})};
myPlanAddToItinerary=function(a,b,g,h){a=$("#"+a);var k=$("#message-saveplan");a.find("#row_"+b);$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/myitinerary_content_ajax.cfm",async:!1,cache:!1,data:"action=addplantoitinerary&up_id="+b+"&aditi="+h+"&addate="+g,error:function(a,b,g){showMessageError(k,g,300);hideMessageError(k,!1,300)},success:function(a){hideMessageError(k,!0,300);hideMessageError(k,!1,300);global_addtocurrentplan=!1}})};
myPlanShowAudioTour=function(a,b){var g=$("#audiotour-box");g.panel();g.show();g.panel("open");g.height();g.width();g.css({});$(window).height();$(window).scrollTop();g.css({});myPlanShowAudioTour_ajax(a,b)};myPlanShowAudioTour_ajax=function(a,b){var g=$("#"+a);g.find(".message-error");g.find("#row_"+b);g={action:"getaudiotourbypid",up_id:b};$("#audiotour-box #box-body").load("https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",g,myPlanShowAudioTour_ajax_result)};
myPlanShowAudioTour_ajax_result=function(a,b,g){};myPlanShowAudioTour_ajax_result=function(a,b,g){};checkAudioPlan=function(a,b){var g={action:"getaudiotourbypid",up_id:a};$("#audiotour-box #box-body").load("https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",g);$.post("https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",g).error().success(function(a,g,q){console.log(b);g=a;g=a.replace(/\s+/g,"");console.log(g);"No-audio"==g?$("."+b).hide():$("."+b).show()})};
openexternalmedia3=function(a){var b=$("#faq-box");$(b).fadeOut(0);b=$("#roadmapplace-boxmedia3");b.fadeIn(300);b.height();b.width();var g=parseInt(b.css("z-index"))+100;b.css({"z-index":g+1});b.find("#box-body").html('<iframe width="560" height="315" src="'+a+'" frameborder="0" allowfullscreen></iframe>');return!1};
openexternalmedia=function(a){var b=$("#roadmapplace-boxmedia");b.panel();b.showLoading("Please Wait",!1);b.show();b.panel("open");b.height();b.width();parseInt(b.css("z-index"));b.css({});b.find("#box-body").html('<iframe width="560" height="700" src="'+a+'" frameborder="0" allowfullscreen></iframe>').promise().done($(".mask-loading").remove());$(window).height();$(window).scrollTop();b.css({});return!1};
openexternalmedia_prd=function(a){var b=$("#drawroutes");$(b).fadeOut(0);b=$("#roadmapplace-boxmedia_prd");b.fadeIn(300);b.height();b.width();parseInt(b.css("z-index"));b.css({});$("#roadmapplace-boxmedia").panel("open");b.find("#box-body").html('<iframe width="560" height="700" src="'+a+'" frameborder="0" allowfullscreen></iframe>');$(window).height();$(window).scrollTop();b.css({});return!1};
openexternalmedia_f_prd=function(a){var b=$("#drawroutes");$(b).fadeOut(0);b=$("#roadmapplace-boxmedia_f_prd");b.fadeIn(300);b.height();b.width();var g=parseInt(b.css("z-index"))+100;b.css({"z-index":g+1});b.find("#box-body").html('<iframe width="700" height="550" src="'+a+'" frameborder="0" allowfullscreen></iframe>');$(window).height();$(window).scrollTop();b.css({});return!1};
openexternalmedia_f=function(a,b){var g=$("#roadmapplace-box");$(g).fadeOut(0);g=$("#roadmapplace-boxmedia_f");g.panel();g.show();800>=$(window).width()?(g.css("right",0),g.panel("open")):(g.css("right",400),g.removeClass("ui-panel-closed"),g.addClass("ui-panel-open"));g.height();g.width();parseInt(g.css("z-index"));g.css({});sessionStorage.getItem("infopics"+b)?g.find("#box-body").html(sessionStorage.getItem("infopics"+b)):g.find("#box-body").load(a,function(a){sessionStorage.setItem("infopics"+
b,a)});$(window).height();$(window).scrollTop();g.css({});return!1};
openexternalmedia_r2=function(a){var b=$("#roadmapplace-box");$(b).fadeOut(0);b=$("#roadmapplace-boxmedia_r2");b.fadeIn(300);var g=parseInt(b.css("z-index"))+100;b.css({"z-index":g+1});var h=$(window).height()/3-100+$(window).scrollTop();b.css({top:h});$("body").append('<div id="mask-roadmapplace-boxmedia" class="mask" style="z-index:0;"></div>');h=$("#mask-roadmapplace-boxmedia");h.css("z-index",g);h.fadeIn(300);b.find("#box-body").html('<iframe src="'+a+'" frameborder="0" allowfullscreen></iframe>');
h=$(window).height()/3-100+$(window).scrollTop();b.css({top:h});return!1};openexternalmedia_r=function(a){var b=$("#roadmapplace-box");$(b).fadeOut(0);b=$("#roadmapplace-boxmedia_r");b.panel();b.show();b.panel("open");parseInt(b.css("z-index"));b.css({});$("body").append('<div id="mask-roadmapplace-boxmedia" class="mask" style="z-index:0;"></div>');b.find("#box-body").load(a);$(window).height();$(window).scrollTop();b.css({});return!1};
openexternalmedia2=function(a){var b=$("#roadmapplace-boxmedia2");$("#roadmapplace-boxmedia2").panel();b.height();b.width();parseInt(b.css("z-index"));b.css({});$("#roadmapplace-boxmedia2").panel("open");b.find("#box-body").html('<iframe width="100%" height="350" src="'+a+'" frameborder="0" allowfullscreen></iframe>');$(window).height();$(window).scrollTop();b.css({});return!1};
openexternalmedia_m2=function(a){a=$("#roadmapplace-box");$(a).fadeOut(0);a=$("#roadmapplace-boxmedia_m2");a.panel();a.show();a.panel("open")};openexternalmedia_m2_prd=function(a){var b=$("#drawroutes");$(b).fadeOut(0);b=$("#roadmapplace-boxmedia_m2_prd");b.fadeIn(300);b.height();b.width();parseInt(b.css("z-index"));b.css({});b.find("#box-body").html('<iframe width="100%" height="460" src="'+a+'" frameborder="0" allowfullscreen></iframe>');$(window).height();$(window).scrollTop();b.css({});return!1};
openexternalmedia_m=function(a){var b=$("#roadmapplace-boxmedia_m");b.fadeIn(300);b.height();b.width();var g=parseInt(b.css("z-index"))+100;b.css({"z-index":g+1});var h=$(window).height()/3-100+$(window).scrollTop();b.css({top:h});$("body").append('<div id="mask-roadmapplace-boxmedia" class="mask" style="z-index:0;"></div>');h=$("#mask-roadmapplace-boxmedia");h.css("z-index",g);h.fadeIn(300);b.find("#box-body").html('<iframe width="100%" height="400" src="'+a+'" frameborder="0" allowfullscreen></iframe>');
return!1};openexternalmedia4=function(a){a=$("#roadmapplace-boxmedia");$(a).fadeOut(300)};openexternalmedia_mapplace=function(a){window.plid=a;var b=$("#mapplace_panel");b.showLoading("Loading Place",!1);b.show();b.panel("open");b.find("#box-body").load("mapplace_panel.html?plid="+a).promise().done();return!1};openexternalmedia_mapplacePer=function(a,b,g){window.pllat=a;window.pllng=b;window.plname=g;a=$("#mapplace_panel");a.show();a.panel("open");a.find("#box-body").load("mapplace_per.html");return!1};
writeConsole=function(a){0==$("#consolepage").size()&&$("body").append('<div id="consolepage" style="width:90%; height:8em;"></div>');a=$("#consolepage").html()+"<p>"+a+"</p>";$("#consolepage").html(a)};global_countrymapcity=0;getCountryFromMapCity_ajax=function(){var a="https://myezplan.com/mobile/appdata/data_ajax/map_city_ajax.cfm?rnu="+randomNumberUrl()+"";$.post(a,{action:"getcountry"}).error(getCountryFromMapCity_ajax_error).success(getCountryFromMapCity_ajax_success)};
getCountryFromMapCity_ajax_error=function(a,b,g){console.log(g)};getCountryFromMapCity_ajax_success=function(a,b,g){global_countrymapcity=$.parseJSON(a).MESSAGE};setCountryToMapCity_ajax=function(a,b,g){var h="https://myezplan.com/mobile/appdata/data_ajax/map_city_ajax.cfm?rnu="+randomNumberUrl()+"";$.post(h,{action:"setcountry",ctyid:a,ctid:b,replacesession:g}).error(setCountryToMapCity_ajax_error).success(setCountryToMapCity_ajax_success)};
setCountryToMapCity_ajax_error=function(a,b,g){$.trim(g)&&myezAlert.render(g)};setCountryToMapCity_ajax_success=function(a,b,g){global_countrymapcity=$.parseJSON(a).MESSAGE};global_MapCityCookie=[];
$(document).ready(function(a){updateMapCityCookie=function(){global_MapCityCookie=[];var a=$.cookie("NUMDAYS");if(a&&""!=a&&0!=a)for(x=0;x<a;x++){var g=$.cookie("EZMAPCITYPLACES_day"+(x+1));if(g)for(g=g.split(","),y=0;y<g.length;y++)global_MapCityCookie.push(g[y])}else(g=$.cookie("EZMAPCITYPLACES_day1"))&&(global_MapCityCookie=g.split(","));$.each(global_MapCityCookie,function(a,b){$.isNumeric(b)&&(global_MapCityCookie[a]=parseInt(b))})};showFeedBack=function(a){a=$("#feedback-box");a.fadeIn(300);
a.height();var g=(a.width()+24)/2;a.css({"margin-left":-g});$("body").append('<div id="mask" class="mask"></div>');$("#mask").fadeIn(300);return!1}});
$(document).ready(function(a){$("a#menu-home").click(function(){getCountryFromMapCity_ajax();var a=$("#menuhome-box");a.fadeIn(300);a.height();var g=(a.width()+24)/2;a.css({"margin-left":-g});$("body").append('<div id="mask" class="mask"></div>');$("#mask").fadeIn(300);return!1});$("#menuhome-selectcountry").ready(function(){$("#menuhome-selectcountry").empty();var a="https://myezplan.com/mobile/appdata/map_homemenu_ajax.cfm?aleat="+1E16*Math.random()+"&";$("#menuhome-selectcountry,#mapcitycity-selectcountry").load(a,
{action:"getcountries"},function(a,b,k){switch(b){case "error":console.log("error getting data: "+k.statusText);break;case "success":$("#menuhome-selectcountry").attr("disabled",!1)}})});$("#mapcitycity-selectcountry").change(function(){$("#mapcitycity-selectcity").empty();$("#mapcitycity-selectcity").attr("disabled",!0);var a=$("#mapcitycity-selectcountry").val();if(""!=a){var g="https://myezplan.com/mobile/appdata/data_ajax/map_homemenu_ajax.cfm?aleat="+1E16*Math.random()+"&",a={action:"getcitiesbycountry",
countryid:a};$("#mapcitycity-selectcity").load(g,a,function(a,b,g){switch(b){case "error":console.log("error getting data: "+g.statusText);break;case "success":$("#mapcitycity-selectcity").attr("disabled",!1)}})}});$("#mapcitycity-Ideas").click(function(a){a.preventDefault();a.stopImmediatePropagation();a=$("#message-mapcitycity");var g=$.trim($("#mapcitycity-selectcountry").val()),h=$.trim($("#mapcitycity-selectcity").val());""==h?(showMessageError(a,"You must select a City. Please try again",300),
hideMessageError(a,!1,300)):(mapcity.countryid=g,mapcity.cityid=h,mapcity.showPopupShareitPlans2())});$("#mapcitycity-viewmaps").click(function(a){a.preventDefault();a.stopImmediatePropagation();a=$("#message-mapcitycity");var g=$.trim($("#mapcitycity-selectcountry").val()),h=$.trim($("#mapcitycity-selectcity").val());""==h?(showMessageError(a,"You must select a City. Please try again",300),hideMessageError(a,!1,300)):(setCountryToMapCity_ajax(g,h,!0),mapcity.countryid=g,mapcity.cityid=h,$("#mask").remove(),
window.top.location.href="mapcitypopup.cfm?ctid="+mapcity.cityid+"&plid="+mapcity.countryid)});$("#menuhome-selectcountry").change(function(){$("#menuhome-selectcity").empty();$("#menuhome-selectcity").attr("disabled",!0);$("#menuhome-selectplan").empty();$("#menuhome-selectplan").attr("disabled",!0);var a=$("#menuhome-selectcountry").val();if(""!=a){var g="https://myezplan.com/mobile/appdata/data_ajax/map_homemenu_ajax.cfm?aleat="+1E16*Math.random()+"&",a={action:"getcitiesbycountry",countryid:a};
$("#menuhome-selectcity").load(g,a,function(a,b,g){switch(b){case "error":console.log("error getting data: "+g.statusText);break;case "success":$("#menuhome-selectcity").attr("disabled",!1)}})}});$("#menuhome-selectcity").change(function(a){$("#menuhome-selectplan").empty();var g=$("#menuhome-selectcity").val();""==g?$("#menuhome-selectplan").attr("disabled",!0):(a="https://myezplan.com/mobile/appdata/data_ajax/map_homemenu_ajax.cfm?aleat="+1E16*Math.random()+"&",g={action:"getplansbycity",cityid:g},
$("#menuhome-selectplan").load(a,g,function(a,b,g){switch(b){case "error":console.log("error getting data: "+g.statusText);break;case "success":$("#menuhome-selectplan").attr("disabled",!1)}}))});$("#menuhome-box #menuhome-viewmaps").click(function(a){a.preventDefault();a.stopImmediatePropagation();var g=$("#message-menuhome");a=$.trim($("#menuhome-selectcountry").val());var h=$.trim($("#menuhome-selectcity").val()),k=$.trim($("#menuhome-selectplan").val());if(""==k)showMessageError(g,"You must select a Plan. Please try again",
300),hideMessageError(g,!1,300);else if(0==k){g=!1;if(0!=global_countrymapcity&&global_countrymapcity!=a&&(g=window.confirm("Do you want to change the country without saving your plan (Mix & Match)?"),!g)){window.location.href="mapcity.cfm";return}setCountryToMapCity_ajax(a,h,g);window.setTimeout("window.location.href='mapcity.cfm';",1E3)}else window.location.href="map.cfm?mapa="+k+"&ciudad="+h});$("#menuhome-box #menuhome-viewdeals").click(function(a){a.preventDefault();a.stopImmediatePropagation();
a=$("#message-menuhome");var g="",h=$.trim($("#menuhome-selectcity").val()),k=$.trim($("#menuhome-selectplan").val());""==h?(showMessageError(a,"You must select a City. Please try again",300),hideMessageError(a,!1,300)):(""!=h&&(g+="city="+h+"&"),""!=k&&(g+="tour="+k+"&"),location.href="hotdeals.cfm?q=search&"+g+"#SearchResults")});$("#menuhome-box #menuhome-viewmap").click(function(a){a.preventDefault();a=$("#message-menuhome");var g=$.trim($("#menuhome-selectcity").val());if(""==g)showMessageError(a,
"You must select a City. Please try again",300),hideMessageError(a,!1,300);else return cargar_citypic(g),g=$("#citymap-box"),g.fadeIn(300),g.height(),g.width(),a=parseInt(g.css("z-index")),g.css({"z-index":a+1}),$("body").append('<div id="mask-citymap" class="mask" style="z-index:0;"></div>'),g=$("#mask-citymap"),g.css("z-index",a),g.fadeIn(300),!1});$("#menusearchdeals-send").click(function(a){a.preventDefault();var g="",h=$("#message-menusearchdeals");a=$.trim($("#menusearchdeals-selectcountry").val());
var k=$.trim($("#menusearchdeals-selectcity").val()),q=$.trim($("#menusearchdeals-selectplan").val());window.citdeals=k;if(""==k)showMessageError(h,"You must select a City. Please try again",300),hideMessageError(h,!1,300);else{var u=$.cookie("PAIS"),p=$.cookie("EZPLAN");if(u!=a&&"NO"!=p)if(confirm("Do you want to change the country and reset myezplan?"))$.cookie("PAIS",a),$.cookie("EZPLAN","NO"),$.cookie("EZPLANsp","NO"),$.cookie("EZPLANep","NO");else return closePopup(),!1;""!=k&&(g+="city="+k+
"&");""!=q&&(g+="tour="+q+"&");g+=randomNumberUrl();$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/deals_ajax_content.cfm",async:!1,cache:!1,data:{action:"countsearchingdeals",city:k,tour:q},error:function(a,b,g){myezAlert.render(g)},success:function(a){if(0==parseInt(a))return showMessageError(h,"Sorry, there are currently no special offers in this area. Please check later.",300),hideMessageError(h,!1,300),!1;a="hotdeals.html?q=search&"+g+"#SearchResults";$("#deals_panel #box-body").empty();
$("#deals_panel #box-body").load(a);$("#menusearchdeals-box").fadeOut();$("#mask").fadeOut();$("#mask").fadeOut()}})}});$("#menusearchdeals-box #menuhome-viewmap").click(function(a){a.preventDefault();a=$("#message-menusearchdeals");var g=$("#menusearchdeals-selectcity"),h=$.trim(g.val()),g=g.find("option[value="+h+"]").text();if(""==h)showMessageError(a,"You must select a City. Please try again",300),hideMessageError(a,!1,300);else return $("#citymap-box #citymap_img_cityname").text(g),cargar_citypic(h),
h=$("#citymap-box"),h.fadeIn(300),h.height(),h.width(),a=parseInt(h.css("z-index")),h.css({"z-index":a+1}),$("body").append('<div id="mask-citymap" class="mask" style="z-index:0;"></div>'),h=$("#mask-citymap"),h.css("z-index",a),h.fadeIn(300),!1})});
$(window).load(function(a){window.setTimeout(function(){},1E3);$(document).on("click","a#menu-mycart, #menu-mycart",function(a){$("#cart-panel #box-body").empty();showUserCart();return!1});$(document).on("click","a#menu-myaccount, #menu-myaccount",function(a){openshowAccount();return!1});$(document).on("click","a#menu-myitinerary, #menu-myitinerary",function(a){mapcitypopup.showSelPlaces2();return!1});$(document).on("click","a#menu-mytrips, #menu-mytrips",function(a){mapcitypopup.MyItinerariesView();
return!1});$(document).on("click","a#menu-mybusiness, #menu-mybusiness",function(a){showmybusiness();return!1});$(document).on("click","a#menu-myplans, #menu-myplans, a#buttonAddPlanItinerary",function(a){showUserPlanTable();return!1});


    showUserCart=function(){$("#cart-panel #box-body").empty();if("N"!=JSON.parse(sessionStorage.cart)[0].placeid||""!=sessionStorage.planscart){var a=$("#cart-panel"),g=$("#cart-panel #box-body");g.empty();a.panel();a.show();a.panel("open");g.load("cart.html")}else showMessageError($("#general-msg"),
"Your Shopping cart is empty",300,"error","top"),hideMessageError($("#general-msg"),!1,300)};

    showmybusiness=function(a){faqpage="business";loadmenuItems();var g=$("#business");$(".page-div").hide();g.show();"undefined"!=typeof a?g.load("cl_redeemvoucher.html").promise().done(showclSettings()):g.load("cl_redeemvoucher.html",function(){$("#cl_content").show()});pageheadercityname.innerHTML="<span class='capitalize_red'>R</span>edeem";$("#menu_panel").panel("close");$("#gen-menu-btn").hide();$("#bus-menu-btn").show();
window.returnpage="page1";backarrow_nav=1;$("#go_backgreen").show();$("#Gen_footer").hide()};showUserPlanTable=function(){var a=$("#myuserplan-box");a.panel();a.show();a.panel("open");countMyUserPlan();if(!(0<countuserplan))return myezAlert.render("You don't have Saved Plans"),a.panel("close"),!1;a.height();a.width()};$("#map-top-button-option").click(function(a){0==global_countrymapcity?setCountryToMapCity_ajax(countryid,cityid,!0):window.top.location.href="mapcity.cfm";return!1});$("#map-top-button-faq").click(function(a){a.stopPropagation();
a.preventDefault();$("#myeztravel-faq").showLoading("Please Wait,<br/>Retriving Topics...<br/>",!1);$("body").append('<div id="mask-faq" class="mask-faq"></div>');$("#mask-faq").fadeIn(0);$("#myeztravel-faq").fadeIn(0);sessionStorage.getItem("ppfaq"+faqpage)?$("#myeztravel-faq").html(sessionStorage.getItem("ppfaq"+faqpage)):(a="https://myezplan.com/mobile/appdata/data_ajax/faq_ajax_content.cfm?page="+faqpage,$("#myeztravel-faq").load(a,{action:"Faq_index"},function(a,b,k){switch(b){case "error":$("#myeztravel-faq").empty();
myezAlert.render("We are sorry, There aren't any help files in this page");break;case "success":sessionStorage.setItem("ppfaq"+faqpage,a)}}));return!1});openPopupFAQ=function(){var a=$("#faq-box");a.fadeIn(300);a.height();a.width();a.css({});$("body").append('<div id="mask" class="mask"></div>');$("#mask").fadeIn(300);openPopupFAQ_ajax()};openPopupFAQ_ajax=function(){$("#faq-box .box-body").empty();$("#faq-box .box-body").load("https://myezplan.com/mobile/appdata/data_ajax/faq_ajax_content.cfm",{action:"getitemspopup"},
openPopupFAQ_ajax_result)};openPopupFAQ_ajax_result=function(a,g,h){};$(document).tooltip&&$(document).tooltip();$(document).mouseup(function(a){var g=$(".hasDatepicker");g.is(a.target)||0!==g.has(a.target).length||g.hide()});$("html").on("touchstart",function(a){var g=$(".hasDatepicker");g.is(a.target)||0!==g.has(a.target).length||g.hide()})});
function go_mytinierary(){$("#myitin_panel #box-body").empty();$("#gene_int_info")[0].innerHTML="<img width='35px' src='https://lh6.googleusercontent.com/-44bFjug7xpE/U5I5oAOzU_I/AAAAAAANfHI/a1ItxGAYBN0/s50/Untitled35.png'>";$("#myitin_panel").show();$("#myitin_panel").panel("open");$("#myitin_panel #box-body").load("myitinerary.html")}function loadnewcitypage(){$("#page1").load("mapcitypopup_2.html",function(){$("#page1").load("mapcitypopup_2.html")})}function openLastPanel(){}
function closemyitin(){$("#myitin_panel").panel("open")}function showdealsfromitine(a,b){$("#deals_panel .box-body").empty();window.citdeals=a;window.tourdeals=b;$("#deals_panel #box-body").load("hotdeals.html");$("#deals_panel").panel();$("#deals_panel").show();$("#deals_panel").panel("open");return!0}
function checkPlnDls(a,b,g){$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/deals_ajax_content.cfm",async:!1,cache:!1,data:{action:"countsearchingdeals",city:a,tour:b},error:function(a,b,g){myezAlert.render(g)},success:function(a){if(0==parseInt(a))return $("."+g).hide(),!1;$("."+g).show()}})}
function myEditPlan(a){$("#editPlan_panel #box-body").empty();window.myUrl=a;window.shaMyUrl=a.replace("mapcity_edit.html","https://www.myezplan.com/mapcity.cfm");$("#editPlan_panel").show();$("#editPlan_panel").panel("open");$("#editPlan_panel #box-body").load(a)}function openReport(a,b){window.RPlid=b;var g=$("#report_panel"),h=$("#report_panel .box-body");g.show();g.panel("open");h.load(a)}
function inlineDate(a,b){var g="undefined"!=typeof b&&"class"==b?$("."+a):$("#"+a);console.log(a);"none"==g.css("display")?g.show():g.hide()}function truncateString(a,b){return a.replace(new RegExp("(([^\\s]+\\s+){"+b+"}).+"),"$1...")}
function showExternalPage(a,b){_panel=$("#externalP-panel");_panel.panel();_panel.show();_panelLoad=$("#externalP-panel iframe");_panelLoad.attr("src","");_panel.panel("open");b||"iframe"==b?(_panelLoad.show(),_panelLoad.attr("src",a)):(_panelLoad=$("#externalP-panel #box-body"),_panelLoad.show(),_panelLoad.empty(),_panelLoad.load(a))}


function faqMyAccount(){$("#myeztravel-faq").showLoading("Please Wait,<br/>Retriving Topics...<br/>",!1);$("body").append('<div id="mask-faq" class="mask-faq"></div>');$("#mask-faq").fadeIn(0);$("#myeztravel-faq").fadeIn(0);sessionStorage.getItem("accfaq")?$("#myeztravel-faq").html(sessionStorage.getItem("accfaq")):$("#myeztravel-faq").load("https://myezplan.com/mobile/appdata/data_ajax/faq_ajax_content.cfm?page=myaccount",{action:"Faq_index"},function(a,b,g){switch(b){case "error":$("#myeztravel-faq").empty();
myezAlert.render("We are sorry, There aren't any help files in this page");break;case "success":sessionStorage.setItem("accfaq",a)}});return!1}function showContactus(){_panel=$("#contactus-panel");_paneload=$("#contactus-panel .box-body");_paneload.empty();_panel.panel();_panel.show();_panel.panel("open");_paneload.load("contactus.html")}
function showHowitworks(){_panel=$("#hworks-panel");_paneload=$("#hworks-panel .box-body");_paneload.empty();_panel.panel();_panel.show();_panel.panel("open");_paneload.load("howitworks.html")}function closeContact(){_panel=$("#contactus-panel");_panel.panel("close")}function closehworks(){_panel=$("#hworks-panel");_panel.panel("close")}
function getCatpcha(a,b){$.ajax({url:"https://myezplan.com/mobile/appdata/data_ajax/get_catpcha.cfm",success:function(g){_data=g.split(";");document.getElementById(a).src=_data[0];$("#"+b).val(_data[1]);signup_rnd=_code=_data[2].replace(/\s+/g,"")}})}
function uploadFileAjax(a){$.ajaxFileUpload({url:"https://myezplan.com/mobile/appdata/sube_fichero_ajax.cfm",secureuri:!1,fileElementId:"subirimagen",dataType:"json",success:function(a,g){myezAlert.render("logo updated")},error:function(a,g,h){myezAlert.render(h)}})}function getInFirst(){fromlogin=1;Continue_new()}
function showclSettings(){faqpage="cl_settings";pageheadercityname.innerHTML="<span class='capitalize_red'>M</span>y Settings";$.post("data_ajax/clsettings.cfm?rnu=1354684656",{action:"ShowSettings",upuserid:sessionStorage.cf_sid}).success(function(a,b,g){$("#cl_content").html(a);$("#cl_content").show();pageheadercityname.innerHTML="<span class='capitalize_red'>M</span>y Settings";$("#menu-business").panel("close")});return!1}
function showTabGen(a){"none"==$("#"+a).css("display")?$("#"+a).show():$("#"+a).hide()}
function faqPayment(){$("#myeztravel-faq").showLoading("Please Wait,<br/>Retriving Topics...<br/>",!1);$("body").append('<div id="mask-faq" class="mask-faq"></div>');$("#mask-faq").fadeIn(0);$("#myeztravel-faq").fadeIn(0);sessionStorage.getItem("clsettings2")?$("#myeztravel-faq").html(sessionStorage.getItem("payment")):$("#myeztravel-faq").load("https://myezplan.com/mobile/appdata/data_ajax/faq_ajax_content.cfm?page=clsettings2",{action:"Faq_index"},function(a,b,g){switch(b){case "error":$("#myeztravel-faq").empty();
myezAlert.render("We are sorry, There aren't any help files in this page");break;case "success":sessionStorage.setItem("clsettings2",a)}});return!1}
function changeitiname_edit(a){var b=document.getElementById("nametochange-edit").value;if(""==b)return myezAlert.render("please type a valid name"),!1;$.cookie("MYITINERARYNAME",b);a={action:"ChangeItineraryName",itiid:a,newname:b};$("#Itinenrary_funcs").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_VI.cfm?rnu=5131616516651",a,function(){var a=new PNotify({title:"Myezplan Notice",text:"The name has been changed.",styling:"jqueryui",type:"success",delay:1E3,mouse_reset:!1,buttons:{closer:!1,
sticker:!1}});a.get().click(function(){a.remove()})})}function makeShortUrl(a,b){gapi.client.urlshortener.url.insert({resource:{longUrl:a}}).execute(function(a){null!=a.id?(window.shortUrl=a.id,b()):myezAlert.render("error: creating short url n"+a.error)})}function delfromArrayList(a,b){for(var g=a.length-1;0<=g;g--)a[g].genid===b&&a.splice(g,1)}
function Mapfullscreen(a){"on"==a?($("#titlehead, #show_categ, #show_places, #areas_desc, #myitin_content").hide(),$("#body_map_canvas .gm-style").addClass("gmstylefull"),$("#body_map").css("height","100%"),$("#maplist-cont").show(),$("#maplist-cont, #body_map").addClass("map-list"),$(".wrap").css("height","100%").css("height","-=40px"),$("#body_map").css("height","100%").css("height","-=120px"),xsize>window.mbscreen&&$("#maplist-cont").css("height","100%").css("height","-=120px"),$(window).bind("resize.mapfull",
function(){$(".wrap").css("height","100%").css("height","-=40px");$("#body_map").css("height","100%").css("height","-="+$("#map-tools1").height()+"");xsize>window.mbscreen&&$("#maplist-cont").css("height","100%").css("height","-="+$("#map-tools1").height()+"");mapcitypopup.mapconfig.setCenterByBounds()})):($("#titlehead, #show_categ, #show_places, #areas_desc, #myitin_content").show(),$("#body_map_canvas .gm-style").removeClass("gmstylefull"),$("#body_map").css("height","235px;"),$("#maplist-cont").css("height",
"350px"),$(window).unbind("resize.mapfull"),$("#maplist-cont, #body_map").removeClass("map-list"),$("#maplist-cont").hide(),$(".wrap").css("height","auto"))}
followtransroute=function(a){$("#butres2").show();-1!=vartransportinview_idx&&($(".lista_st_"+vartransportinview_idx).css("background-color",""),$(".lista_st_"+vartransportinview_idx+" td").css("padding","0px"));"n"==a&&(vartransportinview_idx+=1);"p"==a&&--vartransportinview_idx;0>vartransportinview_idx&&(vartransportinview_idx=0);vartransportinview_idx>array_tras_stops.length-1&&(vartransportinview_idx=array_tras_stops.length-1);mapcitypopup.mapconfig.google.map.setCenter(array_tras_stops[vartransportinview_idx].getPosition());
mapcitypopup.mapconfig.google.map.setZoom(14);a="<span>"+array_tras_stops[vartransportinview_idx].nombre+"</span>";$(".lista_st_"+vartransportinview_idx).css("background-color","#eee");$(".lista_st_"+vartransportinview_idx+" td").css("padding","5px");$("html, body").animate({scrollTop:$(".lista_st_"+vartransportinview_idx).offset().top-$("#show_box2").height()-100},"fast");$("#map_titulos_subroutestops").html(a)};
resetsubroutemap_t=function(){$("#butres").hide();mapcitypopup.mapconfig.google.map.fitBounds(estediarutamarkers[var_index_route].bounds);$("#map_titulos_subroutestops").empty();$(".lista_st_"+vartransportinview_idx).css("background-color","");vartransportinview_idx=-1};
view_subroute_t=function(a){if(0==vartransportinview){vartransportinview=a;vartransportinview_idx=-1;$("#flecha1").hide();$("#flecha2").hide();$("#butres").hide();document.getElementById("imgicon_t_"+a).src="https://lh4.googleusercontent.com/-V07ECwbLDo0/VElVKc2RT2I/AAAAAAANg6g/MrFn3V4wQPo/s45/subroutas%2520small%2520color.png";$("#map_titulos_subplace").showLoading("Please Wait,<br/>Loading...<br/>",!1);$("#map_titulos_subplace").html('<div align="center"><img id="flecha3" onclick="followtransroute(\'p\');" class="mouse_pointer" src="https://lh4.googleusercontent.com/-PJV-nFwVQcc/VEg-Cq0dY0I/AAAAAAANg5Q/w0jy_POMxG8/s49/flecha%2520azul%2520izq.png" height="35" style="vertical-align:middle;" class="cursor"  /><img id="butres2" onclick="resetsubroutemap_t();" class="mouse_pointer" src="https://lh3.googleusercontent.com/-sVU-NVhZ8Bw/VEkJ1zK2dPI/AAAAAAANg6E/e2gPM8d79V4/s49/zoom%2520blue%2520small.png" height="35" style="vertical-align:middle;display:none;" class="cursor"  />           <img id="flecha4" onclick="followtransroute(\'n\');" class="mouse_pointer" src="https://lh6.googleusercontent.com/-01xJjkAMotE/VEg-CKpxkBI/AAAAAAANg5M/nUWBMuFTYvg/s50/Flecha%2520azul%2520der.png" height="35" style="vertical-align:middle;" class="cursor" /><br/><div id="map_titulos_subroutestops" style=" font-weight:bolder;"></div></div>');
var b='<div align="center"><table>';for(st=0;st<array_tras_stops.length;st++)b=b+'<tr class="lista_st_'+st+'"><td>'+array_tras_stops[st].nombre+"</td></tr>";b+="</table></div>";$("#div_subroute_t_"+a).html(b)}else vartransportinview=0,$("#flecha1").show(),$("#flecha2").show(),$("#butres").show(),document.getElementById("imgicon_t_"+a).src="https://lh5.googleusercontent.com/--_jadcU4AAc/VElVKu0BhdI/AAAAAAANg6k/owydaBAle9I/s45/subroutas%2520small.png",$("#map_titulos_subplace").empty(),$("#div_subroute_t_"+
a).empty(),mapcitypopup.mapconfig.google.map.fitBounds(estediarutamarkers[var_index_route].bounds)};
view_subroute_i=function(a){var b=a-21,b=$.cookie("EZIDEAS").split(",")[b];if(0==varideasrouteinview)varideasrouteinview=1,var_index_ideasroute=-1,$("#flecha1").hide(),$("#flecha2").hide(),$("#butres").hide(),document.getElementById("imgicon_i_"+a).src="https://lh4.googleusercontent.com/-V07ECwbLDo0/VElVKc2RT2I/AAAAAAANg6g/MrFn3V4wQPo/s45/subroutas%2520small%2520color.png",mapcenterIR=mapcitypopup.mapconfig.google.map.getCenter(),mapzoomIR=mapcitypopup.mapconfig.google.map.getZoom(),$("#map_titulos_subplace").showLoading("Please Wait,<br/>Loading...<br/>",
!1),a={action:"IdeasrouteView",ruta_id:b,index:a},$("#map_titulos_subplace").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm?rnu=5131616516651",a);else{varideasrouteinview=0;$("#flecha1").show();$("#flecha2").show();$("#butres").show();document.getElementById("imgicon_i_"+a).src="https://lh5.googleusercontent.com/--_jadcU4AAc/VElVKu0BhdI/AAAAAAANg6k/owydaBAle9I/s45/subroutas%2520small.png";$("#map_titulos_subplace").empty();$("#div_subroute_"+a).empty();for(s=0;s<IdeasViewStops.length;s++)IdeasViewStops[s].setMap(null);
mapcitypopup.mapconfig.google.map.setCenter(mapcenterIR);mapcitypopup.mapconfig.google.map.setZoom(mapzoomIR)}};resetsubroutemap_p=function(){$("#butres2").hide();mapcitypopup.mapconfig.google.map.fitBounds(PersonalrouteBounds);$("#map_titulos_subroutestops").empty();$(".table_count_"+var_index_personalroute).css("background-color","");var_index_personalroute=-1};
function followsubroute_p(a){$("#butres2").show();-1!=var_index_personalroute&&$(".table_count_"+var_index_personalroute).css("background-color","");"n"==a&&(var_index_personalroute+=1);"p"==a&&--var_index_personalroute;0>var_index_personalroute&&(var_index_personalroute=0);var_index_personalroute>PersonalrouteStops.length-1&&(var_index_personalroute=PersonalrouteStops.length-1);mapcitypopup.mapconfig.google.map.setCenter(PersonalrouteStops[var_index_personalroute].getPosition());mapcitypopup.mapconfig.google.map.setZoom(18);
a="<span>"+PersonalrouteStops[var_index_personalroute].getTitle()+"</span>";$(".table_count_"+var_index_personalroute).css("background-color","#eee");$("#map_titulos_subroutestops").html(a)}
view_subroute_p=function(a){if(0==varpersonalrouteinview){mapcenterPR=mapcitypopup.mapconfig.google.map.getCenter();mapzoomPR=mapcitypopup.mapconfig.google.map.getZoom();PersonalrouteBounds=new google.maps.LatLngBounds;PersonalrouteStops=[];varpersonalrouteinview=1;var_index_personalroute=-1;$("#flecha1").hide();$("#flecha2").hide();$("#butres").hide();document.getElementById("imgicon_p_"+a).src="https://lh4.googleusercontent.com/-V07ECwbLDo0/VElVKc2RT2I/AAAAAAANg6g/MrFn3V4wQPo/s45/subroutas%2520small%2520color.png";
$("#map_titulos_subplace").showLoading("Please Wait,<br/>Loading...<br/>",!1);if(1==a)var b="#FF00FF",g="https://lh6.googleusercontent.com/-8xxqF9thOCg/U9nRcchbb_I/AAAAAAANgBg/C77KoahO1Sc/s44/64.png";2==a&&(b="#00FFCC",g="https://lh3.googleusercontent.com/-Tx9ASyR-Pm0/U9nRcry7fQI/AAAAAAANgB4/S4-sPOCQyv4/s44/66.png");3==a&&(b="#6600CC",g="https://lh3.googleusercontent.com/-Y2nKnJNaweg/U9nRcP8BO4I/AAAAAAANgBc/nnLGfRYqBm8/s45/65.png");4==a&&(b="#FF0033",g="https://lh5.googleusercontent.com/-E1dAbz_GUo8/U9nRfXIuR0I/AAAAAAANgCw/x-ZRzX81FTM/s44/72.png");
5==a&&(b="#99CC33",g="https://lh4.googleusercontent.com/-Npa9fnZ8jsI/U9nRgTkZovI/AAAAAAANgCg/RYgxYCvC1as/s44/74.png");6==a&&(b="#009999",g="https://lh3.googleusercontent.com/-yVml473bYZ4/U9nRhTGcy6I/AAAAAAANgC8/b_xcPHU1RM0/s44/77.png");7==a&&(b="#FF6600",g="https://lh6.googleusercontent.com/-_APxQcrJomA/U9nRhG6kRZI/AAAAAAANgCo/aCfSRKHPbO4/s44/76.png");8==a&&(b="#666600",g="https://lh6.googleusercontent.com/-f05N3TVBgaQ/U9nReUw3BJI/AAAAAAANgCI/Wqev2rAqxDI/s44/70.png");9==a&&(b="#989898",g="https://lh6.googleusercontent.com/-gjaXgjiHqzc/U9nRgg5WKcI/AAAAAAANgCk/TQs3DftLy1U/s44/75.png");
10==a&&(b="#FF0000",g="https://lh6.googleusercontent.com/-io7fsMrgN34/U9nRenFm-_I/AAAAAAANgCE/zbAnDMFVe4Q/s44/71.png");var h=$.cookie("EZPR_"+a).split("!")[1].split("*");for(c=0;c<h.length;c++){var k=h[c].replace("(","").replace(")","").split(","),q=new google.maps.LatLng(parseFloat(k[0]),parseFloat(k[1]));PersonalrouteBounds.extend(q)}mapcitypopup.mapconfig.google.map.fitBounds(PersonalrouteBounds);$("#map_titulos_subplace").html('<div align="center"><img id="flecha3" onclick="followsubroute_p(\'p\');" class=" mouse_pointer" src="https://lh4.googleusercontent.com/-PJV-nFwVQcc/VEg-Cq0dY0I/AAAAAAANg5Q/w0jy_POMxG8/s49/flecha%2520azul%2520izq.png" height="35" style="vertical-align:middle;" class="cursor"  /><img id="butres2" onclick="resetsubroutemap_p();" class=" mouse_pointer" src="https://lh3.googleusercontent.com/-sVU-NVhZ8Bw/VEkJ1zK2dPI/AAAAAAANg6E/e2gPM8d79V4/s49/zoom%2520blue%2520small.png" height="35" style="vertical-align:middle;display:none;margin:0 4px;" class="cursor"  /><img id="flecha4" onclick="followsubroute_p(\'n\');" class="mouse_pointer" src="https://lh6.googleusercontent.com/-01xJjkAMotE/VEg-CKpxkBI/AAAAAAANg5M/nUWBMuFTYvg/s50/Flecha%2520azul%2520der.png" height="35" width="35" style="vertical-align:middle;" class="cursor" /><br/><div id="map_titulos_subroutestops" style=" font-weight:bolder;"></div></div>');
var k=$.cookie("EZPR_"+a+"_S").split("!"),u="";for(cc=0;cc<k.length;cc++){var h=k[cc].split("*"),p=h[1],h=h[0].replace("(","").replace(")","").split(","),q=h[1],q=new google.maps.LatLng(parseFloat(h[0]),parseFloat(q)),h=new google.maps.Marker;h.setOptions({icon:g,draggable:!0,map:mapcitypopup.mapconfig.google.map,title:p,position:q});u=u+'<table class="table table_count_'+cc+'"><tr><td style="width:103px">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="t3" ><label class="cursor label_check"><span style="color:'+
b+';">'+p+'</span><td class="table_img"><div><img src="https://lh3.googleusercontent.com/-N4Sfx6aRnhg/VMm8iyKc2fI/AAAAAAANhEk/BWpxO6zkDo4/s136/Subrutas.png"></div></td></label></td></tr></table>';PersonalrouteStops.push(h)}$("#div_subroute_"+(a+10)).html(u)}else{varpersonalrouteinview=0;$("#flecha1").show();$("#flecha2").show();$("#butres").show();document.getElementById("imgicon_p_"+a).src="https://lh5.googleusercontent.com/--_jadcU4AAc/VElVKu0BhdI/AAAAAAANg6k/owydaBAle9I/s45/subroutas%2520small.png";
$("#map_titulos_subplace").empty();mapcitypopup.mapconfig.google.map.setCenter(mapcenterPR);mapcitypopup.mapconfig.google.map.setZoom(mapzoomPR);for(prs=0;prs<PersonalrouteStops.length;prs++)PersonalrouteStops[prs].setMap(null);$("#div_subroute_"+(a+10)).empty()}};
view_subroute=function(a,b){var g=varsubrouteinview;if(g==b){document.getElementById("imgicon_"+b).src="https://lh5.googleusercontent.com/--_jadcU4AAc/VElVKu0BhdI/AAAAAAANg6k/owydaBAle9I/s45/subroutas%2520small.png";for(x=0;x<PolylineSubruta.subroutes.length;x++)PolylineSubruta.subroutes[x].setMap(null);for(c=0;c<PolylineSubruta.stops.length;c++)PolylineSubruta.stops[c].setMap(null);PolylineSubruta.setMap(null);mapcitypopup.mapconfig.google.map.setCenter(mapcenterSR);mapcitypopup.mapconfig.google.map.setZoom(mapzoomSR);
$("#div_subroute_"+a).empty();$("#map_titulos_subplace").empty();$("#flecha1").show();$("#flecha2").show();$("#butres").show();varsubrouteinview=1}if(1==g){mapcenterSR=mapcitypopup.mapconfig.google.map.getCenter();mapzoomSR=mapcitypopup.mapconfig.google.map.getZoom();$("#flecha1").hide();$("#flecha2").hide();$("#butres").hide();varsubrouteinview=b;$("#map_titulos_subplace").showLoading("Please Wait,<br/>Loading...<br/>",!1);var h="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm?rnu=5131616516651",
k={action:"SubrouteView",subruta_id:b,ruta_id:a};$("#map_titulos_subplace").load(h,k);document.getElementById("imgicon_"+b).src="https://lh4.googleusercontent.com/-V07ECwbLDo0/VElVKc2RT2I/AAAAAAANg6g/MrFn3V4wQPo/s45/subroutas%2520small%2520color.png"}if(1!=g&&g!=b){document.getElementById("imgicon_"+g).src="https://lh5.googleusercontent.com/--_jadcU4AAc/VElVKu0BhdI/AAAAAAANg6k/owydaBAle9I/s45/subroutas%2520small.png";varsubrouteinview=b;for(x=0;x<PolylineSubruta.subroutes.length;x++)PolylineSubruta.subroutes[x].setMap(null);
for(c=0;c<PolylineSubruta.stops.length;c++)PolylineSubruta.stops[c].setMap(null);PolylineSubruta.setMap(null);$("#div_subroute_"+a).empty();$("#map_titulos_subplace").showLoading("Please Wait,<br/>Loading...<br/>",!1);h="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm?rnu=5131616516651";k={action:"SubrouteView",subruta_id:b,ruta_id:a};$("#map_titulos_subplace").load(h,k)}};
unadplacefromroute=function(a,b,g){resetroutemap();newcookie=[];var h=$.cookie("EZMAPCITYPLACES2_day"+a);h&&""!=h&&(newcookie=h.split(","));newcookie.push(b);$.cookie("EZMAPCITYPLACES2_day"+a,newcookie.join(","));"undefined"!=typeof directionsDisplay&&directionsDisplay.setMap(null);"undefined"!=typeof initialLocation&&(mapcitypopup.mapconfig.google.map.setCenter(initialLocation),myLocationControlChange("disable"),clearTimeout(gtml_time1),clearTimeout(gtml_time2));MyLocationDiv.remove();h="'"+b+"'";
id2=-1<h.indexOf("s")||-1<h.indexOf("t")||-1<h.indexOf("m")||-1<h.indexOf("d")?"'"+b+"'":b;$(".div_plans_noroute").show();$(".div_plans_noroute").append($("#div_route_"+a+"_"+b));$("#div_route_"+a+"_"+b+" .t4:first").empty();$("#div_route_"+a+"_"+b+" .t4:first").append('<img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+a+","+id2+","+g+');">');$("#div_route_"+a+"_"+b+" table").attr("id",
"");$("#div_route_"+a+"_"+b+" table").removeClass("table_"+g);h=$(".div_plans_route").sortable("toArray").toString().replace(/div_route_/g,"").split(",");b=[];g=[];for(x=0;x<h.length;x++){var k=h[x].split("_");a=k[0];g.push(k[1]);0>k[1].indexOf("t")&&0>k[1].indexOf("s")&&b.push(k[1])}if((h=$.cookie("EZMAPCITYPLACES2_day"+a))&&""!=h)for(h=h.split(","),f=0;f<h.length;f++)b.push(h[f]),g.push(h[f]);$.cookie("EZROUTE_day_"+a,!0);$.cookie("EZMAPCITYPLACES_day"+a,b.join(","));$.cookie("EZFULLORDER_day"+
a,g.join(","));resetdayarray(a);varlistchanged=!0};
adplacefromroute=function(a,b,g){var h=[];cookpl2_=$.cookie("EZMAPCITYPLACES2_day"+a).split(",");for(c=0;c<cookpl2_.length;c++)cookpl2_[c]!=b&&h.push(cookpl2_[c]);0!=h.length?$.cookie("EZMAPCITYPLACES2_day"+a,h.join(",")):(console.log("no places"),$.cookie("EZMAPCITYPLACES2_day"+a,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYPLACES2_day"+a,!1,null));"undefined"!=typeof directionsDisplay&&directionsDisplay.setMap(null);"undefined"!=typeof initialLocation&&(mapcitypopup.mapconfig.google.map.setCenter(initialLocation),
myLocationControlChange("disable"),clearTimeout(gtml_time1),clearTimeout(gtml_time2));MyLocationDiv.remove();h="'"+b+"'";id2=-1<h.indexOf("s")||-1<h.indexOf("t")||-1<h.indexOf("m")||-1<h.indexOf("d")?"'"+b+"'":b;$(".div_plans_route").append($("#div_route_"+a+"_"+b));$("#div_route_"+a+"_"+b+" .t4:first").empty();$("#div_route_"+a+"_"+b+" .t4:first").append('<img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+
a+","+id2+","+g+');">');$("#div_route_"+a+"_"+b+" table").attr("id","tablelist"+g);h=$(".div_plans_route").sortable("toArray").toString().replace(/div_route_/g,"").split(",");b=[];g=[];for(x=0;x<h.length;x++){var k=h[x].split("_");a=k[0];g.push(k[1]);0>k[1].indexOf("t")&&0>k[1].indexOf("s")&&b.push(k[1])}if((h=$.cookie("EZMAPCITYPLACES2_day"+a))&&""!=h)for(h=h.split(","),f=0;f<h.length;f++)b.push(h[f]),g.push(h[f]);$.cookie("EZROUTE_day_"+a,!0);$.cookie("EZMAPCITYPLACES_day"+a,b.join(","));$.cookie("EZFULLORDER_day"+
a,g.join(","));resetdayarray(a);varlistchanged=!0};
saveadvopt=function(a){$(".div_plans_route").hide();$(".div_plans_noroute").hide();$(".div_plans_route_label").hide();$(".button-show-MEP").css("background-color","rgb(211, 211, 211)");varshowmep=!1;"undefined"!=typeof directionsDisplay&&directionsDisplay.setMap(null);"undefined"!=typeof initialLocation&&(mapcitypopup.mapconfig.google.map.setCenter(initialLocation),myLocationControlChange("disable"),clearTimeout(gtml_time1),clearTimeout(gtml_time2));MyLocationDiv.remove();var b=document.getElementById("gotm").value;
$.cookie("EZGOTM_day_"+a,b);$.cookie("EZFULLORDER_day"+a,!1,{path:"/",expires:-1});$.cookie("EZFULLORDER_day"+a,null);if(varoptimizeacive)varreorder=!1;else{var b=$.cookie("EZMAPCITYPLACES_day"+a).split(","),g=[],h=document.getElementById("sel_sp").value,k=document.getElementById("sel_ep").value;g.push(parseInt(h));for(x=0;x<b.length;x++)parseInt(b[x])!=parseInt(h)&&parseInt(b[x])!=parseInt(k)&&g.push(parseInt(b[x]));g.push(parseInt(k));$.cookie("EZMAPCITYPLACES_day"+a,g.join(","));varreorder=!0}orderrouteforday(a)};
advopt_optimize=function(){varoptimizeacive?(varoptimizeacive=!1,document.getElementById("sel_sp").disabled=!1,document.getElementById("sel_ep").disabled=!1,document.getElementById("adv_opt_optimize").style.backgroundColor="rgb(211, 211, 211)"):(varoptimizeacive=!0,document.getElementById("sel_sp").disabled=!0,document.getElementById("sel_ep").disabled=!0,document.getElementById("adv_opt_optimize").style.backgroundColor="rgb(23, 55, 94)")};
showadvopt=function(){var a=$(".advopt");varshowadvopt?(a.panel("close"),varshowadvopt=!1):(a.panel({close:function(){varshowadvopt=!1;a.hide()}}),a.show(),a.panel("open"),varshowadvopt=!0)};
AudioTour_f=function(a){$("body").append('<div id="mask" class="mask"></div>');$("#mask").fadeIn(300);$("#boxaudiotour").fadeIn(300);$("#boxaudiotour").find("#box-body").html('<iframe id="iframe_audiobox" width="560" height="315" frameborder="0" allowfullscreen></iframe>');$("#iframe_audiobox").showLoading("Please Wait,<br/>Searching For<br/>Audio Tour...",!1);$("#iframe_audiobox").attr("src",a);return!1};
function resetroutemap(){$("#butres").hide();if(-1!=var_index_route&&($(".table_"+var_index_route).css("background-color",""),$("#div_plans_route .table").css("background-color",""),mapcitypopup.mapconfig.google.map.setCenter(mapcenterO),mapcitypopup.mapconfig.google.map.setZoom(mapzoomO),var_index_route=-1,$("#map_titulos_place").empty(),-1!=var_view_trans_serv)){if(10==estediarutamarkers[var_view_trans_serv].mk_type&&1==estediarutamarkers[var_view_trans_serv].type)for(st=0;st<estediarutamarkers[var_view_trans_serv].arraystops.length;st++)estediarutamarkers[var_view_trans_serv].arraystops[st].setVisible(!1),
estediarutamarkers[var_view_trans_serv].arraystops[st].stopinfo.close(mapcitypopup.mapconfig.google.map,estediarutamarkers[var_view_trans_serv].arraystops[st]);else estediarutamarkers[var_view_trans_serv].stopinfo.close(mapcitypopup.mapconfig.google.map,estediarutamarkers[var_view_trans_serv]);var_view_trans_serv=-1}}
function followroute(a){$("#butres").show();varsubrouteinview=1;vartransportinview=varideasrouteinview=varpersonalrouteinview=0;if(-1==var_index_route)mapcenterO=mapcitypopup.mapconfig.google.map.getCenter(),mapzoomO=mapcitypopup.mapconfig.google.map.getZoom();else if($(".table_"+var_index_route).css("background-color",""),-1!=var_view_trans_serv){if(10==estediarutamarkers[var_view_trans_serv].mk_type&&1==estediarutamarkers[var_view_trans_serv].type)for(st=0;st<estediarutamarkers[var_view_trans_serv].arraystops.length;st++)estediarutamarkers[var_view_trans_serv].arraystops[st].setVisible(!1),
estediarutamarkers[var_view_trans_serv].arraystops[st].stopinfo.close(mapcitypopup.mapconfig.google.map,estediarutamarkers[var_view_trans_serv].arraystops[st]);else estediarutamarkers[var_view_trans_serv].stopinfo.close(mapcitypopup.mapconfig.google.map,estediarutamarkers[var_view_trans_serv]);var_view_trans_serv=-1}"n"==a&&(var_index_route+=1);"p"==a&&--var_index_route;0>var_index_route&&(var_index_route=0);var_index_route>estediarutamarkers.length-1&&(var_index_route=estediarutamarkers.length-1);
if(10<=estediarutamarkers[var_index_route].mk_type)if(console.log("here"),var_view_trans_serv=var_index_route,mapcitypopup.mapconfig.google.map.fitBounds(estediarutamarkers[var_index_route].bounds),10==estediarutamarkers[var_index_route].mk_type){if(1==estediarutamarkers[var_index_route].type){a='&nbsp;&nbsp;<a href="javascript:;"  style="text-decoration:none;color:#990000;font-weight:bold;" onclick="view_subroute_t('+estediarutamarkers[var_index_route].rid+');" ><img id="imgicon_t_'+estediarutamarkers[var_index_route].rid+
'" src="https://lh5.googleusercontent.com/--_jadcU4AAc/VElVKu0BhdI/AAAAAAANg6k/owydaBAle9I/s45/subroutas%2520small.png" height="35" title="Subroutes"/></a><div id="map_titulos_subplace"></div>';array_tras_stops=[];var b=$.cookie("EZTRANSPORT_S_day"+viewingday).split(",");for(st=0;st<estediarutamarkers[var_index_route].arraystops.length;st++){estediarutamarkers[var_index_route].arraystops[st].setVisible(!0);var g=0;for(sst=0;sst<b.length;sst++)parseInt(b[sst])==parseInt(estediarutamarkers[var_index_route].arraystops[st].id_)&&
(g=1);1==g?(estediarutamarkers[var_index_route].arraystops[st].setIcon(estediarutamarkers[var_index_route].arraystops[st].icon_s),estediarutamarkers[var_index_route].arraystops[st].stopinfo.open(mapcitypopup.mapconfig.google.map,estediarutamarkers[var_index_route].arraystops[st]),array_tras_stops.push(estediarutamarkers[var_index_route].arraystops[st])):estediarutamarkers[var_index_route].arraystops[st].setIcon(estediarutamarkers[var_index_route].arraystops[st].icon_)}}else mapcitypopup.mapconfig.google.map.setZoom(13),
a='<a onclick="openexternalmedia_mapplacePer('+estediarutamarkers[var_index_route].position.A+","+estediarutamarkers[var_index_route].position.F+",'"+estediarutamarkers[var_index_route].nombre+'\')" target="_new" style="text-decoration:none;color:#990000;font-weight:bold;"><img src="https://lh4.googleusercontent.com/-iyHoYeRcWPc/VEg8rt95vvI/AAAAAAANg44/AUPYLGq8Cm0/s57/Untitled27.png" height="35"></a>',estediarutamarkers[var_index_route].stopinfo.open(mapcitypopup.mapconfig.google.map,estediarutamarkers[var_index_route]);
a='<span style="color:#'+estediarutamarkers[var_index_route].color+';">'+estediarutamarkers[var_index_route].nombre+"</span><br>"+a}else mapcitypopup.mapconfig.google.map.setZoom(15),a='<a onclick="openexternalmedia_mapplacePer('+estediarutamarkers[var_index_route].position.A+","+estediarutamarkers[var_index_route].position.F+",'"+estediarutamarkers[var_index_route].nombre+'\')" target="_new" style="text-decoration:none;color:#990000;font-weight:bold;"><img src="https://lh4.googleusercontent.com/-iyHoYeRcWPc/VEg8rt95vvI/AAAAAAANg44/AUPYLGq8Cm0/s57/Untitled27.png" height="35"></a>',
a='<span style="color:#'+estediarutamarkers[var_index_route].color+';">'+estediarutamarkers[var_index_route].nombre+"</span><br>"+a,estediarutamarkers[var_index_route].stopinfo.open(mapcitypopup.mapconfig.google.map,estediarutamarkers[var_index_route]);else if(mapcitypopup.mapconfig.google.map.setCenter(estediarutamarkers[var_index_route].getPosition()),mapcitypopup.mapconfig.google.map.setZoom(15),1==estediarutamarkers[var_index_route].mk_type){if(a="<span onclick=\"window.top.showinfoplace('"+estediarutamarkers[var_index_route].mk_category.idunico+
"','"+estediarutamarkers[var_index_route].mk_id+"', 'myezplan');\">"+estediarutamarkers[var_index_route].getTitle()+'</span>&nbsp;&nbsp;<br><a onclick="openexternalmedia_mapplace('+estediarutamarkers[var_index_route].mk_id+')" target="_new" style="text-decoration:none;color:#990000;font-weight:bold;" ><img src="https://lh4.googleusercontent.com/-iyHoYeRcWPc/VEg8rt95vvI/AAAAAAANg44/AUPYLGq8Cm0/s57/Untitled27.png" height="35" title="Address"/></a>',"undefined"!=typeof estediarutamarkers[var_index_route].audio_link&&
""!=estediarutamarkers[var_index_route].audio_link&&(a=a+'&nbsp;&nbsp;<a href="javascript:;"  style="text-decoration:none;color:#990000;font-weight:bold;" onclick="openexternalmedia(\''+estediarutamarkers[var_index_route].audio_link+'\');" ><img src="https://lh6.googleusercontent.com/-OUWV6bn9bLk/VEg8rckUTeI/AAAAAAANg40/w-TxBQp8fuk/s51/Untitled26.png" height="35" title="Audio Tour"/></a>'),1==estediarutamarkers[var_index_route].ismap){b=[];if((g=$.cookie("EZMAPCITYSUBPLACES_day"+viewingday))&&""!=
g)for(g=g.split("!"),ll=0;ll<g.length;ll++){var h=g[ll].split("*"),k=h[1];parseInt(h[0])==parseInt(estediarutamarkers[var_index_route].mk_id)&&b.push(k)}0==b.length&&b.push("0");for(si=0;si<b.length;si++)a=a+'&nbsp;&nbsp;<a href="javascript:;"  style="text-decoration:none;color:#990000;font-weight:bold;" onclick="view_subroute('+estediarutamarkers[var_index_route].mk_id+","+b[si]+');" ><img id="imgicon_'+b[si]+'" src="https://lh5.googleusercontent.com/--_jadcU4AAc/VElVKu0BhdI/AAAAAAANg6k/owydaBAle9I/s45/subroutas%2520small.png" height="35" title="Subroutes"/></a>';
a+='<div id="map_titulos_subplace"></div>'}}else a="",4==estediarutamarkers[var_index_route].mk_type&&(a='&nbsp;&nbsp;<a href="javascript:;"  style="text-decoration:none;color:#990000;font-weight:bold;" onclick="view_subroute_i('+estediarutamarkers[var_index_route].id+');" ><img id="imgicon_i_'+estediarutamarkers[var_index_route].id+'" src="https://lh5.googleusercontent.com/--_jadcU4AAc/VElVKu0BhdI/AAAAAAANg6k/owydaBAle9I/s45/subroutas%2520small.png" height="35" title="Subroutes"/></a><div id="map_titulos_subplace"></div>'),
3==estediarutamarkers[var_index_route].mk_type&&(a=null!=$.cookie("EZPR_"+estediarutamarkers[var_index_route].id+"_S")?'&nbsp;&nbsp;<a href="javascript:;"  style="text-decoration:none;color:#990000;font-weight:bold;" onclick="view_subroute_p('+estediarutamarkers[var_index_route].id+');" ><img id="imgicon_p_'+estediarutamarkers[var_index_route].id+'" src="https://lh5.googleusercontent.com/--_jadcU4AAc/VElVKu0BhdI/AAAAAAANg6k/owydaBAle9I/s45/subroutas%2520small.png" height="35" title="Subroutes"/></a><div id="map_titulos_subplace"></div>':
""),2==estediarutamarkers[var_index_route].mk_type&&(a=""),b=estediarutamarkers[var_index_route].getPosition().toString().replace(/ /g,"").replace("(","").replace(")","").split(","),b="openexternalmedia_mapplacePer("+b[0]+","+b[1]+",'"+estediarutamarkers[var_index_route].getTitle()+"')",a="<span>"+estediarutamarkers[var_index_route].getTitle()+'</span><br><a onclick="'+b+'" target="_new" style="text-decoration:none;color:#990000;font-weight:bold;" ><img src="https://lh4.googleusercontent.com/-iyHoYeRcWPc/VEg8rt95vvI/AAAAAAANg44/AUPYLGq8Cm0/s57/Untitled27.png" height="35" title="Address"/></a>'+
a;$("#map_titulos_place").html(a);a=estediarutamarkers[var_index_route].listpos;$("#div_plans_route .table").css("background-color","");$(".table_"+a).css("background-color","#ddd");$("[title]").each(function(){$this=$(this);$.data(this,"title",$this.attr("title"));$this.removeAttr("title")});$("html, body").animate({scrollTop:$(".table_"+a).offset().top-$("#show_box2").height()-100},"fast")}
function orderrouteforday(a,b){b=b||mapcitypopup.mapconfig;var g=$.cookie("EZMAPCITYPLACES_day"+a),h=$.cookie("EZMAPCITYPLACES2_day"+a);$.cookie("EZTRANSPORT_day"+a);$.cookie("EZSERVICES_day"+a);if(g&&""!=g){hayruta=!0;g=g.split(",");coo2=[];if(h&&""!=h){var k=[];coo2=oookpl2.split(",");for(c=0;c<g.length;c++)0>coo2.indexOf(g[c])&&k.push(g[c])}else k=g;if(1>=k.length)return viewrouteforday(a),!1;estediarutamarkers=[];estediacoors=[];estedialats=[];estedialats2=[];for(c=0;c<k.length;c++){if(40<k[c]){for(mm=
0;mm<b.markers.length;mm++){var q=!1;b.markers[mm].mk_id==k[c]&&(q=!0,u=b.markers[mm],thiscoors=u.getPosition().toString().replace("(","").replace(")","").split(","),h=parseFloat(thiscoors[0]),estediacoors.push(thiscoors.join(",")),estedialats.push(h),estedialats2.push(h))}if(!q)for(xx=0;xx<othercityarray.length;xx++)othercityarray[xx].mk_id==k[c]&&(u=othercityarray[xx],thiscoors=u.getPosition().toString().replace("(","").replace(")","").split(","),estediacoors.push(thiscoors.join(",")),h=parseFloat(thiscoors[0]),
estedialats.push(h),estedialats2.push(h))}if(11>k[c]){h=$.cookie("EZPERSONAL");h=h.split("!");h=h[k[c]-1].split("*")[1];thiscoors=h.replace("(","").replace(")","").split(",");estediacoors.push(thiscoors.join(","));h=parseFloat(thiscoors[0]);estedialats.push(h);estedialats2.push(h);var u=personalmrks[k[c]-1]}if(10<k[c]&&21>k[c]){h=k[c]-10;h=$.cookie("EZPR_"+h);h=h.split("!");for(pm=0;pm<personalroutesmarks.length;pm++)personalroutesmarks[pm].id==k[c]-10&&(u=personalroutesmarks[pm]);thiscoors=u.getPosition().toString().replace("(",
"").replace(")","").split(",");estediacoors.push(thiscoors.join(","));h=parseFloat(thiscoors[0]);estedialats.push(h);estedialats2.push(h)}20<k[c]&&31>k[c]&&(h=k[c]-21,g=$.cookie("EZIDEAS_C").split("!")[h].split("*"),h=g[1]+","+g[2],estediacoors.push(h),h=parseFloat(g[1]),estedialats.push(h),estedialats2.push(h))}}varreorder||estedialats.sort();$.each(estedialats2,function(a,b){estedialats[0]==estedialats2[a]&&(sp_i=k[a],sp_coors=estediacoors[a],index1=a);estedialats[estedialats.length-1]==estedialats2[a]&&
(ep_i=k[a],ep_coors=estediacoors[a],index2=a)});index2>index1?(k.splice(index2,1),estediacoors.splice(index2,1),k.splice(index1,1),estediacoors.splice(index1,1)):(k.splice(index1,1),estediacoors.splice(index1,1),k.splice(index2,1),estediacoors.splice(index2,1));if(1<k.length)$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm",async:!0,cache:!1,data:"action=googlerouteorder&ids="+k.join(",")+"&coors="+estediacoors.join("*")+"&sp="+sp_i+"&sp_coors="+sp_coors+
"&ep="+ep_i+"&ep_coors="+ep_coors+"&gotm="+gotm,success:function(b){if(0==b)myezAlert.render("Imposible to Optimize Route, You have to oder it");else{p=[];p.push(sp_i);b=b.split(",");for(d=0;d<b.length;d++){var g=parseInt(b[d]);p.push(k[g])}p.push(ep_i);for(r=0;r<coo2.length;r++)p.push(coo2[r]);newcook=p.join(",");$.cookie("EZMAPCITYPLACES_day"+a,newcook)}}});else{if(0==k.length){var p=[];p.push(sp_i)}else p=[],p.push(sp_i),p.push(k[0]);p.push(ep_i);for(r=0;r<coo2.length;r++)p.push(coo2[r]);newcook=
p.join(",");$.cookie("EZMAPCITYPLACES_day"+a,newcook)}viewrouteforday(a)}
function viewrouteforday(a,b){console.log("List days");varlistchanged=!1;currentday=a;"undefined"!=typeof var_index_route&&-1!=var_index_route&&resetroutemap();daytoprint=a;gotm=$.cookie("EZGOTM_day_"+a);viewingday=a;gotm||($.cookie("EZGOTM_day_"+a,"WALKING"),gotm="WALKING");if(!$.cookie("EZROUTE_day_"+a))return $.cookie("EZROUTE_day_"+a,!0),varreorder=!1,orderrouteforday(a),!1;var_view_trans_serv=var_index_route=-1;varshowmep=!1;var g=$.cookie("MYITINERARYNAME"),h=$.cookie("NUMDAYS"),k=1;h&&""!=
h&&(k=h);var q=$.cookie("EZDATE1"),h=0;if(q&&""!=q){var u=new codefecha(q),u=new Date(u.anio,u.mes-1,u.dia);u.getMonth();u.getDate();u.getFullYear();$.datepicker.formatDate("m/d/y",new Date($.cookie("EZDATE1")));h=1}q="";0!=h&&(u=new Date(u),u.setDate(u.getDate()+(a-1)),u.getMonth(),u.getDate(),u.getFullYear(),q=" - "+$.datepicker.formatDate("m/d/y",new Date(u)));$("#myztitledayname").remove();$("#myztitleday").remove();$("#titlehr").remove();null!=g&&$("#pageheadercityname").append("<span id='myztitledayname' class='myztitleday'>"+
g+"</span><hr id='titlehr' style='margin: -5px; visibility: hidden;'/>");faqpage="mapcity";$("#pageheadercityname").append("<span id='myztitleday' class='myztitleday'>Day "+a+" of "+k+q+"</span>");$("#pageheadercityname").append($("#buttonsforplanday"));k=$("#show_box2");k.css("position","absolute");k.css("z-index","2");k.css("right","0");k.css("left","0");k.css("border","0px");$("#flecha1").show();$("#flecha2").show();$(".button-show-MEP").html("List");$("#body_map").css("height","95%").css("margin-bottom",
"-25px");$("#body_map").removeClass("body_map_list");$("#body_map_canvas .gm-style").addClass("gmstylefull");$("#footer").hide();$("#titlehead").hide();$(".hider").hide();$(".hider2").hide();$(".Step").hide();$(".MI").hide();$(".4").show();$(".MEP").show();$(".div_plans_route").empty();$(".div_plans_noroute").empty();$(".div_plans_route").hide();$(".div_plans_noroute").hide();$(".div_plans_route_label,.bannertype21").hide();$("#Gen_footer,#bannertype2-planday").show();$(".buttonsforplanday").hide();
$("#myitin-panel").panel("close");$(".wrap").css("height","100%");$(".button-show-MEP").css("background-color","rgb(211, 211, 211)");google.maps.event.trigger(mapcitypopup.mapconfig.google.map,"resize");$(".returnfromroute").show();varselect="";varoptimizeacive=varshowadvopt=!1;k=$.cookie("EZFULLORDER_day"+a);q=$.cookie("EZMAPCITYPLACES_day"+a);k&&""!=k&&(q=k);idsnoroute=[];varnumenruta=0;(g=$.cookie("EZMAPCITYPLACES2_day"+a))&&""!=g&&(idsnoroute=g.split(","));g=$.cookie("EZTRANSPORT_day"+a);u=$.cookie("EZTRANSPORT_S_day"+
a);h=$.cookie("EZSERVICES_day"+a);b=b||mapcitypopup.mapconfig;$.each(b.markers,function(a,g){b.markers[a].setVisible(!1)});$.each(personalmrks,function(a,b){personalmrks[a].setVisible(!1)});$.each(personalroutesmarks,function(a,b){personalroutesmarks[a].setVisible(!1);personalroutespolylines[a].setVisible(!1)});$.each(ideasroutesmarks,function(a,b){ideasroutesmarks[a].setVisible(!1)});"undefined"!=typeof arraydeals&&$.each(arraydeals,function(a,b){arraydeals[a].setVisible(!1)});"undefined"!=typeof arrayideasr&&
$.each(arrayideasr,function(a,b){1==arrayideasr[a].added&&arrayideasr[a].setVisible(!1)});$.each(arraydetransports,function(a,b){arraydetransports[a].setVisible(!1)});$.each(otherarraytrans,function(a,b){otherarraytrans[a].setVisible(!1)});$.each(arraydeservices,function(a,b){arraydeservices[a].setVisible(!1)});$.each(otherarrayserv,function(a,b){otherarrayserv[a].setVisible(!1)});hayruta=!1;estediarutamarkers=[];estediawaypoints=[];Plan_Bounds=new google.maps.LatLngBounds;if(q&&""!=q){hayruta=!0;
var p=q.split(",");for(c=0;c<p.length;c++)if(0>p[c].indexOf("t")&&0>p[c].indexOf("s")){if(40<p[c]){for(mm=0;mm<b.markers.length;mm++){var w=!1;if(b.markers[mm].mk_id==p[c]){w=!0;b.markers[mm].setVisible(!0);b.markers[mm].mk_type=1;A=b.markers[mm];Plan_Bounds.extend(A.getPosition());var q=A.title.length,q=30<q?A.title.substr(0,30)+"...":A.title,v=0;for(no=0;no<idsnoroute.length;no++)parseInt(p[c])==parseInt(idsnoroute[no])&&(v=1);A.genid=p[c];if(0==v){varnumenruta+=1;A.listpos=c;A.setIcon("ezmapas/maps_pics/basic/"+
varnumenruta+".png");estediarutamarkers.push(A);thiscoors=A.getPosition().toString().replace("(","").replace(")","").split(",");var v=parseFloat(thiscoors[0]),C=parseFloat(thiscoors[1]);estediawaypoints.push({location:new google.maps.LatLng(parseFloat(v),parseFloat(C)),stopover:!0});varselect=varselect+'<option value="'+p[c]+'">'+q+"</option>";$(".div_plans_route").append('<div class="container" id="div_route_'+a+"_"+p[c]+'"><table id="tablelist'+c+'" class="table table_'+c+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+
a+","+p[c]+","+c+');"></td><td class="t3" onclick="window.top.showinfoplace(\''+A.mk_category.idunico+"','"+A.mk_id+"', 'myezplan');\"><label class=\"cursor label_check\">"+q+'<br><div id="'+A.mk_category.idunico+'newtype">'+A.areacity__+'</div><td class="table_img" onclick="window.top.showinfoplace(\''+A.mk_category.idunico+"','"+A.mk_id+"', 'myezplan');\"> <div id=\""+A.mk_category.idunico+'newimg">'+A.img__+'</div></td></label></td></tr></table><div id="div_subroute_'+p[c]+'"></div></div>')}else A.setIcon("ezmapas/maps_pics/basic/area.png"),
$(".div_plans_noroute").append('<div class="container"  id="div_route_'+a+"_"+p[c]+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+a+","+p[c]+","+c+');"></td><td class="t3" onclick="window.top.showinfoplace(\''+A.mk_category.idunico+"','"+A.mk_id+"', 'myezplan');\"><label class=\"cursor label_check\">"+q+'<br><div id="'+A.mk_category.idunico+
'newtype">'+A.areacity__+'</div><td class="table_img" onclick="window.top.showinfoplace(\''+A.mk_category.idunico+"','"+A.mk_id+"', 'myezplan');\"> <div id=\""+A.mk_category.idunico+'newimg">'+A.img__+'</div></td></label></td></tr></table><div id="div_subroute_'+p[c]+'"></div></div>')}}if(!w)for(xx=0;xx<othercityarray.length;xx++)if(othercityarray[xx].mk_id==p[c]){othercityarray[xx].setMap(mapcitypopup.mapconfig.google.map);othercityarray[xx].mk_type=1;A=othercityarray[xx];Plan_Bounds.extend(A.getPosition());
q=A.title.length;q=30<q?A.title.substr(0,30)+"...":A.title;for(no=v=0;no<idsnoroute.length;no++)parseInt(p[c])==parseInt(idsnoroute[no])&&(v=1);A.genid=p[c];0==v?(varnumenruta+=1,A.setIcon("ezmapas/maps_pics/basic/"+varnumenruta+".png"),A.listpos=c,thiscoors=A.getPosition().toString().replace("(","").replace(")","").split(","),v=parseFloat(thiscoors[0]),C=parseFloat(thiscoors[1]),estediawaypoints.push({location:new google.maps.LatLng(parseFloat(v),parseFloat(C)),stopover:!0}),estediarutamarkers.push(A),
varselect=varselect+'<option value="'+p[c]+'">'+q+"</option>",$(".div_plans_route").append('<div class="container"  id="div_route_'+a+"_"+p[c]+'"><table id="tablelist'+c+'" class="table table_'+c+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+a+","+p[c]+');"></td><td class="t3" onclick="window.top.showinfoplace(\''+A.mk_category.idunico+"','"+A.mk_id+"', 'myezplan');\"><label class=\"cursor label_check\">"+
q+'<br><div id="'+A.mk_category.idunico+'newtype">'+A.areacity__+'</div><td class="table_img" onclick="window.top.showinfoplace(\''+A.mk_category.idunico+"','"+A.mk_id+"', 'myezplan');\"> <div id=\""+A.mk_category.idunico+'newimg">'+A.img__+'</div></td></label></td></tr></table><div id="div_subroute_'+p[c]+'"></div></div>')):(A.setIcon("ezmapas/maps_pics/basic/area.png"),$(".div_plans_noroute").append('<div class="container"  id="div_route_'+a+"_"+p[c]+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+
a+","+p[c]+');"></td><td class="t3" onclick="window.top.showinfoplace(\''+A.mk_category.idunico+"','"+A.mk_id+"', 'myezplan');\"><label class=\"cursor label_check\">"+q+'<br><div id="'+A.mk_category.idunico+'newtype">'+A.areacity__+'</div><td class="table_img" onclick="window.top.showinfoplace(\''+A.mk_category.idunico+"','"+A.mk_id+"', 'myezplan');\"> <div id=\""+A.mk_category.idunico+'newimg">'+A.img__+'</div></td></label></td></tr></table><div id="div_subroute_'+p[c]+'"></div></div>'))}}if(11>
p[c]){var q=$.cookie("EZPERSONAL"),q=q.split("!"),A=q[p[c]-1].split("*"),q=A[0],C=A[1],A=personalmrks[p[c]-1];Plan_Bounds.extend(A.getPosition());A.mk_type=2;A.setVisible(!0);A.setOptions({draggable:!1});for(no=v=0;no<idsnoroute.length;no++)parseInt(p[c])==parseInt(idsnoroute[no])&&(v=1);A.genid=p[c];0==v?(varnumenruta+=1,A.setIcon("ezmapas/maps_pics/basic/"+varnumenruta+".png"),A.listpos=c,thiscoors=C.replace("(","").replace(")","").split(","),v=parseFloat(thiscoors[0]),C=parseFloat(thiscoors[1]),
estediawaypoints.push({location:new google.maps.LatLng(parseFloat(v),parseFloat(C)),stopover:!0}),estediarutamarkers.push(A),varselect=varselect+'<option value="'+p[c]+'">'+q+"</option>",C='<div id="moremypl'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',v="#moremypl"+p[c],$(".div_plans_route").append('<div class="container"  id="div_route_'+a+"_"+
p[c]+'"><table id="tablelist'+c+'" class="table table_'+c+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+a+","+p[c]+","+c+');"></td><td class="t3" ><label class="cursor label_check">'+q+'<td class="table_img"> <div><img src="https://lh3.googleusercontent.com/-UZliDkbBQtA/VMk6xwLihKI/AAAAAAANhC4/02ZcZPiK-LE/s136/MY%2520PLACE.png" onclick="$(\''+v+"').slideToggle(0);\"></div></td></label></td></tr></table>"+
C+"</div>")):(A.setIcon("ezmapas/maps_pics/basic/area.png"),C='<div id="moremypl'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',v="#moremypl"+p[c],$(".div_plans_noroute").append('<div class="container"  id="div_route_'+a+"_"+p[c]+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+
a+","+p[c]+","+c+');"></td><td class="t3" ><label class="cursor label_check">'+q+'<td class="table_img"> <div><img src="https://lh3.googleusercontent.com/-UZliDkbBQtA/VMk6xwLihKI/AAAAAAANhC4/02ZcZPiK-LE/s136/MY%2520PLACE.png" onclick="$(\''+v+"').slideToggle(0);\"></div></td></label></td></tr></table>"+C+"</div>"))}if(10<p[c]&&21>p[c]){var G=p[c]-10;if(1==G)var B="#FF00FF";2==G&&(B="#00FFCC");3==G&&(B="#6600CC");4==G&&(B="#FF0033");5==G&&(B="#99CC33");6==G&&(B="#009999");7==G&&(B="#FF6600");8==G&&
(B="#666600");9==G&&(B="#989898");10==G&&(B="#FF0000");q=$.cookie("EZPR_"+G);q=q.split("!");q=q[0];for(pm=0;pm<personalroutesmarks.length;pm++)personalroutesmarks[pm].id==p[c]-10&&(personalroutesmarks[pm].setVisible(!0),personalroutespolylines[pm].setVisible(!0),A=personalroutesmarks[pm]);Plan_Bounds.extend(A.getPosition());A.mk_type=3;for(no=v=0;no<idsnoroute.length;no++)parseInt(p[c])==parseInt(idsnoroute[no])&&(v=1);A.genid=p[c];0==v?(varnumenruta+=1,A.setIcon("ezmapas/maps_pics/basic/"+varnumenruta+
".png"),A.listpos=c,thiscoors=A.getPosition().toString().replace("(","").replace(")","").split(","),v=parseFloat(thiscoors[0]),C=parseFloat(thiscoors[1]),estediawaypoints.push({location:new google.maps.LatLng(parseFloat(v),parseFloat(C)),stopover:!0}),estediarutamarkers.push(A),varselect=varselect+'<option value="'+p[c]+'">'+q+"</option>",C='<div id="moremyro'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',
v="#moremyro"+p[c],$(".div_plans_route").append('<div class="container"  id="div_route_'+a+"_"+p[c]+'"><table id="tablelist'+c+'" class="table table_'+c+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+a+","+p[c]+","+c+');"></td><td class="t3" ><label class="cursor label_check"><span style="color:'+B+';">'+q+'</span><td class="table_img"><div><img src="https://lh5.googleusercontent.com/-z3w2lJQ_1fI/VMk6x5OQwmI/AAAAAAANhC8/ZxxaZOhYVxI/s136/MY%2520f" onclick="$(\''+
v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_'+p[c]+'"></div>'+C+"</div>")):(A.setIcon("ezmapas/maps_pics/basic/area.png"),C='<div id="moremyro'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',v="#moremyro"+p[c],$(".div_plans_noroute").append('<div class="container"  id="div_route_'+a+"_"+p[c]+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+
a+","+p[c]+","+c+');"></td><td class="t3" ><label class="cursor label_check"><span style="color:'+B+';">'+q+'</span><td class="table_img"><div><img src="https://lh5.googleusercontent.com/-z3w2lJQ_1fI/VMk6x5OQwmI/AAAAAAANhC8/ZxxaZOhYVxI/s136/MY%2520ROUTE.png" onclick="$(\''+v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_'+p[c]+'"></div>'+C+"</div>"))}if(20<p[c]&&31>p[c]){G=p[c]-21;ideasroutesmarks[G].setVisible(!0);$.each(arrayideasr,function(a,b){arrayideasr[a].added_index==
G&&1==arrayideasr[a].added&&arrayideasr[a].setVisible(!0)});var E=$.cookie("EZIDEAS_C").split("!")[G].split("*"),q=E[0],C="#"+E[3],A=ideasroutesmarks[G];Plan_Bounds.extend(A.getPosition());A.mk_type=4;A.id=p[c];for(no=v=0;no<idsnoroute.length;no++)parseInt(p[c])==parseInt(idsnoroute[no])&&(v=1);A.genid=p[c];0==v?(varnumenruta+=1,A.setIcon("ezmapas/maps_pics/basic/"+varnumenruta+".png"),A.listpos=c,estediawaypoints.push({location:new google.maps.LatLng(parseFloat(E[1]),parseFloat(E[2])),stopover:!0}),
estediarutamarkers.push(A),varselect=varselect+'<option value="'+p[c]+'">'+q+"</option>",E='<div id="moremyide'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',v="#moremyide"+p[c],$(".div_plans_route").append('<div class="container"  id="div_route_'+a+"_"+p[c]+'"><table id="tablelist'+c+'" class="table table_'+c+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+
a+","+p[c]+","+c+');"></td><td class="t3" ><label class="cursor label_check"><span style="color:'+C+';">'+q+'</span><td class="table_img"><div><img src="https://lh4.googleusercontent.com/-4Cd3GYz2ebM/VMk6Bczpl9I/AAAAAAANhCk/9Clp7mY95fQ/s136/IDEAS%25202.png" onclick="$(\''+v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_'+p[c]+'"></div>'+E+"</div>")):(E='<div id="moremyide'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',
v="#moremyide"+p[c],A.setIcon("ezmapas/maps_pics/basic/area.png"),$(".div_plans_noroute").append('<div class="container"  id="div_route_'+a+"_"+p[c]+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+a+","+p[c]+","+c+');"></td><td class="t3" ><label class="cursor label_check"><span style="color:'+C+';">'+q+'</span><td class="table_img"><div><img src="https://lh4.googleusercontent.com/-4Cd3GYz2ebM/VMk6Bczpl9I/AAAAAAANhCk/9Clp7mY95fQ/s136/IDEAS%25202.png" onclick="$(\''+
v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_'+p[c]+'"></div>'+E+"</div>"))}}else{if(-1<p[c].indexOf("t")){var F=p[c].replace("t",""),I=[];u&&""!=u&&(I=u.split(","));var K=[];traesdeestaciudad=!1;$.each(arraydetransports,function(b,g){if(parseInt(arraydetransports[b].rid)===parseInt(F)){traesdeestaciudad=!0;var h=0;for(no=0;no<idsnoroute.length;no++)p[c]==idsnoroute[no]&&(h=1);if(1==parseInt(arraydetransports[b].type))for(st=0;st<arraydetransports[b].arraystops.length;st++)for(cs=
0;cs<I.length;cs++)Plan_Bounds.extend(arraydetransports[b].arraystops[st].getPosition()),parseInt(I[cs])==parseInt(arraydetransports[b].arraystops[st].id_)&&K.push(arraydetransports[b].arraystops[st].nombre);else Plan_Bounds.extend(arraydetransports[b].getPosition());var k=K.join(", ");arraydetransports[b].mk_type=10;40<k.length&&(k=k.substring(0,36)+"...");arraydetransports[b].genid=p[c];if(0==h){estediarutamarkers.push(arraydetransports[b]);arraydetransports[b].setVisible(!0);arraydetransports[b].listpos=
c;var h='<div id="moremytra'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',q="#moremytra"+p[c];$(".div_plans_route").append('<div class="container" id="div_route_'+a+"_t"+F+'"><table id="tablelist'+c+'" class="table table_'+c+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+
a+",'t"+F+"',"+c+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span_t_'+x+'" style="color:#'+arraydetransports[b].color+';">'+arraydetransports[b].nombre+"</span><br><h4>"+k+'</h4><td class="table_img"><div><img src="https://lh6.googleusercontent.com/-5enOtqMjn8Y/VMk6B6MVGJI/AAAAAAANhCo/XV-BGDFNPQU/s136/TRANSPORT.png" onclick="$(\''+q+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_t_'+F+'"></div>'+h+"</div>")}else h='<div id="moremytra'+p[c]+
'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',q="#moremytra"+p[c],$(".div_plans_noroute").append('<div class="container" id="div_route_'+a+"_t"+F+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+
a+",'t"+F+"',"+c+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span_t_'+x+'" style="color:#'+arraydetransports[b].color+';">'+arraydetransports[b].nombre+"</span><br><h4>"+k+'</h4><td class="table_img"><div><img src="https://lh6.googleusercontent.com/-5enOtqMjn8Y/VMk6B6MVGJI/AAAAAAANhCo/XV-BGDFNPQU/s136/TRANSPORT.png" onclick="$(\''+q+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_t_'+F+'"></div>'+h+"</div>")}});if(!traesdeestaciudad)for(index=
0;index<otherarraytrans.length;index++)if(parseInt(otherarraytrans[index].rid)===parseInt(F)){for(no=v=0;no<idsnoroute.length;no++)p[c]==idsnoroute[no]&&(v=1);if(1==parseInt(otherarraytrans[index].type))for(st=0;st<otherarraytrans[index].arraystops.length;st++)for(cs=0;cs<I.length;cs++)Plan_Bounds.extend(otherarraytrans[index].arraystops[st].getPosition()),parseInt(I[cs])==parseInt(otherarraytrans[index].arraystops[st].id_)&&K.push(otherarraytrans[index].arraystops[st].nombre);else Plan_Bounds.extend(otherarraytrans[index].getPosition());
q=K.join(", ");otherarraytrans[index].mk_type=10;40<q.length&&(q=q.substring(0,36)+"...");otherarraytrans[index].genid=p[c];0==v?(estediarutamarkers.push(otherarraytrans[index]),otherarraytrans[index].setVisible(!0),otherarraytrans[index].listpos=c,C='<div id="moremytra'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',v="#moremytra"+p[c],$(".div_plans_route").append('<div class="container" id="div_route_'+
a+"_t"+F+'"><table id="tablelist'+c+'" class="table table_'+c+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+a+",'t"+F+"',"+c+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span_t_'+x+'" style="color:#'+otherarraytrans[index].color+';">'+otherarraytrans[index].nombre+"</span><br><h4>"+q+'</h4><td class="table_img"><div><img src="https://lh6.googleusercontent.com/-5enOtqMjn8Y/VMk6B6MVGJI/AAAAAAANhCo/XV-BGDFNPQU/s136/TRANSPORT.png" onclick="$(\''+
v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_t_'+F+'"></div>'+C+"</div>")):(C='<div id="moremytra'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',v="#moremytra"+p[c],$(".div_plans_noroute").append('<div class="container" id="div_route_'+a+"_t"+F+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+
a+",'t"+F+"',"+c+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span_t_'+x+'" style="color:#'+otherarraytrans[index].color+';">'+otherarraytrans[index].nombre+"</span><br><h4>"+q+'</h4><td class="table_img"><div><img src="https://lh6.googleusercontent.com/-5enOtqMjn8Y/VMk6B6MVGJI/AAAAAAANhCo/XV-BGDFNPQU/s136/TRANSPORT.png" onclick="$(\''+v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_t_'+F+'"></div>'+C+"</div>"))}}if(-1<p[c].indexOf("s")&&
(F=p[c].replace("s",""),servesdeestaciudad=!1,$.each(arraydeservices,function(b,g){if(parseInt(arraydeservices[b].sid)==parseInt(F)){servesdeestaciudad=!0;var h=0;for(no=0;no<idsnoroute.length;no++)p[c]==idsnoroute[no]&&(h=1);arraydeservices[b].genid=p[c];if(0==h){arraydeservices[b].setVisible(!0);arraydeservices[b].mk_type=11;arraydeservices[b].listpos=c;Plan_Bounds.extend(arraydeservices[b].getPosition());estediarutamarkers.push(arraydeservices[b]);var h='<div id="moremyser'+F+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',
k="#moremyser"+F;$(".div_plans_route").append('<div class="container"  id="div_route_'+a+"_s"+F+'"><table id="tablelist'+c+'" class="table table_'+c+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+a+",'s"+F+"',"+c+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span2_'+x+"_t_"+c+'">'+arraydeservices[b].catname+" - "+arraydeservices[b].nombre+
'</span><td class="table_img"><div><img src="https://lh5.googleusercontent.com/-Lbqsh6kBgUA/VEg3r6f9CmI/AAAAAAANg4c/R7wFJ1lLlx8/s136/5%2520service.png" onclick="$(\''+k+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_s_'+F+'"></div>'+h+"</div>")}else h='<div id="moremyser'+F+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',
k="#moremyser"+F,$(".div_plans_noroute").append('<div class="container"  id="div_route_'+a+"_s"+F+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+a+",'s"+F+"',"+c+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span2_'+x+"_t_"+c+'">'+arraydeservices[b].catname+" - "+arraydeservices[b].nombre+'</span><td class="table_img"><div><img src="https://lh5.googleusercontent.com/-Lbqsh6kBgUA/VEg3r6f9CmI/AAAAAAANg4c/R7wFJ1lLlx8/s136/5%2520service.png" onclick="$(\''+
k+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_s_'+F+'"></div>'+h+"</div>")}}),!servesdeestaciudad))for(console.log("serv other"),index=0;index<otherarrayserv.length;index++)if(parseInt(otherarrayserv[index].sid)==parseInt(F)){for(no=v=0;no<idsnoroute.length;no++)p[c]==idsnoroute[no]&&(v=1);otherarrayserv[index].genid=p[c];0==v?(otherarrayserv[index].setVisible(!0),otherarrayserv[index].mk_type=11,otherarrayserv[index].listpos=c,Plan_Bounds.extend(otherarrayserv[index].getPosition()),
estediarutamarkers.push(otherarrayserv[index]),q='<div id="moremyser'+F+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',v="#moremyser"+F,$(".div_plans_route").append('<div class="container"  id="div_route_'+a+"_s"+F+'"><table id="tablelist'+c+'" class="table table_'+c+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+
a+",'s"+F+"',"+c+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span2_'+x+"_t_"+c+'">'+otherarrayserv[index].catname+" - "+otherarrayserv[index].nombre+'</span><td class="table_img"><div><img src="https://lh5.googleusercontent.com/-Lbqsh6kBgUA/VEg3r6f9CmI/AAAAAAANg4c/R7wFJ1lLlx8/s136/5%2520service.png" onclick="$(\''+v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_s_'+F+'"></div>'+q+"</div>")):(q='<div id="moremyser'+F+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',
v="#moremyser"+F,$(".div_plans_noroute").append('<div class="container"  id="div_route_'+a+"_s"+F+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+a+",'s"+F+"',"+c+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span2_'+x+"_t_"+c+'">'+otherarrayserv[index].catname+" - "+otherarrayserv[index].nombre+'</span><td class="table_img"><div><img src="https://lh5.googleusercontent.com/-Lbqsh6kBgUA/VEg3r6f9CmI/AAAAAAANg4c/R7wFJ1lLlx8/s136/5%2520service.png" onclick="$(\''+
v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_s_'+F+'"></div>'+q+"</div>"))}}if(1<estediawaypoints.length){directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:!0,suppressInfoWindows:!0});directionsDisplay.setMap(mapcitypopup.mapconfig.google.map);if(2==estediawaypoints.length){start=estediawaypoints[0].location;end=estediawaypoints[estediawaypoints.length-1].location;var J={origin:start,destination:end,travelMode:google.maps.TravelMode.WALKING};
"WALKING"==gotm&&(J={origin:start,destination:end,travelMode:google.maps.TravelMode.WALKING});"BICYCLING"==gotm&&(J={origin:start,destination:end,travelMode:google.maps.TravelMode.BICYCLING});"DRIVING"==gotm&&(J={origin:start,destination:end,travelMode:google.maps.TravelMode.DRIVING})}2<estediawaypoints.length&&(start=estediawaypoints[0].location,end=estediawaypoints[estediawaypoints.length-1].location,estediawaypoints.splice(0,1),estediawaypoints.splice(estediawaypoints.length-1,1),J={origin:start,
destination:end,waypoints:estediawaypoints,optimizeWaypoints:!1,travelMode:google.maps.TravelMode.WALKING},"WALKING"==gotm&&(J={origin:start,destination:end,waypoints:estediawaypoints,optimizeWaypoints:!1,travelMode:google.maps.TravelMode.WALKING}),"BICYCLING"==gotm&&(J={origin:start,destination:end,waypoints:estediawaypoints,optimizeWaypoints:!1,travelMode:google.maps.TravelMode.BICYCLING}),"DRIVING"==gotm&&(J={origin:start,destination:end,waypoints:estediawaypoints,optimizeWaypoints:!1,travelMode:google.maps.TravelMode.DRIVING}));
directionsService.route(J,function(a,b){b==google.maps.DirectionsStatus.OK&&directionsDisplay.setDirections(a)})}}if(!k||""==k){var D=estediarutamarkers.length||0,D=D-1;if(g&&""!=g){var H=g.split(","),I=[];u&&""!=u&&(I=u.split(","));for(cc=0;cc<H.length;cc++)if(traesdeestaciudad=!1,D+=1,K=[],$.each(arraydetransports,function(b,g){if(parseInt(arraydetransports[b].rid)===parseInt(H[cc])){traesdeestaciudad=!0;var h=0;for(no=0;no<idsnoroute.length;no++)"t"+H[cc]==idsnoroute[no]&&(h=1);if(1==parseInt(arraydetransports[b].type))for(st=
0;st<arraydetransports[b].arraystops.length;st++)for(cs=0;cs<I.length;cs++)Plan_Bounds.extend(arraydetransports[b].arraystops[st].getPosition()),parseInt(I[cs])==parseInt(arraydetransports[b].arraystops[st].id_)&&K.push(arraydetransports[b].arraystops[st].nombre);else Plan_Bounds.extend(arraydetransports[b].getPosition());var k=K.join(", ");40<k.length&&(k=k.substring(0,36)+"...");arraydetransports[b].mk_type=10;arraydetransports[b].genid=p[c];if(0==h){estediarutamarkers.push(arraydetransports[b]);
arraydetransports[b].setVisible(!0);arraydetransports[b].listpos=D;var h='<div id="moremytra'+H[cc]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',q="#moremytra"+H[cc];$(".div_plans_route").append('<div class="container"  id="div_route_'+a+"_t"+H[cc]+'"><table id="tablelist'+D+'" class="table table_'+D+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+
a+",'t"+H[cc]+"',"+cc+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span_t_'+x+'" style="color:#'+arraydetransports[b].color+';">'+arraydetransports[b].nombre+"</span><br><h4>"+k+'</h4><td class="table_img"><div><img src="https://lh6.googleusercontent.com/-5enOtqMjn8Y/VMk6B6MVGJI/AAAAAAANhCo/XV-BGDFNPQU/s136/TRANSPORT.png" onclick="$(\''+q+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_t_'+H[cc]+'"></div>'+h+"</div>")}else h='<div id="moremytra'+
H[cc]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',q="#moremytra"+H[cc],$(".div_plans_noroute").append('<div class="container"  id="div_route_'+a+"_t"+H[cc]+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+
a+",'t"+H[cc]+"',"+cc+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span_t_'+x+'" style="color:#'+arraydetransports[b].color+';">'+arraydetransports[b].nombre+"</span><br><h4>"+k+'</h4><td class="table_img"><div><img src="https://lh6.googleusercontent.com/-5enOtqMjn8Y/VMk6B6MVGJI/AAAAAAANhCo/XV-BGDFNPQU/s136/TRANSPORT.png" onclick="$(\''+q+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_t_'+H[cc]+'"></div>'+h+"</div>")}}),!traesdeestaciudad)for(index=
0;index<otherarraytrans.length;index++)if(parseInt(otherarraytrans[index].rid)===parseInt(H[cc])){for(no=v=0;no<idsnoroute.length;no++)"t"+H[cc]==idsnoroute[no]&&(v=1);if(1==parseInt(otherarraytrans[index].type))for(st=0;st<otherarraytrans[index].arraystops.length;st++)for(cs=0;cs<I.length;cs++)Plan_Bounds.extend(otherarraytrans[index].arraystops[st].getPosition()),parseInt(I[cs])==parseInt(otherarraytrans[index].arraystops[st].id_)&&K.push(otherarraytrans[index].arraystops[st].nombre);else Plan_Bounds.extend(otherarraytrans[index].getPosition());
q=K.join(", ");40<q.length&&(q=q.substring(0,36)+"...");otherarraytrans[index].mk_type=10;otherarraytrans[index].genid=p[c];0==v?(estediarutamarkers.push(otherarraytrans[index]),otherarraytrans[index].setVisible(!0),otherarraytrans[index].listpos=D,C='<div id="moremytra'+H[cc]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',v="#moremytra"+H[cc],$(".div_plans_route").append('<div class="container"  id="div_route_'+
a+"_t"+H[cc]+'"><table id="tablelist'+D+'" class="table table_'+D+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+a+",'t"+H[cc]+"',"+cc+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span_t_'+x+'" style="color:#'+otherarraytrans[index].color+';">'+otherarraytrans[index].nombre+"</span><br><h4>"+q+'</h4><td class="table_img"><div><img src="https://lh6.googleusercontent.com/-5enOtqMjn8Y/VMk6B6MVGJI/AAAAAAANhCo/XV-BGDFNPQU/s136/TRANSPORT.png" onclick="$(\''+
v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_t_'+H[cc]+'"></div>'+C+"</div>")):(C='<div id="moremytra'+H[cc]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',v="#moremytra"+H[cc],$(".div_plans_noroute").append('<div class="container"  id="div_route_'+a+"_t"+H[cc]+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+
a+",'t"+H[cc]+"',"+cc+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span_t_'+x+'" style="color:#'+otherarraytrans[index].color+';">'+otherarraytrans[index].nombre+"</span><br><h4>"+q+'</h4><td class="table_img"><div><img src="https://lh6.googleusercontent.com/-5enOtqMjn8Y/VMk6B6MVGJI/AAAAAAANhCo/XV-BGDFNPQU/s136/TRANSPORT.png" onclick="$(\''+v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_t_'+H[cc]+'"></div>'+C+"</div>"))}}if(h&&""!=h)for(p=
h.split(","),c=0;c<p.length;c++)if(servesdeestaciudad=!1,D+=1,$.each(arraydeservices,function(b,g){if(parseInt(arraydeservices[b].sid)==parseInt(p[c])){servesdeestaciudad=!0;var h=0;for(no=0;no<idsnoroute.length;no++)"s"+p[c]==idsnoroute[no]&&(h=1);arraydeservices[b].genid=p[c];if(0==h){arraydeservices[b].setVisible(!0);arraydeservices[b].mk_type=11;arraydeservices[b].listpos=D;Plan_Bounds.extend(arraydeservices[b].getPosition());estediarutamarkers.push(arraydeservices[b]);var h='<div id="moremyser'+
p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',k="#moremyser"+p[c];$(".div_plans_route").append('<div class="container" id="div_route_'+a+"_s"+p[c]+'"><table id="tablelist'+D+'"  class="table table_'+D+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+
a+",'s"+p[c]+"',"+D+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span2_'+x+"_t_"+D+'">'+arraydeservices[b].catname+" - "+arraydeservices[b].nombre+'</span><td class="table_img"><div><img src="https://lh5.googleusercontent.com/-Lbqsh6kBgUA/VEg3r6f9CmI/AAAAAAANg4c/R7wFJ1lLlx8/s136/5%2520service.png" onclick="$(\''+k+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_s_'+p[c]+'"></div>'+h+"</div>")}else h='<div id="moremyser'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',
k="#moremyser"+p[c],$(".div_plans_noroute").append('<div class="container" id="div_route_'+a+"_s"+p[c]+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+a+",'s"+p[c]+"',"+D+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span2_'+x+"_t_"+D+'">'+arraydeservices[b].catname+" - "+arraydeservices[b].nombre+'</span><td class="table_img"><div><img src="https://lh5.googleusercontent.com/-Lbqsh6kBgUA/VEg3r6f9CmI/AAAAAAANg4c/R7wFJ1lLlx8/s136/5%2520service.png" onclick="$(\''+
k+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_s_'+p[c]+'"></div>'+h+"</div>")}}),!servesdeestaciudad)for(console.log("serv other"),index=0;index<otherarrayserv.length;index++)if(parseInt(otherarrayserv[index].sid)==parseInt(p[c])){for(no=v=0;no<idsnoroute.length;no++)"s"+p[c]==idsnoroute[no]&&(v=1);otherarrayserv[index].genid=p[c];0==v?(otherarrayserv[index].setVisible(!0),otherarrayserv[index].mk_type=11,otherarrayserv[index].listpos=D,Plan_Bounds.extend(otherarrayserv[index].getPosition()),
estediarutamarkers.push(otherarrayserv[index]),q='<div id="moremyser'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',v="#moremyser"+p[c],$(".div_plans_route").append('<div class="container" id="div_route_'+a+"_s"+p[c]+'"><table id="tablelist'+D+'"  class="table table_'+D+'"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-0SnpBef6i6I/VMlfa9qKEQI/AAAAAAANhEM/6nLOyRI7udI/s45/Check%2520active.png" onclick="unadplacefromroute('+
a+",'s"+p[c]+"',"+D+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span2_'+x+"_t_"+D+'">'+otherarrayserv[index].catname+" - "+otherarrayserv[index].nombre+'</span><td class="table_img"><div><img src="https://lh5.googleusercontent.com/-Lbqsh6kBgUA/VEg3r6f9CmI/AAAAAAANg4c/R7wFJ1lLlx8/s136/5%2520service.png" onclick="$(\''+v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_s_'+p[c]+'"></div>'+q+"</div>")):(q='<div id="moremyser'+p[c]+'" style="display:none;"><table class="table"><tr><td class="t4"></td><td class="t3"><span class="capitalize_red">No information available.</span></td><td class="table_img"></td></table></div>',
v="#moremyser"+p[c],$(".div_plans_noroute").append('<div class="container" id="div_route_'+a+"_s"+p[c]+'"><table class="table"><tr><td class="t4"><img style="width:25px;" src="https://lh3.googleusercontent.com/-lxmYejGOw0k/VMlfaxYOftI/AAAAAAANhEE/zDluXu8_qi0/s45/Check%2520inactive%25202.png" onclick="adplacefromroute('+a+",'s"+p[c]+"',"+D+');"></td><td class="t3" ><label class="cursor label_check"><span  id="span2_'+x+"_t_"+D+'">'+otherarrayserv[index].catname+" - "+otherarrayserv[index].nombre+'</span><td class="table_img"><div><img src="https://lh5.googleusercontent.com/-Lbqsh6kBgUA/VEg3r6f9CmI/AAAAAAANg4c/R7wFJ1lLlx8/s136/5%2520service.png" onclick="$(\''+
v+'\').slideToggle(0);"></div></td></label></td></tr></table><div id="div_subroute_s_'+p[c]+'"></div>'+q+"</div>"))}}1>=estediawaypoints.length?(mapcitypopup.mapconfig.google.map.fitBounds(Plan_Bounds),$("#advoptbtn").hide()):(w='<div id="advopt" class="advopt panel" style="" align="center" data-role="panel" data-position="right" data-display="overlay" data-theme="a"><div id="box-header" class="box-header"><a href="javascript:;" onclick="showadvopt();" title="" alt="Close Window alt" style="float:left;"><img style=" padding-right:10px;" height="35px" src="https://lh5.googleusercontent.com/-Cb5dhSGmMSA/U5I5STA1muI/AAAAAAANfGk/1rOXlx8756Q/s52/Untitled8.png"></a></div><div align="center" style="max-width:200px;"><h1 style="width:200px;"><span class="capitalize_red">+</span>Options</h1><span class="capitalize_red">3 Ways to do it</span></div><div align="center" class="box-gray-c"><span class="titleseszplan "><img src="https://lh3.googleusercontent.com/-wSITGniEFBc/VUKLRATdIwI/AAAAAAANhY0/f2YfXZ377ug/s57/a.png" style="vertical-align:middle;height:50px;"><span class="">W</span>here&nbsp;</span><span style="font-size: 0.9em;font-weight: bold;"></span><br/>',
w=w+'<span>To Start</span><br/><select id="sel_sp" class="select_m">'+varselect+"</select><br/>",w=w+'<span>To End</span><br/><select id="sel_ep" class="select_m">'+varselect+"</select></div>",w+='<div align="center" class="box-gray-c"><span class="titleseszplan"><img src="https://lh3.googleusercontent.com/-_mg1sGNr9bw/VUKLRBtx1rI/AAAAAAANhYw/bP2XiUKQQLU/s57/b.png" style="vertical-align:middle;height:50px;"><span class="">H</span>ow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br/><span style="font-size: 0.9em;">Will you get there?</span><br/>',
w+='<select name="gotm" id="gotm" class="select_m"><option value="WALKING">Walking</option><option value="BICYCLING">Bicycling</option><option value="DRIVING">By Car</option></select></div>',w+='<div align="center" class="box-gray-c"><img src="https://lh3.googleusercontent.com/-BxJYR7EmgGM/VUKLRVBaIwI/AAAAAAANhY4/5FMRKE2ibjY/s57/c.png" style="vertical-align:middle;height:50px;"><div id="adv_opt_optimize" class="button-show button-square-2 button-round-blue2" onclick="advopt_optimize();">Optimize</div></div>',
w=w+'<div id="adv_opt_save" class="button-show button-square-2 button-round-blue2" onclick="saveadvopt('+a+');">Save</div></div>',$("#advoptbtn").show(),$("#advopt_cont").empty(),$("#advopt_cont").append(w),document.getElementById("sel_sp").value=p[0],document.getElementById("sel_ep").value=p[p.length-1],document.getElementById("gotm").value=gotm,document.getElementById("adv_opt_optimize").style.backgroundColor="rgb(211, 211, 211)");$(".div_plans_route").sortable({handle:".table_img img",update:function(a,
b){var g=$(this).sortable("toArray").toString().replace(/div_route_/g,"").split(","),h=[],k=[];for(x=0;x<g.length;x++){var p=g[x].split("_"),q=p[0];k.push(p[1]);0>p[1].indexOf("t")&&0>p[1].indexOf("s")&&h.push(p[1])}if((g=$.cookie("EZMAPCITYPLACES2_day"+q))&&""!=g)for(g=g.split(","),f=0;f<g.length;f++)h.push(g[f]),k.push(g[f]);$.cookie("EZROUTE_day_"+q,!0);$.cookie("EZMAPCITYPLACES_day"+q,h.join(","));$.cookie("EZFULLORDER_day"+q,k.join(","));"undefined"!=typeof directionsDisplay&&directionsDisplay.setMap(null);
"undefined"!=typeof initialLocation&&(mapcitypopup.mapconfig.google.map.setCenter(initialLocation),myLocationControlChange("disable"),clearTimeout(gtml_time1),clearTimeout(gtml_time2));varlistchanged=!0;MyLocationDiv.remove();resetdayarray(q)}});sessionStorage.cf_sid?(J=sessionStorage.cf_sid,w=$.cookie("MYITINERARYID"),k=$.cookie("NUMDAYS"),B=$.cookie("EZFULLORDER_day"+a),$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_EI.cfm?rnu=5131616516651",async:!0,data:{action:"dealsfornav",
itiid:w,numdays:k,userid:J,orders:B,day:a},success:function(a){$("#divitifuncs").html(a)}})):J="";myLocationControlAdd(mapcitypopup.mapconfig.google.map);$("#div_plans_route").is(":empty")&&(console.log("empty"),$("#div_plans_route").hide());$("#div_plans_noroute").is(":empty")&&$("#div_plans_noroute").hide()}
function returnfromrouteday(){faqpage="mapcitypopup";viewingday=0;$("#myztitledayname").remove();$("#myztitleday").remove();$("#titlehr").remove();$(".wrap").css("height","auto");$("#body_map").css("height","235px").css("margin-bottom","0px");$("#footer").show();$("#titlehead").show();$(".hider").show();$(".hider2").show();$(".Step").show();$(".MI,.bannertype21").show();$(".4,.3,.div_plans_route,#Gen_footer,.buttonsforplanday,.div_plans_noroute,.div_plans_route_label,.returnfromroute,.MEP,#bannertype2-planday").hide();
"undefined"!=typeof directionsDisplay&&directionsDisplay.setMap(null);"undefined"!=typeof initialLocation&&(mapcitypopup.mapconfig.google.map.setCenter(initialLocation),myLocationControlChange("disable"),clearTimeout(gtml_time1),clearTimeout(gtml_time2));MyLocationDiv.remove();mapcitypopup.showPlaces();$.each(personalmrks,function(a,b){personalmrks[a].setVisible(!0);personalmrks[a].setOptions({draggable:!0});personalmrks[a].setIcon("ezmapas/maps_pics/basic/userplace.png")});$.each(personalroutesmarks,
function(a,b){personalroutesmarks[a].setVisible(!0);personalroutesmarks[a].setIcon(personalroutesmarks[a].icono);personalroutespolylines[a].setVisible(!0)});$.each(othercityarray,function(a,b){othercityarray[a].setMap[null]});$.each(ideasroutesmarks,function(a,b){ideasroutesmarks[a].setVisible(!0);ideasroutesmarks[a].setIcon("https://www.myezplan.com/ezmapas/maps_pics/basic/area.png")});"undefined"!=typeof arrayideasr&&$.each(arrayideasr,function(a,b){1==arrayideasr[a].added&&arrayideasr[a].setVisible(!0)});
$.each(arraydetransports,function(a,b){1==arraydetransports[a].sel_t&&arraydetransports[a].setVisible(!0)});$.each(arraydeservices,function(a,b){1==arraydeservices[a].sel_t&&arraydeservices[a].setVisible(!0)});"undefined"!=typeof arraydeals&&$.each(arraydeals,function(a,b){arraydeals[a].setVisible(!1)});mapcitypopup.showSelPlaces2()}
function checkallareas(a){a=document.getElementById("plan_all").checked;var b=$.cookie("EZAREAS"),b=b&&""!=b?b.split("*"):[];a?$(".check_plan").each(function(){$(this).prop("checked",!0);$.cookie($(this).attr("id"),$(this).prop("checked"),{path:"/",expires:365})}):$(".check_plan").each(function(){$(this).prop("checked",!1);$.cookie($(this).attr("id"),!1,{path:"/",expires:-1});$.cookie($(this).attr("id"),null)});$.cookie("EZAREAS",b.join("*"),{path:"/",expires:365});polygonsel();setTimeout("mapcitypopup.showPlaces();",
20)}function codefecha(a){if(-1!=a.indexOf("/")){var b=a.indexOf("/",1),g=a.indexOf("/",b+1);this.mes=a.substring(0,b);this.dia=a.substring(b+1,g);this.anio=a.substring(g+1,a.length)}else this.anio=this.mes=this.dia=0}function checkplacesadd(){updateMapCityCookie();$(".check_place").attr("Checked",!1);for(y=0;y<global_MapCityCookie.length;y++)0!=($("#place_"+global_MapCityCookie[y]).val()||0)&&(document.getElementById("place_"+global_MapCityCookie[y]).checked=!0)}
function checktransportsadd(){for(tn=0;tn<arraydetransports.length;tn++){var a=arraydetransports[tn].rid,b=0;arraydetransports[tn].sel_t=0;if(1==arraydetransports[tn].type)for(arraydetransports[tn].setOptions({strokeColor:"#"+arraydetransports[tn].color}),x=0;x<arraydetransports[tn].subroutes.length;x++)arraydetransports[tn].subroutes[x].setOptions({strokeColor:"#"+arraydetransports[tn].color});else arraydetransports[tn].setIcon(arraydetransports[tn].icon_);var g=$.cookie("NUMDAYS"),h=1;g&&""!=g&&
(h=g);for(n=1;n<=h;n++)if((g=$.cookie("EZTRANSPORT_day"+n))&&""!=g)for(g=g.split(","),c1=0;c1<g.length;c1++)a==g[c1]&&(b=1);if(1==b){arraydetransports[tn].sel_t=1;if("undefined"!=typeof listadetrans_ids){b=-1;for(l=0;l<listadetrans_ids.length;l++)listadetrans_ids[l]==a&&(b=l);-1!=b&&(h=listadetrans[b],1>h.indexOf("169, 169, 169")&&(h=h.replace('class="trans_'+a+'"','style="background-color: rgb(169, 169, 169);" class="trans_'+a+'"'),listadetrans[b]=h))}if(1==arraydetransports[tn].type)for(arraydetransports[tn].setOptions({strokeColor:"#000099"}),
x=0;x<arraydetransports[tn].subroutes.length;x++)arraydetransports[tn].subroutes[x].setOptions({strokeColor:"#000099"});else arraydetransports[tn].setIcon(arraydetransports[tn].icon_s)}else if("undefined"!=typeof listadetrans_ids){b=-1;for(l=0;l<listadetrans_ids.length;l++)listadetrans_ids[l]==a&&(b=l);-1!=b&&(h=listadetrans[b],1<h.indexOf("169, 169, 169")&&(h=h.replace('style="background-color: rgb(169, 169, 169);" class="trans_'+a+'"','class="trans_'+a+'"'),listadetrans[b]=h))}}}
function checkservicesadd(){for(tn=0;tn<arraydeservices.length;tn++){var a=arraydeservices[tn].sid,b=0;arraydeservices[tn].sel_t=0;arraydeservices[tn].setIcon(arraydeservices[tn].icon_);var g=$.cookie("NUMDAYS"),h=1;g&&""!=g&&(h=g);for(n=1;n<=h;n++)if((g=$.cookie("EZSERVICES_day"+n))&&""!=g)for(g=g.split(","),c1=0;c1<g.length;c1++)a==g[c1]&&(b=1);if(1==b){arraydeservices[tn].sel_t=1;if("undefined"!=typeof listadeserv_ids){b=-1;for(l=0;l<listadeserv_ids.length;l++)listadeserv_ids[l]==a&&(b=l);-1!=
b&&(h=listadeserv[b],1>h.indexOf("169, 169, 169")&&(h=h.replace('class="serv_'+a+'"','style="background-color: rgb(169, 169, 169);" class="serv_'+a+'"'),listadeserv[b]=h))}arraydeservices[tn].setIcon(arraydeservices[tn].icon_s)}else if("undefined"!=typeof listadeserv_ids){b=-1;for(l=0;l<listadeserv_ids.length;l++)listadeserv_ids[l]==a&&(b=l);-1!=b&&(h=listadeserv[b],1<h.indexOf("169, 169, 169")&&(h=h.replace('style="background-color: rgb(169, 169, 169);" class="serv_'+a+'"','class="serv_'+a+'"'),
listadeserv[b]=h))}}}function closeinfocalendario_pr_pop(){$("#showmpplacesdiv").hide();$("#showmpplacesdiv").empty();$("#showroutesdiv").show();$(".check_place").attr("Checked",!1);checkplacesadd();checktransportsadd();checkservicesadd();google.maps.event.trigger(map_dr,"resize");global_showbutton&&mapcitypopup.showSelPlaces2()}
function closefullcalendario(){$("#myitin-panel .box-header").show();$("#myitibutt").show();$("#itemp-editdate").show();updateMapCityCookie();var a=$("#Calendario-mapcitypopup");$("#mask-Calendario-box").fadeOut(0);$(a).fadeOut(0);$("#Calendario-mapcitypopup").empty();$("#mask-Calendario-box").remove();checkplacesadd();checktransportsadd();checkservicesadd();global_showbutton&&mapcitypopup.showSelPlaces2()}
function closerutascalendario(){var a=$("#Calendario-mapcitypopup"),b=$("#Calendario-mapcitypopup-pan");$(a).fadeOut(0);$(b).panel("close");a.empty();$("#Calendario-mapcitypopup-pan .box-body").empty();$("#myitibutt").show();checkplacesadd();checktransportsadd();checkservicesadd();global_showbutton&&mapcitypopup.showSelPlaces2()}
function addelminateroute_s(a,b){var g=$.cookie("NUMDAYS"),h=1;g&&""!=g&&(h=g);var k=$.cookie("EZDATE1"),q=$.cookie("EZDATE2"),u=g="";k&&""!=k&&(g=k);q&&""!=q&&(u=q);k=$("#Calendario-mapcitypopup-pan");k.panel({close:function(a,b){closerutascalendario()}});k.show();k.panel("open");k.showLoading("Please Wait,<br/>Loading...<br/>",!1);h={action:"calendariotransports",ruta_id:b,date1:g,date2:u,numdays:h,source:"Services_Add",oruta_id:a};$("#Calendario-mapcitypopup-pan .box-body").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm?rnu=5131616516651",
h).promise().done($(".mask-loading").remove());$(k).width();parseInt(k.css("z-index"));$(k).css({});window.reloadlastitemcal=function(){addelminateroute_s(a,b)}}

function addelminateroute_s(a,b){var g=$.cookie("NUMDAYS"),h=1;g&&""!=g&&(h=g);var k=$.cookie("EZDATE1"),q=$.cookie("EZDATE2"),u=g="";k&&""!=k&&(g=k);q&&""!=q&&(u=q);k=$("#Calendario-mapcitypopup-pan");k.panel({close:function(a,b){closerutascalendario()}});k.show();k.panel("open");k.showLoading("Please Wait,<br/>Loading...<br/>",!1);q=window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/mapcity_content3.cfm?rnu=5131616516651":"https://myezplan.com/data_ajax/mapcity_content3.cfm?rnu=5131616516651";
    h={action:"calendariotransports",ruta_id:b,date1:g,date2:u,numdays:h,source:"Services_Add",oruta_id:a};$("#Calendario-mapcitypopup-pan .box-body").load(q,h).promise().done($(".mask-loading").remove());$(k).width();parseInt(k.css("z-index"));$(k).css({});window.reloadlastitemcal=function(){addelminateroute_s(a,b)}}

function addelminateroute_t(a,b,g){var h=$.cookie("NUMDAYS"),k=1;h&&""!=h&&(k=h);var q=$.cookie("EZDATE1"),u=$.cookie("EZDATE2"),p="",w="";q&&""!=q&&(p=q);u&&""!=u&&(w=u);h=$("#Calendario-mapcitypopup-pan");h.panel({close:function(a,b){closerutascalendario()}});h.show();h.panel("open");h.showLoading("Please Wait,<br/>Loading...<br/>",!1);$.ajax({type:"POST",url:window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/mapcity_content3.cfm?rnu=5131616516651":"data_ajax/mapcity_content3.cfm?rnu=5131616516651",
async:!0,cache:!1,data:{action:"calendariotransports",ruta_id:a,date1:p,date2:w,numdays:k,source:"Transport_Add",tipo:b,stop_id:g},success:function(b){$("#Calendario-mapcitypopup-pan .box-body").html(b).promise().done($(".mask-loading").remove());sessionStorage.setItem("calendar"+a,b);window.lastdate1=q;window.lastdate2=u}});$(h).width();k=parseInt(h.css("z-index"))+5;$(h).css({"z-index":k+1});window.reloadlastitemcal=function(){addelminateroute_t(a,b,g)}}
function editideasroutedates(a){var b=$.cookie("EZIDEAS_C"),g=$.cookie("EZIDEAS").split(","),b=b.split("!");for(xc=0;xc<g.length;xc++)if(parseFloat(g[xc])==parseFloat(a)){var h=xc+21,k=b[xc].split("*")[0];opencalforideasroutes(h,k)}}

function opencalforideasroutes(a,b){var g=$.cookie("NUMDAYS"),h=1;g&&""!=g&&(h=g);var k=$.cookie("EZDATE1"),q=$.cookie("EZDATE2"),u=g="";k&&""!=k&&(g=k);q&&""!=q&&(u=q);k=$("#Calendario-mapcitypopup-pan");k.panel({close:function(a,b){}});k.show();k.panel("open");k.showLoading("Please Wait,<br/>Loading...<br/>",!1);q=window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/mapcity_content3.cfm?rnu=5131616516651":"data_ajax/mapcity_content3.cfm?rnu=5131616516651";h={action:"calendarioplaces",
    ruta_id:a,name:b,date1:g,date2:u,numdays:h,source:"Ideasroutes_Add"};$("#Calendario-mapcitypopup-pan .box-body").load(q,h).promise().done($(".mask-loading").remove());$(k).width();parseInt(k.css("z-index"));$(k).css({});window.reloadlastitemcal=function(){opencalforideasroutes(a,b)}}
function opencalforpersonalroutes(a){var b=parseInt(a)+10;for(m=0;m<personalroutesmarks.length;m++)if(personalroutesmarks[m].id==a)var g=personalroutesmarks[m].getTitle();var h=$.cookie("NUMDAYS"),k=1;h&&""!=h&&(k=h);var q=$.cookie("EZDATE1"),u=$.cookie("EZDATE2"),p=h="";q&&""!=q&&(h=q);u&&""!=u&&(p=u);$("#Calendario-mapcitypopup").showLoading("Please Wait,<br/>Loading...<br/>",!1);q=window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/mapcity_content3.cfm?rnu=5131616516651":
    "data_ajax/mapcity_content3.cfm?rnu=5131616516651";u={action:"calendarioplaces",ruta_id:b,name:g,date1:h,date2:p,numdays:k,source:"Personalroutes_info"};$("#Calendario-mapcitypopup").load(q,u);var w=$("#Calendario-mapcitypopup-pan");w.panel();w.panel("open");w.show();w.showLoading("Please Wait,<br/>Loading...<br/>",!1);q=window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/mapcity_content3.cfm?rnu=5131616516651":"data_ajax/mapcity_content3.cfm?rnu=5131616516651";u={action:"calendarioplaces",
    ruta_id:b,name:g,date1:h,date2:p,numdays:k,source:"Personalroutes_info"};$("#Calendario-mapcitypopup-pan .box-body").load(q,u,function(){$(".mask-loading").remove()});$(w).width();parseInt(w.css("z-index"));$(w).css({});window.reloadlastitemcal=function(){opencalforpersonalroutes(a)}}

function editItinerarydates(){$("#myitin-panel .box-header").hide();$("#myitin-panel h1").hide();$("#myitibutt").hide();$("#itemp-editdate").hide();var a=$.cookie("NUMDAYS"),b=1;a&&""!=a&&(b=a);var g=$.cookie("EZDATE1"),h=$.cookie("EZDATE2"),k=a="";g&&""!=g&&(a=g);h&&""!=h&&(k=h);$("#Calendario-mapcitypopup").showLoading("Please Wait,<br/>Loading...<br/>",!1);$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm",
    async:!0,cache:!1,data:{action:"calendariofull",date1:a,date2:k,numdays:b,source:"MyItinerary"},success:function(a){$("#Calendario-mapcitypopup").html(a);sessionStorage.calendar=a;window.lastdate1=g;window.lastdate2=h}});b=$("#Calendario-mapcitypopup");$(b).width();parseInt(b.css("z-index"));$(b).css({});$(b).fadeIn(0);$(b).scrollToMe()}


function Showmpstopdetails(a){var b=$("#roadmapplace-box_panel");b.panel();b.show();b.panel("open");$("#roadmapplace-box_panel #box-body").showLoading("Please Wait,<br/>Loading...<br/>",!1);a={ruta_id:a,source:"mapcitypopup"};$("#roadmapplace-box_panel #box-body").load("https://myezplan.com/mobile/appdata/data_ajax/map_stop_tabinfo.cfm?rnu=5131616516651",a);$(b).width();parseInt(b.css("z-index"));$(b).css({})}function reopenpredit(){$("#drawroutes").fadeOut(0);edit_pr(0)}
function drawideasroutes(){var a=$.cookie("EZIDEAS");if(a&&""!=a){var b="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content2.cfm",a={action:"bringallideas",city:city_id_var,idsadded:a};$("#ideasjavafuncs").load(b,a,function(a,b,k){switch(b){case "error":$("#ideasjavafuncs").empty(),myezAlert.render("We are sorry, There is a problem loading ideas routes data")}})}}
function addideasroute_topr(a){closeideasroutedata();var b="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content2.cfm";a={action:"addideasroute_topr",id:a};$("#ideasjavafuncs2").load(b,a,function(a,b,k){switch(b){case "error":$("#ideasjavafuncs2").empty(),myezAlert.render("We are sorry, There is a problem loading ideas routes data")}})}
function closeideasroutedata(){$.each(arrayideasr,function(a,b){$("#"+arrayideasr[a].desc_).hide();for(x=0;x<arrayideasr[a].stops.length;x++)arrayideasr[a].stops[x].setMap(null)});irinview=0;shideas&&$("#listadeideas").show()}
function ideasroutedetails(a,b){"undefined"==typeof irinview&&(irinview=0);var g=irinview;0!=irinview&&(closeideasroutedata(),$("#listadeideas").show());if(g!=a)if(irinview=a,0==b){$("#body_map_canvas .gm-style").removeClass("gmstylefull");var g="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content2.cfm",h={action:"bringideas_details",id:a},k='<div id="div_desc_ir_'+a+'" style="padding: 5px 5px 5px 5px;max-width: 670px;width:90%;" class="box-gray-c "></div>';$("#ideas_descs").append(k);$("#listadeideas").hide();
$("#div_desc_ir_"+a).load(g,h,function(a,b,g){switch(b){case "error":$("#listadeideas").show(),myezAlert.render("We are sorry, There is a problem loading ideas routes data")}})}else $("#listadeideas").hide(),$.each(arrayideasr,function(b,g){if(arrayideasr[b].id==a)for($("#"+arrayideasr[b].desc_).show(),x=0;x<arrayideasr[b].stops.length;x++)arrayideasr[b].stops[x].setMap(mapcitypopup.mapconfig.google.map)}),$("#ideas_descs").is(":empty")&&$("#body_map_canvas .gm-style").addClass("gmstylefull")}
function Showinfodeasroutedates(a){var b=$("#routeinfo_"+a);a="inforoutesimg"+a;"none"==b.css("display")?(b.show(),document.getElementById(a).src="https://lh6.googleusercontent.com/-u6H1MzJ_ZjA/U9v3-XjdS0I/AAAAAAANgJI/LFPgZTF8RD4/s54/143.png"):(b.hide(),document.getElementById(a).src="https://lh4.googleusercontent.com/-bq4S5zX1Mrs/U9v3_7fZnTI/AAAAAAANgI0/bSilp7VnO5o/s54/148.png")}
function filterideasroutes(){closeideasroutedata();textolistaideas=[];var a=[];$("input:checkbox[name='plan']:checked").each(function(b,h){a.push(parseInt($(h).val()))});var b=document.getElementById("selideas_cat").value;hayideasroutessearch=0;$.each(arrayideasr,function(a,b){if(1!=arrayideasr[a].added)for(arrayideasr[a].setMap(null),su=0;su<arrayideasr[a].subs.length;su++)arrayideasr[a].subs[su].setMap(null)});$.each(arrayideasr,function(g,h){if(1!=arrayideasr[g].added){var k=0,q=arrayideasr[g].plan;
for(pp=0;pp<q.length;pp++)0<=a.indexOf(q[pp])&&(k=1);if(1==k)if("ALL"==b){arrayideasr[g].setMap(mapcitypopup.mapconfig.google.map);for(su=0;su<arrayideasr[g].subs.length;su++)arrayideasr[g].subs[su].setMap(mapcitypopup.mapconfig.google.map);hayideasroutessearch=1;textolistaideas.push('<tr class="SerTra-text ideasrow_'+g+'" onmouseover="ideasrouteover('+g+')" onmouseout="ideasrouteout('+g+')" onclick="ideasrouteclick('+g+')"><td><span style="color:'+arrayideasr[g].color+';">'+arrayideasr[g].name+'</span></td></tr><tr><td class="td-gray-line" colspan="1"></td></tr>')}else{for(c=
k=0;c<arrayideasr[g].type.length;c++)b.trim()==arrayideasr[g].type[c].trim()&&(k=1);if(1==k){arrayideasr[g].setMap(mapcitypopup.mapconfig.google.map);for(su=0;su<arrayideasr[g].subs.length;su++)arrayideasr[g].subs[su].setMap(mapcitypopup.mapconfig.google.map);hayideasroutessearch=1;textolistaideas.push('<tr class="SerTra-text ideasrow_'+g+'" onmouseover="ideasrouteover('+g+')" onmouseout="ideasrouteout('+g+')" onclick="ideasrouteclick('+g+')"><td><span style="color:'+arrayideasr[g].color+';">'+arrayideasr[g].name+
"</span></td></tr>")}}}else textolistaideas.push('<tr class="SerTra-text ideasrow_'+g+'" onmouseover="ideasrouteover('+g+')" onmouseout="ideasrouteout('+g+')" onclick="ideasrouteclick('+g+')" style="background-color:rgb(169, 169, 169);"><td><span style="color:'+arrayideasr[g].color+';">'+arrayideasr[g].name+'</span></td></tr><tr><td class="td-gray-line" colspan="1"></td></tr>')});1==hayideasroutessearch?(mapcitypopup.mapconfig.google.map.fitBounds(ideasrutasBounds),armatextolistaideas()):(myezAlert.render("No Ideas Routes With this areas or Types"),
$("#listadeideas").html("No Ideas Routes With this areas or Types"))}
function showhideideasroutes(){$("#body_map_canvas .gm-style").addClass("gmstylefull");$("#transport_descs").hide();if("undefined"==typeof arrayideasr)return bringallideas(),!1;closesubroutedata();closeideasroutedata();shpoly&&showhidepolygons();shtrans&&showhidetransports();shservices&&showhideservices();shpersonal&&showhidepersonalplaces();if(shideas)mapcitypopup.mapconfig.google.map.setCenter(MC_ir),mapcitypopup.mapconfig.google.map.setZoom(MZ_ir),$("#but_ideas_routes").removeClass("sprite-ideasAct"),
$("#but_ideas_routes").addClass("sprite-ideas"),shideas=!1,$("#ideasroutesfilter").hide(),$.each(arrayideasr,function(a,b){if(1!=arrayideasr[a].added)for(arrayideasr[a].setMap(null),su=0;su<arrayideasr[a].subs.length;su++)arrayideasr[a].subs[su].setMap(null)}),$("#places_legend").show(),$("#trasport_legend").hide(),$("#trasport_legend").empty(),$("#listadeideas").hide();else{$("#places_legend").hide();document.getElementById("trasport_legend").innerHTML='<span style="color:#c00000;">Click on route to see details</span>';
MC_ir=mapcitypopup.mapconfig.google.map.getCenter();MZ_ir=mapcitypopup.mapconfig.google.map.getZoom();$("#but_ideas_routes").addClass("sprite-ideasAct");$("#but_ideas_routes").removeClass("sprite-ideas");shideas=!0;$("#ideasroutesfilter").show();var a=[];$("input:checkbox[name='plan']:checked").each(function(b,h){a.push(parseInt($(h).val()))});var b=document.getElementById("selideas_cat").value;hayideasroutessearch=0;textolistaideas=[];$.each(arrayideasr,function(g,h){if(1!=arrayideasr[g].added){var k=
0,q=arrayideasr[g].plan;for(pp=0;pp<q.length;pp++)0<=a.indexOf(q[pp])&&(k=1);if(1==k)if("ALL"==b){arrayideasr[g].setMap(mapcitypopup.mapconfig.google.map);for(su=0;su<arrayideasr[g].subs.length;su++)arrayideasr[g].subs[su].setMap(mapcitypopup.mapconfig.google.map);hayideasroutessearch=1;textolistaideas.push('<tr class="SerTra-text ideasrow_'+g+'" onmouseover="ideasrouteover('+g+')" onmouseout="ideasrouteout('+g+')" onclick="ideasrouteclick('+g+')"><td><span style="color:'+arrayideasr[g].color+';">'+
arrayideasr[g].name+'</span></td></tr><tr><td class="td-gray-line" colspan="1"></td></tr>')}else{for(c=k=0;c<arrayideasr[g].type.length;c++)b.trim()==arrayideasr[g].type[c].trim()&&(k=1);if(1==k){arrayideasr[g].setMap(mapcitypopup.mapconfig.google.map);for(su=0;su<arrayideasr[g].subs.length;su++)arrayideasr[g].subs[su].setMap(mapcitypopup.mapconfig.google.map);hayideasroutessearch=1;textolistaideas.push('<tr class="SerTra-text ideasrow_'+g+'" onmouseover="ideasrouteover('+g+')" onmouseout="ideasrouteout('+
g+')" onclick="ideasrouteclick('+g+')"><td><span style="color:'+arrayideasr[g].color+';">'+arrayideasr[g].name+'</span></td></tr><tr><td class="td-gray-line" colspan="1"></td></tr>')}}}else textolistaideas.push('<tr class="SerTra-text ideasrow_'+g+'" onmouseover="ideasrouteover('+g+')" onmouseout="ideasrouteout('+g+')" onclick="ideasrouteclick('+g+')" style="background-color:rgb(169, 169, 169);"><td><span style="color:'+arrayideasr[g].color+';">'+arrayideasr[g].name+"</span></td></tr>")});1==hayideasroutessearch?
(mapcitypopup.mapconfig.google.map.fitBounds(ideasrutasBounds),armatextolistaideas()):myezAlert.render("No Ideas Routes With this areas or Types")}}
function bringallideas(){console.log("IDEAS");var a=$.cookie("EZIDEAS");a&&""!=a||(a="0");var b="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content2.cfm",a={action:"bringallideas",city:city_id_var,idsadded:a};$("#ideasjavafuncs").load(b,a,function(a,b,k){switch(b){case "error":$("#ideasjavafuncs").empty();myezAlert.render("We are sorry, There is a problem loading ideas routes data");break;case "success":showhideideasroutes()}})}
function delpersonalroute_fd(a){closesubroutedata();for(r=0;r<personalroutespolylines.length;r++)personalroutespolylines[r].setMap(null);for(r=0;r<personalroutesmarks.length;r++)personalroutesmarks[r].setMap(null);personalroutesmarks=[];personalroutespolylines=[];for(d=a;10>d;d++)$.cookie("EZPR_"+d,$.cookie("EZPR_"+(d+1))),$.cookie("EZPR_"+d+"_S",$.cookie("EZPR_"+(d+1)+"_S")),$.cookie("EZPR_"+(d+1),""),$.cookie("EZPR_"+(d+1)+"_S","");var b=$.cookie("NUMDAYS");if(b&&""!=b)for(n=1;n<=b;n++){var g=$.cookie("EZMAPCITYPLACES_day"+
n),h=$.cookie("EZMAPCITYPLACES2_day"+n);if(g&&""!=g){var g=g.split(","),k=[];for(x=0;x<=g.length-1;x++)10<parseInt(g[x])&&20>=g[x]?parseInt(g[x])>a+10?k.push(parseInt(g[x])-1):parseInt(g[x])!=a+10&&k.push(g[x]):k.push(g[x]);$.cookie("EZMAPCITYPLACES_day"+n,k.join(","));updateMapCityCookie();g=[];if(h&&""!=h){h=h.split(",");for(y=0;y<h.length;y++)10<parseInt(h[y])&&20>=parseInt(h[y])?parseInt(h[y])>a+10?g.push(parseInt(h[y])-1):parseInt(h[y])!=a+10&&g.push(h[y]):g.push(h[y]);$.cookie("EZMAPCITYPLACES2_day"+
n,g.join(","))}}}else if(g=$.cookie("EZMAPCITYPLACES_day1"),h=$.cookie("EZMAPCITYPLACES2_day1"),g&&""!=g){g=g.split(",");k=[];for(x=0;x<=g.length-1;x++)10<parseInt(g[x])&&20>=g[x]?parseInt(g[x])>a+10?k.push(parseInt(g[x])-1):parseInt(g[x])!=a+10&&k.push(g[x]):k.push(g[x]);$.cookie("EZMAPCITYPLACES_day1",k.join(","));updateMapCityCookie();if(h&&""!=h){h=h.split(",");g=[];for(y=0;y<=h.length-1;y++)10<parseInt(h[y])&&20>=h[y]?parseInt(h[y])>a+10?g.push(parseInt(h[y])-1):parseInt(h[y])!=a+10&&g.push(h[y]):
g.push(h[y]);$.cookie("EZMAPCITYPLACES2_day1",g.join(","))}}a=[];for(pr=1;10>=pr;pr++)if((b=$.cookie("EZPR_"+pr))&&""!=b){if(1==pr)var q="#FF00FF",u="https://lh6.googleusercontent.com/-8xxqF9thOCg/U9nRcchbb_I/AAAAAAANgBg/C77KoahO1Sc/s44/64.png";2==pr&&(q="#00FFCC",u="https://lh3.googleusercontent.com/-Tx9ASyR-Pm0/U9nRcry7fQI/AAAAAAANgB4/S4-sPOCQyv4/s44/66.png");3==pr&&(q="#6600CC",u="https://lh3.googleusercontent.com/-Y2nKnJNaweg/U9nRcP8BO4I/AAAAAAANgBc/nnLGfRYqBm8/s45/65.png");4==pr&&(q="#FF0033",
u="https://lh5.googleusercontent.com/-E1dAbz_GUo8/U9nRfXIuR0I/AAAAAAANgCw/x-ZRzX81FTM/s44/72.png");5==pr&&(q="#99CC33",u="https://lh4.googleusercontent.com/-Npa9fnZ8jsI/U9nRgTkZovI/AAAAAAANgCg/RYgxYCvC1as/s44/74.png");6==pr&&(q="#009999",u="https://lh3.googleusercontent.com/-yVml473bYZ4/U9nRhTGcy6I/AAAAAAANgC8/b_xcPHU1RM0/s44/77.png");7==pr&&(q="#FF6600",u="https://lh6.googleusercontent.com/-_APxQcrJomA/U9nRhG6kRZI/AAAAAAANgCo/aCfSRKHPbO4/s44/76.png");8==pr&&(q="#666600",u="https://lh6.googleusercontent.com/-f05N3TVBgaQ/U9nReUw3BJI/AAAAAAANgCI/Wqev2rAqxDI/s44/70.png");
9==pr&&(q="#989898",u="https://lh6.googleusercontent.com/-gjaXgjiHqzc/U9nRgg5WKcI/AAAAAAANgCk/TQs3DftLy1U/s44/75.png");10==pr&&(q="#FF0000",u="https://lh6.googleusercontent.com/-io7fsMrgN34/U9nRenFm-_I/AAAAAAANgCE/zbAnDMFVe4Q/s44/71.png");b=b.split("!");h=b[1];g=[];g.push(b[0]);g.push(h);g.push(pr);g.push(q);g.push(u);a.push(g)}map_pr(a,1)}
function showprdata(a,b){"undefined"==typeof shpersonal_r&&(shpersonal_r=0);shpersonal_r2=shpersonal_r;closesubroutedata();shpoly&&showhidepolygons();shtrans&&showhidetransports();shservices&&showhideservices();shpersonal&&showhidepersonalplaces();shideas&&showhideideasroutes();if(shpersonal_r2!=a){shpersonal_r=a;var g="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content2.cfm",h={action:"prdetails",route:a,name:b};$("#transport_descs").load(g,h,function(a,b,g){switch(b){case "error":$("#transport_descs").empty(),
myezAlert.render("We are sorry, There is a problem loading this route's data")}})}else shpersonal_r=0}
function map_pr_pre(){for(r=0;r<personalroutespolylines.length;r++)personalroutespolylines[r].setMap(null);for(r=0;r<personalroutesmarks.length;r++)personalroutesmarks[r].setMap(null);personalroutesmarks=[];personalroutespolylines=[];"undefined"!=typeof global_showbutton&&global_showbutton&&(global_showbutton=!1,mapcitypopup.showSelPlaces());var a=$.cookie("NUMDAYS");if(a&&""!=a)for(n=1;n<=a;n++){var b=$.cookie("EZMAPCITYPLACES_day"+n),g=$.cookie("EZMAPCITYPLACES2_day"+n);if(b&&""!=b){var h=b.split(","),
b="";for(x=0;x<=h.length-1;x++)if(10>=h[x]||20<h[x]){var k=",";""==b&&(k="");b=b+k+h[x]}$.cookie("EZMAPCITYPLACES_day"+n,b);updateMapCityCookie();if(g&&""!=g){g=g.split(",");b="";for(y=0;y<=g.length-1;y++)if(10>=g[y]||20<g[y])k=",",""==b&&(k=""),b=b+k+g[y];$.cookie("EZMAPCITYPLACES2_day"+n,b)}}}else if(b=$.cookie("EZMAPCITYPLACES_day1"),g=$.cookie("EZMAPCITYPLACES2_day1"),b&&""!=b){h=b.split(",");b="";for(x=0;x<=h.length-1;x++)if(10>=h[x]||20<h[x])k=",",""==b&&(k=""),b=b+k+h[x];$.cookie("EZMAPCITYPLACES_day1",
b);updateMapCityCookie();if(g&&""!=g){g=g.split(",");b="";for(y=0;y<=g.length-1;y++)if(10>=g[y]||20<g[y])k=",",""==b&&(k=""),b=b+k+g[y];$.cookie("EZMAPCITYPLACES2_day1",b)}}}
function createpersonalroutespolylines(a,b,g,h,k,q){var u=[],p=new google.maps.MVCArray;Polyline_pr=new google.maps.Polyline({path:p,map:mapcitypopup.mapconfig.google.map,strokeColor:a,strokeWeight:7,strokeOpacity:.5});Polyline_pr.prname=h;Polyline_pr.prnum=k;Polyline_pr.prcolor=a;a=b.split("*");p=a[0].replace("(","").replace(")","").split(",");b=p[0];p=p[1];b=new google.maps.LatLng(parseFloat(b),parseFloat(p));placeMarker_proute(b,h,k,g,q);for(c=0;c<a.length;c++)g=a[c].replace("(","").replace(")",
"").split(","),b=g[0],p=g[1],g=new google.maps.LatLng(parseFloat(b),parseFloat(p)),u.push(g),Polyline_pr.setPath(u);google.maps.event.addListener(Polyline_pr,"click",function(){showprdata(k,Polyline_pr.prname)});return window["Polyline_pr"+k]=Polyline_pr}function map_pr(a,b){personalroutespolylines=[];for(x=0;x<a.length;x++)polyline=createpersonalroutespolylines(a[x][3],a[x][1],b,a[x][0],a[x][2],a[x][4]),personalroutespolylines.push(polyline)}
function edit_pr(a){var b=$("#drawroutes");b.panel();b.show();b.panel("open");if(sessionStorage.getItem("drawroutes"+city_id_var))$("#drawroutes .box-body").html(sessionStorage.getItem("drawroutes"+city_id_var)),pproutecontent();else{$("#drawroutes .box-body").showLoading("Please Wait,<br/>Loading...<br/>",!1);var g=mapcitypopup.mapconfig.google.map.getCenter().toString(),b="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content2.cfm?"+randomNumberUrl()+"";a={action:"Drawroutes",center:g,num:a,city:city_id_var};
$("#drawroutes .box-body").load(b,a,function(a,b,g){switch(b){case "error":$("#drawroutes .box-body").empty();break;case "success":console.log("Creating draws cache"),sessionStorage.setItem("drawroutes"+city_id_var,a),pproutecontent()}})}}
function pproutecontent(){closesubroutedata();$("#transport_descs").append('<div style="max-height:350px; overflow:auto; padding: 5px 5px 5px 5px;max-width: 670px;width:90%;border: solid 2px #ddd;margin:5px;"><table id="rcontent"><tbody></tbody></table></div>');for(c=0;9>=c;c++)if(rid=c+1,0<markersarray[c].length){console.log("hay "+c+1+" rutas "+polylinesarray[c].rname);var a='<tr class ="trl_routes cursor" id="trl_routes'+rid+'" onclick="showprdata('+rid+",'"+polylinesarray[c].rname+'\');" onmouseover="overruta_p('+
rid+');" onmouseout="outruta_p('+rid+",'"+polylinesarray[c].strokeColor+'\');" ><td style="width:40px;text-align:center;"><img src="https://lh3.googleusercontent.com/-CIesigaJbDc/U5jiLlMUeII/AAAAAAANfIw/BEcEm_XJey4/s65/Untitled56.png" height="35px"></td><td>'+polylinesarray[c].rname+"</td></tr>";$("#rcontent").append(a)}}
function helpdeproutes(){isfromprutasview=!0;$("#myeztravel-faq").showLoading("Please Wait,<br/>Retriving Topics...<br/>",!1);$("body").append('<div id="mask-faq" class="mask-faq"></div>');$("#mask-faq").fadeIn(0);$("#myeztravel-faq").load("https://myezplan.com/mobile/appdata/data_ajax/faq_ajax_content.cfm?page=personalruotes",{action:"Faq_index"},function(a,b,g){switch(b){case "error":$("#myeztravel-faq").empty();myezAlert.render("We are sorry, There aren't any help files in this page");$("#mask-faq").fadeOut(0);
break;case "success":$("#myeztravel-faq").css({"z-index":1750}),$("#myeztravel-faq").fadeIn(0)}});return!1}
function helpderoutes(){isfromrutasview=!0;$("#myeztravel-faq").showLoading("Please Wait,<br/>Retriving Topics...<br/>",!1);$("body").append('<div id="mask-faq" class="mask-faq"></div>');$("#myeztravel-faq").load("https://myezplan.com/mobile/appdata/data_ajax/faq_ajax_content.cfm?page=ruotespopup",{action:"Faq_index"},function(a,b,g){switch(b){case "error":$("#myeztravel-faq").empty();myezAlert.render("We are sorry, There aren't any help files in this page");break;case "success":$("#mask-faq").fadeIn(0),
$("#myeztravel-faq").css({"z-index":1750}),$("#myeztravel-faq").fadeIn(0)}});return!1}function drawplacessubroutes(){var a=$.cookie("EZRUTASPLACES");a&&""!=a&&(a={action:"tarersubrutas",stopids:a},$("#funcionesparaeliminarsubrutas").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content.cfm",a,function(a,g,h){switch(g){case "error":$("#funcionesparaeliminarsubrutas").empty()}}))}
function deleterouteandstops(a){closesubroutedata();deletesubroutefrompopup(a,0,0,1);a={action:"eliminatesubroutes",rid:a};$("#funcionesparaeliminarsubrutas").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content.cfm",a,function(a,g,h){switch(g){case "error":$("#funcionesparaeliminarsubrutas").empty()}})}
function delsoubroutestop(a){var b=$.cookie("EZMAPCITYPLACES").split(","),g="";for(x=0;x<=b.length-1;x++)if(b[x]!=a){var h=",";""==g&&(h="");g=g+h+b[x]}$.cookie("EZMAPCITYPLACES",g);placesdeleted.push(a);b="";for(y=0;y<=placesadded.length-1;y++)placesadded[y]!=a&&(h=",",""==b&&(h=""),b=b+h+placesadded[y]);placesadded=b.split(",");updateMapCityCookie()}
function addsoubroutestop(a){var b=$.cookie("EZMAPCITYPLACES"),g=0;if(b&&""!=b)for(b=b.split(","),c=0;c<b.length;c++)b[c]==a&&(g=1);if(0==g){(b=$.cookie("EZMAPCITYPLACES"))&&""!=b||(b="");g="";""!=b&&(g=",");$.cookie("EZMAPCITYPLACES",b+g+a);updateMapCityCookie();placesadded.push(a);b="";for(y=0;y<=placesdeleted.length-1;y++)placesdeleted[y]!=a&&(g=",",""==b&&(g=""),b=b+g+placesdeleted[y]);placesdeleted=b.split(",");$("#place_"+a).attr("checked",!0)}}
function closesubroutedata(){"undefined"==typeof stopsinview&&(stopsinview=[]);for(x=0;x<stopsinview.length;x++)stopsinview[x].setMap(null);$("#transport_descs").html("");shpersonal_r=0}
function showsubroutedata(a){closesubroutedata();shpoly&&showhidepolygons();shtrans&&showhidetransports();shservices&&showhideservices();shpersonal&&showhidepersonalplaces();shideas&&showhideideasroutes();a={action:"subroutedetails",rid:a};$("#transport_descs").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content.cfm",a,function(a,g,h){switch(g){case "error":$("#transport_descs").empty(),myezAlert.render("We are sorry, There is a problem loading his route's data")}})}
function deletesubroutefrompopup(a,b,g,h){if(1==h){b=-1;for(x=0;x<subroutesarray.length;x++)if(subroutesarray[x].rid==a)for(subroutesarray[x].setMap(null),b=x,x2=0;x2<subroutesarray[x].subs.length;x2++)subroutesarray[x].subs[x2].setMap(null);-1!=b&&subroutesarray.splice(b,1)}}
function addsubroutefrompopup(a,b,g,h,k,q,u){b=$("#tabsx_checkboxmix2");k=b.val();k&&"undefined"!=typeof k&&parseFloat(k)==parseFloat(u)||(b=$("#tabsx_checkboxmix"),k=b.val());b.is(":checked")||$(b).trigger("click");b=new google.maps.MVCArray;b=new google.maps.Polyline({path:b,map:mapcitypopup.mapconfig.google.map,strokeColor:h,strokeWeight:7,strokeOpacity:.5});b.rid=a;b.pid=u;google.maps.event.addListener(b,"click",function(){showsubroutedata(a)});"undefined"==typeof subroutesarray&&(subroutesarray=
[]);b.subs=[];subroutesarray.push(b);for(x=0;x<g.length;x++)k=g[x].toString().replace("(","").replace(")","").split(","),u=k[0],k=k[1],u=new google.maps.LatLng(parseFloat(u),parseFloat(k)),b.getPath().push(u);if(""!=q)for(g=q.split("!"),s=0;s<g.length;s++){q=new google.maps.MVCArray;q=new google.maps.Polyline({path:q,map:mapcitypopup.mapconfig.google.map,strokeColor:h,strokeWeight:7,strokeOpacity:.5});b.subs.push(q);google.maps.event.addListener(q,"click",function(){showsubroutedata(a)});var p=g[s].split("*");
for(s2=0;s2<p.length;s2++)k=p[s2].toString().replace("(","").replace(")","").split(","),u=k[0],k=k[1],u=new google.maps.LatLng(parseFloat(u),parseFloat(k)),q.getPath().push(u)}}function closesearch(){$("#closeplacesearch").html("");setTimeout("mapcitypopup.showPlaces()",250);document.getElementById("searchplaces_").value=""}
function select_likeplace_area(a,b){if(document.getElementById("_che_"+a).checked){document.getElementById("plan_"+b).checked=!1;$("#plan_"+b).trigger("click");var g=document.getElementById("place_"+a);g&&(document.getElementById("place_"+a).checked=!0);var h=$.cookie("EZMAPCITYPLACES");h&&""!=h||(h="");g="";""!=h&&(g=",");$.cookie("EZMAPCITYPLACES",h+g+a);updateMapCityCookie();placesadded.push(a);h="";for(y=0;y<=placesdeleted.length-1;y++)placesdeleted[y]!=a&&(g=",",""==h&&(g=""),h=h+g+placesdeleted[y]);
placesdeleted=h.split(",")}else{if(g=document.getElementById("place_"+a))document.getElementById("place_"+a).checked=!1;var h=$.cookie("EZMAPCITYPLACES"),h=h.split(","),k="";for(x=0;x<=h.length-1;x++)h[x]!=a&&(g=",",""==k&&(g=""),k=k+g+h[x]);$.cookie("EZMAPCITYPLACES",k);placesdeleted.push(a);h="";for(y=0;y<=placesadded.length-1;y++)placesadded[y]!=a&&(g=",",""==h&&(g=""),h=h+g+placesadded[y]);placesadded=h.split(",");updateMapCityCookie()}}
function searchlikeplacename(){var a=document.getElementById("searchareabyplacename").value;if(""==a)return myezAlert.render("Nothing to search"),!1;$("#searchbyplacename_result").showLoading("Please Wait,<br/>Loading...<br/>",!1);var b="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content.cfm?"+randomNumberUrl()+"",a={action:"likeplace",likeplace:a,cityid:mapcitypopup.cityid};$("#searchbyplacename_result").load(b,a,function(a,b,k){switch(b){case "error":$("#searchbyplacename_result").html("No results for your search")}})}
function check_plandiv_load(){$(".pla_class").each(function(a){0!=$(this).attr("data-plan")&&(is_in_view($(this))?($(".tr_pla_"+$(this).attr("data-plan")).show(),$(".tr_pla_"+$(this).attr("data-plan")).each(function(a){bringplacedata2($(this).attr("data-pid"),$(this))}),$(this).attr("data-plan",0)):$(".tr_pla_"+$(this).attr("data-plan")).hide())})}
function check_plandiv_load2(){$("#menu_place .pla_class").each(function(a){0!=$(this).attr("data-plan")&&(is_in_view($(this))?($("#menu_place .tr_pla_"+$(this).attr("data-plan")).show(),$("#menu_place .tr_pla_"+$(this).attr("data-plan")).each(function(a){bringplacedata2($(this).attr("data-pid"),$(this));a=$(this).attr("data-iduniq");var g=$(this).attr("data-orgimg");$("#"+a+"newimg img");$("#body_col4_canvas #"+a+"newimg img").attr("src",g).hide().fadeIn(1E3);$("#body_col4_canvas #"+a+"newimg img").attr("id",
"plimg"+a);g=$(this).attr("data-rating");$("#menu_place #"+a+"newrating");""!=g&&g.split("*")}),$(this).attr("data-plan",0)):$(".tr_pla_"+$(this).attr("data-plan")).hide())})}
function check_image_load(){$("[data-image]").each(function(a){is_in_view($(this))&&$(this).append('<img src="'+$(this).attr("data-image")+'" width="'+$(this).attr("data-imagew")+'" height="'+$(this).attr("data-imageh")+'" />').removeAttr("data-image").hide().fadeIn(1E3)});$("[data-real-src]").each(function(a){is_in_view($(this))&&"image"==$(this).attr("data-real-type")&&$(this).attr("src",$(this).attr("data-real-src")).removeAttr("data-real-src").hide().fadeIn(1E3)})}
new_country_city=function(a){var b=$("#new_plan");b.panel();b.show();b.panel("open");sessionStorage.getItem("newcity")?($("#new_plan").html(sessionStorage.getItem("newcity")),$("#btn-signfirst").hide(),a&&"new"==a&&(document.getElementById("chenew").checked=!0)):(b.showLoading("Please Wait,<br/>Loading...<br/>",!1),b="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content.cfm?"+randomNumberUrl()+"",$.ajax({type:"POST",url:b,async:!0,cache:!0,data:{action:"New_Plan",parametro:"nonew"},error:function(a,
b,k){$("#new_plan").empty()},success:function(b){sessionStorage.setItem("newcity",b);$("#new_plan").html(b);a&&"new"==a&&(document.getElementById("chenew").checked=!0);$("#btn-signfirst").hide()}}))};function is_in_view(a){var b=$(window).scrollTop(),g=b+$(window).height(),h=$(a).offset().top;return h+$(a).height()>=b&&h<=g}
$(document).ready(function(a){mapcitypopup.markers=[];mapcitypopup.Close_MyItinerariesView=function(){$("#mask_myitis").fadeOut(0);$("#mask_myitis").empty();$("#mask_myitis").remove();mapcitypopup.showSelPlaces2()};mapcitypopup.MyItinerariesView=function(){if(void 0==sessionStorage.cf_sid)return pedir_sesion(1,"mapcitypopup.MyItinerariesView()"),!1;$("#tripedit-name").hide();$("#myitin-panel").show();$("#itemp-editdate").hide();$("#myitibutt #body_col5").show();$("#myitin-panel").panel("open");var a=
$.cookie("MYITINERARYID");a&&""!=a||(a=0);$("#myitin-panel .box-header").hide();$("#myitin-panel .ui-panel-inner > h1").hide();$("#myitin-panel #body_col5 #myitinerary").html('<div id="mask_myitis" class="mask-itiview" align="center"><div style="/*background-color: white;width:95%;max-width:700px;margin-top:50px;-webkit-box-shadow: 0px 0px 15px 4px #eee;-webkit-border-radius: 16px 16px 16px 16px;"><img style="float:left; padding-right:10px;" height="35px" src="https://lh5.googleusercontent.com/-Cb5dhSGmMSA/U5I5STA1muI/AAAAAAANfGk/1rOXlx8756Q/s52/Untitled8.png" onclick="mapcitypopup.Close_MyItinerariesView();"><img style="float:right;" id="buttonGetUserItineraries" width="35px" src="https://lh3.googleusercontent.com/-ixRxcyVxUL8/VOkdKcYo8BI/AAAAAAANhJQ/fjpQQeza4qY/s45/Trips%2520desactivado.png" onclick="viewlist();"><h1 style="text-align:center;*/"><span class="capitalize_red">M</span>y Trips</h1><div id="myitis-content"></div></div></div>');
$("#mask_myitis").fadeIn(0);a={action:"viewuseritineraries",thisiti:a,user:sessionStorage.cf_sid};$("#myitis-content").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content.cfm",a,function(a,b,k){switch(b){case "error":mapcitypopup.Close_MyItinerariesView()}});$("#buttonGetUserItineraries").hide()};MyItinerariesViewT=function(){$("#body_col5").show();mapcitypopup.showSelPlaces2()};

    mapcitypopup.mapShareInit=function(){

        console.log("asd");

        var a=$.cookie("MYITINERARYID"),g=$.cookie("MYITINERARYNAME");if(a&&
""!=a)void 0!=sessionStorage.cf_sid?mapcitypopup.mapSaveAjax("up",a,g,"share"):mapcitypopup.mapSaveAjax("up_t",a,g,"share");else return window.confirm("If you do not save your itinerary, it will be available only for six months")?(mapcitypopup.mapSaveAjax_temp("s"),!0):!1};

    mapcitypopup.mapPrintInit=function(){var a=$.cookie("MYITINERARYID"),g=$.cookie("MYITINERARYNAME");if(a&&""!=a)void 0!=sessionStorage.cf_sid?mapcitypopup.mapSaveAjax("up",a,g,"print"):mapcitypopup.mapSaveAjax("up_t",a,g,"print");
else return window.confirm("If you do not save your itinerary, it will be aviable only for six months")?(mapcitypopup.mapSaveAjax_temp("p"),!0):!1};

    mapcitypopup.mapPrintInit_d=function(){var a=$.cookie("MYITINERARYID"),g=$.cookie("MYITINERARYNAME");if(a&&""!=a)void 0!=sessionStorage.cf_sid?mapcitypopup.mapSaveAjax("up",a,g,"printd"):mapcitypopup.mapSaveAjax("up_t",a,g,"printd");else return window.confirm("If you do not save your itinerary, it will be aviable only for six months")?(mapcitypopup.mapSaveAjax_temp("pd"),
!0):!1};

    mapcitypopup.mapSaveInit=function(){if(void 0==sessionStorage.cf_sid)return pedir_sesion(1,"mapcitypopup.mapSaveInit()"),!1;var a=$.cookie("MYITINERARYID"),g=$.cookie("MYITINERARYNAME");if(a&&""!=a&&window.confirm("Do you want to replace your current Plan?"))return a=$.cookie("MYITINERARYID"),g=$.cookie("MYITINERARYNAME"),mapcitypopup.mapSaveAjax("up",a,g),!0;closePopup(0);mapcitypopup.save.$popup.panel();mapcitypopup.save.$popup.show();mapcitypopup.save.$popup.panel("open");mapcitypopup.save.$popup.height();
mapcitypopup.save.$popup.width();$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/saveplans_itineraryajaxsearch.cfm",async:!0,cache:!1,data:"action=searchitineraries&uid="+sessionStorage.cf_sid+"&itiid="+a,success:function(a){$("#search_itinerary").html(a)}});g&&""!=g||((a=$.cookie("EZDATE1"))&&""!=a||(a=""),g="My Itinerary "+a);document.getElementById("saveplan_name").value=g;return!0};


    mapcitypopup.mapSaveAjax=function(a,g,h,k){var q=$.cookie("NUMDAYS"),u=1;q&&""!=q&&(u=q);
var q=$.cookie("EZDATE1"),p=$.cookie("EZDATE2"),w="",v="";q&&""!=q&&(w=q);p&&""!=p&&(v=p);if("up"==a)var C=sessionStorage.cf_sid,A="https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",G="";"up_t"==a&&(C=0,A="https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax2.cfm",G="&encualva=0");console.log(C);$.ajax({type:"POST",url:A,async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction="+a+"&usid="+C+"&upid="+g+"&date1="+w+"&date2="+v+"&upinumdays="+u+"&upname="+
h+"&cityid="+city_id_var,error:function(a,b,g){myezAlert.render("error updating your itinerary, please try again"+g)},success:function(a){a=armaarraydecookies([]);var b=a[0];a=a[1];varpaso=0;if(0==b.length)for(x=1;x<=u;x++){var h=$.cookie("EZMAPCITYPLACES_day"+x);h||(h="");var p=$.cookie("EZMAPCITYPLACES2_day"+x);p||(p="");var q=$.cookie("EZFULLORDER_day"+x);q||(q="");var v=$.cookie("EZMAPCITYSUBPLACES_day"+x);v||(v="");var w=$.cookie("EZTRANSPORT_day"+x);w||(w="");var C=$.cookie("EZTRANSPORT_S_day"+
x);C||(C="");var L=$.cookie("EZSERVICES_day"+x);L||(L="");var M=$.cookie("EZROUTE_day_"+x),M=M?1:0,N=$.cookie("EZGOTM_day_"+x);N||(N="");varpaso2=0;$.ajax({type:"POST",url:A,async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction=insertdays&uid="+g+"&numday="+x+"&places="+h+"&places2="+p+"&subplaces="+v+"&transports="+w+"&trasportstops="+C+"&services="+L+"&ruta="+M+"&fullorder="+q+"&gotm="+N+G,error:function(a,b,g){myezAlert.render("error updating your itinerary, please try again"+g);
return!1},success:function(a){varpaso2+=1;varpaso2==u&&("share"==k&&mapcitypopup.ShareItinerary(g),"print"==k&&mapcitypopup.PrintItinerary(g),"printd"==k&&mapcitypopup.PrintItinerary_day(g,daytoprint))}})}for(co=0;co<b.length;co++)$.ajax({type:"POST",url:A,async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction=cookies_u&uid="+g+"&cookname="+b[co]+"&cookdata="+a[co]+"&encualva="+varpaso,error:function(a,b,g){myezAlert.render("error updating your itinerary, please try again"+g)},success:function(a){varpaso+=
1;if(varpaso==b.length)for(x=1;x<=u;x++){(a=$.cookie("EZMAPCITYPLACES_day"+x))||(a="");var h=$.cookie("EZMAPCITYPLACES2_day"+x);h||(h="");var p=$.cookie("EZFULLORDER_day"+x);p||(p="");var q=$.cookie("EZMAPCITYSUBPLACES_day"+x);q||(q="");var v=$.cookie("EZTRANSPORT_day"+x);v||(v="");var w=$.cookie("EZTRANSPORT_S_day"+x);w||(w="");var C=$.cookie("EZSERVICES_day"+x);C||(C="");var D=$.cookie("EZROUTE_day_"+x),D=D?1:0,B=$.cookie("EZGOTM_day_"+x);B||(B="");varpaso2=0;$.ajax({type:"POST",url:A,async:!0,
cache:!1,data:"action=savemapcitypopupItinerary&saveaction=insertdays&uid="+g+"&numday="+x+"&places="+a+"&places2="+h+"&subplaces="+q+"&transports="+v+"&trasportstops="+w+"&services="+C+"&ruta="+D+"&fullorder="+p+"&gotm="+B+G,error:function(a,b,g){myezAlert.render("error updating your itinerary, please try again"+g)},success:function(a){varpaso2+=1;varpaso2==u&&("share"==k&&mapcitypopup.ShareItinerary(g),"print"==k&&mapcitypopup.PrintItinerary(g),"printd"==k&&mapcitypopup.PrintItinerary_day(g,daytoprint),
loadnotice.remove&&loadnotice.remove())}})}}})}})};


    mapcitypopup.mapSaveAjax_temp=function(a){var g=$.cookie("NUMDAYS"),h=1;g&&""!=g&&(h=g);var g=$.cookie("EZDATE1"),k=$.cookie("EZDATE2"),q="",u="";g&&""!=g&&(q=g);k&&""!=k&&(u=k);var p="My Itinerary "+q;$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax2.cfm",async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction=InsertTemp&usid=0&upname="+p+"&date1="+q+"&date2="+u+"&upshareit=1&upinumdays="+h+"&cityid="+
city_id_var,error:function(a,b,g){myezAlert.render("Error saving Itinerary, please try again "+g)},success:function(g){$.cookie("MYITINERARYID",g);$.cookie("MYITINERARYNAME",p);iti_id=g;g=armaarraydecookies([]);var k=g[0];g=g[1];if(0==k.length)for(x=1;x<=h;x++){var q=$.cookie("EZMAPCITYPLACES_day"+x);q||(q="");var u=$.cookie("EZMAPCITYPLACES2_day"+x);u||(u="");var G=$.cookie("EZFULLORDER_day"+x);G||(G="");var B=$.cookie("EZMAPCITYSUBPLACES_day"+x);B||(B="");var E=$.cookie("EZTRANSPORT_day"+x);E||
(E="");var F=$.cookie("EZTRANSPORT_S_day"+x);F||(F="");var I=$.cookie("EZSERVICES_day"+x);I||(I="");var K=$.cookie("EZROUTE_day_"+x),K=K?1:0,J=$.cookie("EZGOTM_day_"+x);J||(J="");$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax2.cfm",async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction=insertdays&uid="+iti_id+"&numday="+x+"&places="+q+"&places2="+u+"&subplaces="+B+"&transports="+E+"&trasportstops="+F+"&services="+I+"&ruta="+K+"&fullorder="+
G+"&gotm="+J+"&encualva="+x,error:function(a,b,g){myezAlert.render("error updating your itinerary, please try again"+g)},success:function(g){g==h&&("p"==a&&mapcitypopup.PrintItinerary(iti_id),"s"==a&&mapcitypopup.ShareItinerary(iti_id),"pd"==a&&mapcitypopup.PrintItinerary_day(iti_id,daytoprint))}})}for(co=0;co<k.length;co++)$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax2.cfm",async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction=cookies&uid="+
iti_id+"&cookname="+k[co]+"&cookdata="+g[co]+"&encualva="+co,error:function(a,b,g){myezAlert.render("error updating your itinerary, please try again"+g)},success:function(g){if(k.length-1==g)for(x=1;x<=h;x++){(g=$.cookie("EZMAPCITYPLACES_day"+x))||(g="");var p=$.cookie("EZMAPCITYPLACES2_day"+x);p||(p="");var q=$.cookie("EZFULLORDER_day"+x);q||(q="");var u=$.cookie("EZMAPCITYSUBPLACES_day"+x);u||(u="");var A=$.cookie("EZTRANSPORT_day"+x);A||(A="");var w=$.cookie("EZTRANSPORT_S_day"+x);w||(w="");var C=
$.cookie("EZSERVICES_day"+x);C||(C="");var B=$.cookie("EZROUTE_day_"+x),B=B?1:0,G=$.cookie("EZGOTM_day_"+x);G||(G="");$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax2.cfm",async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction=insertdays&uid="+iti_id+"&numday="+x+"&places="+g+"&places2="+p+"&subplaces="+u+"&transports="+A+"&trasportstops="+w+"&services="+C+"&ruta="+B+"&fullorder="+q+"&gotm="+G+"&encualva="+x,error:function(a,b,g){myezAlert.render("error updating your itinerary, please try again"+
g)},success:function(g){g==h&&("p"==a&&mapcitypopup.PrintItinerary(iti_id),"s"==a&&mapcitypopup.ShareItinerary(iti_id),"pd"==a&&mapcitypopup.PrintItinerary_day(iti_id,daytoprint))}})}}})}})};mapcitypopup.showCats=function(a){a=a||mapcitypopup.mapconfig;$.each(a.markers,function(g,h){var k=a.markers[g].mk_category.category;0<=parseFloat(k[0])&&(_cat=parseFloat(k[0]),$("#div_"+_cat).hide());0<=parseFloat(k[1])&&(_cat1=parseFloat(k[1]),$("#div_"+_cat1).hide());0<=parseFloat(k[2])&&(_cat2=parseFloat(k[2]),
$("#div_"+_cat2).hide())})};searchplacesbyname_=function(a){var g=document.getElementById("searchplaces_").value;if(""==g)return myezAlert.render("Enter a valid word"),!1;a=a||mapcitypopup.mapconfig;var h=$("#body_col4 #menu_place .table");h.empty();$("#closeplacesearch").html("X");var k="";_countplans=0;hayalgo=!1;$.each(a.markers,function(q,u){a.markers[q].setVisible(!1);if(0<=a.markers[q].title.toUpperCase().indexOf(g.toUpperCase())){hayalgo=!0;a.markers[q].setVisible(!0);var p=a.markers[q],w=
p.mk_category.planname,v=38<p.title.length?p.title.substr(0,35)+"...":p.title;if(w!=k&&(_countplans+=1,1>_countplans&&check_plandiv_load(),h.append('<tr class="pla_class" data-plan="'+_countplans+'"><th class="t0" colspan="3">'+w+'<span class="catname-head">All</span></th></tr>'),1==viewbanner1&&_countplans<=arraydebanner1.length)){var C=arraydebanner1[_countplans-1].link;""==arraydebanner1[_countplans-1].link&&(C="javascript:;");h.append('<tr><td colspan="3"><div id="bannertype1_'+_countplans+'" class="bannertype1"><a href="'+
C+'" target="_blank"><img class="bannertype1-inn" src="'+arraydebanner1[_countplans-1].img+'" width="100%" height="90px" /></a></div></td></tr>')}h.append('<tr class="tr_pla_'+_countplans+' tr_place" data-pid="'+p.mk_id+'" data-iduniq="'+p.mk_category.idunico+'" data-orgimg="'+p.mk_category.imgurl+'" data-rating="'+p.mk_category.rating+'"><td class="t4"><input type="checkbox" name="place" value="'+p.mk_id+'" id="place_'+p.mk_id+'" class="check_place squaredTwo squaredTwoGrande" /><label for="place_'+
p.mk_id+'"></label></td><td class="placetooltip_old"  data-tipid="'+p.mk_category.idunico+'" data-tipicon="'+p.icon+'"><div><table onclick="window.top.showinfoplace(\''+p.mk_category.idunico+"','"+p.mk_id+'\', \'mapcitypopup\');" class="table show_load"><tr><td class="t3"><label onclick="window.top.showinfoplace(\''+p.mk_category.idunico+"','"+p.mk_id+"', 'mapcitypopup');\" class=\"cursor label_check\">"+v+'<br><div id="'+p.mk_category.idunico+'newtype" ><h4>Type:'+p.mk_category.type+'</h4></div><div id="'+
p.mk_category.idunico+'newrating"></div><td class="table_img"> <div id="'+p.mk_category.idunico+'newimg"><img src="images/myezplan-free-vacation-planner.svg"/></div></td></tr></table></tr>');0<=$.inArray(p.mk_id,global_MapCityCookie)&&$("#place_"+p.mk_id+"").attr("checked",!0);k=w}});hayalgo?a.setCenterByBounds():h.append('<div align="center" style="font-weight:bold;">Sorry, no results <span onclick="closesearch();" style="color:#c00000;cursor: pointer;">Back</span></div>');check_plandiv_load2();
check_image_load()};mapcitypopup.showSelPlaces=function(a){updateMapCityCookie();hayalgo=!1;a=a||mapcitypopup.mapconfig;$.each(a.markers,function(g,h){a.markers[g].setVisible(!1);0<=$.inArray(a.markers[g].mk_id,global_MapCityCookie)&&(a.markers[g].setVisible(!0),$("#pla_tr_"+a.markers[g].mk_id).css("background","#ddd"),hayalgo=!0)});hayalgo?a.setCenterByBounds():(myezAlert.render("Please select places first"),$(".Map_Picks").css("backgroundColor","rgb(211, 211, 211)"),showmappicks=!1,mapcitypopup.showPlaces())};
selectAndall2=0;mapcitypopup.showSelPlaces2=function(a){a=$("#myitin-panel");a.panel({close:function(a,b){global_showbutton=!1}});a.show();$("#myitin-panel .box-header, #tripedit-name").show();$("#myitin-panel .ui-panel-inner > h1").show();$("#Calendario-mapcitypopup").hide();$("#myitibutt").show();$("#body_col5").show();$("#itemp-editdate").show();$("#nametochange-edit").val($.cookie("MYITINERARYNAME"));setTimeout("mapcitypopup.showSelPlaces2content()",20)};mapcitypopup.showSelPlaces2content=function(a){restimg_g=
"0";countrestimg_g=0;a=a||mapcitypopup.mapconfig;var g=$.cookie("NUMDAYS"),h=1;g&&""!=g&&(h=g);var k=$.cookie("EZDATE1"),q=$.cookie("EZDATE2"),g=0;if(k&&""!=k){var u=new codefecha(k),u=new Date(u.anio,u.mes-1,u.dia);u.getMonth();u.getDate();u.getFullYear();var p=$.datepicker.formatDate("m/d/y",new Date($.cookie("EZDATE1"))),g=1}if(q&&""!=q){q=new codefecha(q);q=new Date(q.anio,q.mes-1,q.dia);q.getMonth();q.getDate();q.getFullYear();var w=$.datepicker.formatDate("m/d/y",new Date($.cookie("EZDATE2")))}q=
$("#body_col5 #myitinerary");q.empty();(k=$.cookie("MYITINERARYNAME"))&&""!=k||(k='<span class="capitalize_red">M</span>y Itinerary');q.append('<div class="divitiplus" style="max-width:200px;;margin:5px auto;border: solid thin #ddd; display:none;border-radius: 3px;cursor: pointer;background-color:#FFFFFF;padding:5px;"; align="center"><a href="javascript:;" id="buttonAddDealItinerary" onclick="showmoredeals_mi();" class="" style="width:70px;text-decoration: none;color: white;"><img id="showdealsimg-edit" width="40px" src="https://lh3.googleusercontent.com/-QRQ-N37MOi0/VMj5gHyGIbI/AAAAAAANhAo/5gaaJc4NjLo/s46/Hot%2520deals%2520inactive.png"></a><a href="javascript:;" id="buttonTipItinerary" class="" style="width:50px;text-decoration: none;color: white;padding:0 5px;" onclick="showititips_mi();"><img id="showtipsimg-edit" width="40px" src="https://lh5.googleusercontent.com/-FZ1ifjEbMRc/VMj44h9yMeI/AAAAAAANhAU/ap68feoG1lE/s46/Tips%2520inactive.png"></a><a href="javascript:;" id="buttonAddUserPersonalPlan" class="" style="width:70px;text-decoration: none;color: white;" onclick="showmoreplans_mi(0);"><img id="showmimg-edit" width="40px" src="https://lh5.googleusercontent.com/-X49XNVWGXPc/VMj6lmpScrI/AAAAAAANhBA/gYLAyxdaVFQ/s45/pp%2520inactive.png"></a><a href="#" onclick="cleancurrentitin();" style="float:right;"><svg style="width:30px; height:30px;fill: #c00000;" class="icon icon-delete"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-delete"></use></svg></a></div><div id="diviti3" class="diviti2" style="border: solid thin #ddd; display: inline-block;border-radius: 3px;cursor: pointer;width: 99%;background-color:#FFFFFF"; align="center"></div>');
q.append('<div id="diviti2" class="diviti2"></div>');q.append('<div id="diviti4" class="diviti4" style="text-align:center;"></div>');q.append('<div id="divitifuncs"></div>');q.append('<div id="right_bottom_steps" class="diviti2" align="center"><div style="" align="center"><ul class="btn-group"><li><a class="save-img cursor" onclick="mapcitypopup.mapSaveInit();"><svg style="width:30px; height:30px;fill: ;" class="icon icon-save"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-save"></use></svg></a></li><li><a class="print-img cursor" onclick="mapcitypopup.mapPrintInit();"><svg style="width:30px; height:30px;fill: ;" class="icon icon-print"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-print"></use></svg></a></li><li><a class="share-img cursor" onclick="mapcitypopup.mapShareInit();"><svg style="width:30px; height:30px;fill: ;" class="icon icon-share"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-share"></use></svg></a></li><li><a style="text-decoration:none;color:#fff;" id="button_steps-itinerary" class="cursor" onclick="mapcitypopup.MyItinerariesView();"><svg style="width:30px; height:30px;fill: #c00000;" class="icon icon-work"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-work"></use></svg></a></li></ul></div></div>');
_diviti_t=$("#body_col5 #myitinerary #diviti3");0==g?q='<table width="100%"><tr><th align="center" width="">Days/nights</th></tr><tr><td align="center">'+h+"/"+(h-1)+"</td></tr></table>":(q='<table width="100%"><tr><th align="center" width="30%">Start</th><th align="center" width="30%">End</th><th align="center" width="30%">Days/nights</th></tr><tr><td align="center">'+p+"</td>",q=q+'<td align="center">'+w+"</td>",q=q+'<td align="center">'+h+"/"+(h-1)+"</td></tr>",q+="</table>");_diviti_t.append(q);
q=$("#body_col5 #myitinerary #diviti2");p=!1;w=[];for(x=1;x<=h;x++){var k=!1,v="";0!=g&&(v=new Date(u),v.setDate(v.getDate()+(x-1)),v.getMonth(),v.getDate(),v.getFullYear(),v=" - "+$.datepicker.formatDate("m/d/y",new Date(v)));var C=$.cookie("EZ_P_O_day"+x);C&&""!=C||(C=1);w.push(C);var A=$.cookie("MYITINERARYID");if(A&&""!=A){var A=$.cookie("EZNOTE_day"+x),G='class="select_m"';A&&""!=A||(A="Add a note",G='class="select_m watermark"');A='<input id="daynote_mi" type="text" onblur="addnotetoday_mi('+
x+',this.value);" style="width:100%;margin:5px auto;" value="'+A+'" '+G+">"}else A="";q.append('<h3><span class="capitalize_red">Day '+x+" of "+h+"</span>"+v+'<span style="float:right;" class="capitalize_red expand"></span></h3><div id="divday'+x+'" class="divday_'+x+'"><div id="daycontent_'+x+"_"+C+'" class="daycontent_'+x+"_"+C+' daybox-plan body-rounded-3" data-tipo="pl" style="margin-bottom:5px;text-align:center;"><div id="butt_mp_day_'+x+'" align="center"><a style="float:right;" onclick="emptydaycookies('+
x+');" class="cursor"><svg style="width:30px; height:30px;fill: #c00000;" class="icon icon-delete vertm-inlib"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-delete"></use></svg></a><span class="button-square-2 button-round-red2" style="cursor: pointer;" onclick="viewrouteforday('+x+');">Myezplan</span></div>'+A+'<div id="divdaysort_'+x+'" style="margin:5px 0px"></div></div></div>');_divititable=$("#body_col5 #myitinerary #divday"+x+" #daycontent_"+x+"_"+C+" #divdaysort_"+x);_divititable2=
$("#body_col5 #myitinerary #divday"+x+" #daycontent_"+x+"_"+C);var v=$.cookie("EZFULLORDER_day"+x),B=$.cookie("EZMAPCITYPLACES_day"+x),C=$.cookie("EZTRANSPORT_day"+x),A=$.cookie("EZTRANSPORT_S_day"+x),G=$.cookie("EZSERVICES_day"+x);othercityarray=[];otherarraytrans=[];otherarrayserv=[];if(v&&""!=v){var E=v.split(","),F=B.split(","),I=C?C.split(","):"",K=G?G.split(","):"";for(pl=0;pl<F.length;pl++){0>E.indexOf(F[pl])&&E.push(F[pl]);for(tr=0;tr<I.length;tr++)B="t"+I[tr],0>E.indexOf(B)&&E.push(B);for(sv=
0;sv<K.length;sv++)B="s"+K[sv],0>E.indexOf(B)&&E.push(B)}var J=[];for(fu=0;fu<E.length;fu++)-1<E[fu].indexOf("t")?(B=E[fu].replace("t",""),-1<I.indexOf(B)&&J.push(E[fu])):-1<E[fu].indexOf("s")?(B=E[fu].replace("s",""),-1<K.indexOf(B)&&J.push(E[fu])):-1<F.indexOf(E[fu])&&J.push(E[fu]);$.cookie("EZFULLORDER_day"+x,J.join(","));B=J.join(",")}if(B&&""!=B){var k=p=!0,D=B.split(",");for(c=0;c<D.length;c++)if(console.log(D[c]),0>D[c].indexOf("t")&&0>D[c].indexOf("s")){if(40<D[c]){var H=!1;for(mm=0;mm<a.markers.length;mm++)a.markers[mm].mk_id==
D[c]&&(H=!0,_marker=a.markers[mm],B=30<_marker.title.length?_marker.title.substr(0,30)+"...":_marker.title,_divititable.append('<div id="day_'+x+"_"+D[c]+'" class="day-place-pl"><table onclick="window.top.showinfoplace(\''+_marker.mk_category.idunico+"','"+_marker.mk_id+'\', \'mapcitypopup\',\'yes\');" class="table"><tr><td class="t3" style="text-align:center;"><label onclick="window.top.showinfoplace(\''+_marker.mk_category.idunico+"','"+_marker.mk_id+"', 'mapcitypopup','yes');\" class=\"cursor label_check\">"+
B+'<br><div id="'+_marker.mk_category.idunico+"newtype_"+x+'"></div><td class="table_img"> <div id="'+_marker.mk_category.idunico+"newimg_"+x+'" class="drag_me"><img src="images/myezplan-free-vacation-planner.svg"/></div></td></label></td></tr></table></div>'),1==_marker.queryed?($("#"+_marker.mk_category.idunico+"newimg_"+x).empty(),$("#"+_marker.mk_category.idunico+"newtype_"+x).empty(),$("#"+_marker.mk_category.idunico+"newimg_"+x).append(_marker.img__),$("#"+_marker.mk_category.idunico+"newtype_"+
x).append(_marker.areacity__)):(B=$("#"+_marker.mk_category.idunico+"newimg_"+x),E=$("#"+_marker.mk_category.idunico+"newtype_"+x),bringplacedata(_marker,restimg_g,x,B,E)));H||(_divititable.append('<div id="day_'+x+"_"+D[c]+'" class="day-place-pl"></div>'),B="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm?rnu=5131616516651",E={action:"bringothercityplace",ruta_id:D[c]},$("#day_"+x+"_"+D[c]).load(B,E))}11>D[c]&&(E=$.cookie("EZPERSONAL"),E=E.split("!"),void 0!=E[D[c]-1]&&(B=E[D[c]-
1].split("*"),E=B[0],B=B[0],40<E.length&&(B=E.substring(0,36)+"..."),_divititable.append('<div id="day_'+x+"_"+D[c]+'" class="day-place-pl"><table class="table"><tr><td class="t3"><label class="cursor label_check">'+B+'<td class="table_img"> <div><img src="https://lh3.googleusercontent.com/-UZliDkbBQtA/VMk6xwLihKI/AAAAAAANhC4/02ZcZPiK-LE/s136/MY%2520PLACE.png" onclick="opencalforpersonals(\''+E+"',"+D[c]+');"></div></td></label></td></tr></table></div>')));if(10<D[c]&&21>D[c]){B=D[c]-10;if(1==B)var L=
"#FF00FF";2==B&&(L="#00FFCC");3==B&&(L="#6600CC");4==B&&(L="#FF0033");5==B&&(L="#99CC33");6==B&&(L="#009999");7==B&&(L="#FF6600");8==B&&(L="#666600");9==B&&(L="#989898");10==B&&(L="#FF0000");E=$.cookie("EZPR_"+B);void 0!=E&&(E=E.split("!"),E=E[0],_divititable.append('<div id="day_'+x+"_"+D[c]+'" class="day-place-pl"><table class="table"><tr><td class="t3" ><label class="cursor label_check"><span style="color:'+L+';">'+E+'</span><td class="table_img"><div onclick="opencalforpersonalroutes('+B+');"><img src="https://lh5.googleusercontent.com/-z3w2lJQ_1fI/VMk6x5OQwmI/AAAAAAANhC8/ZxxaZOhYVxI/s136/MY%2520ROUTE.png"></div></td></label></td></tr></table></div>'))}if(20<
D[c]&&31>D[c]){var B=D[c]-21,E=$.cookie("EZIDEAS_C").split("!"),M=$.cookie("EZIDEAS").split(",")[B],B=E[B].split("*"),E=B[0];_divititable.append('<div id="day_'+x+"_"+D[c]+'" class="day-place-pl"><table class="table"><tr><td class="t3" ><label class="cursor label_check"><span style="color:'+("#"+B[3])+';">'+E+'</span><td class="table_img"><div><img src="https://lh4.googleusercontent.com/-4Cd3GYz2ebM/VMk6Bczpl9I/AAAAAAANhCk/9Clp7mY95fQ/s136/IDEAS%25202.png" onclick="editideasroutedates('+M+');"></div></td></label></td></tr></table></div>')}}else{if(-1<
D[c].indexOf("t")){var H=!1,p=!0,M=D[c].replace("t",""),k=!0,N=A.split(","),O=[];$.each(arraydetransports,function(a,b){if(parseInt(arraydetransports[a].rid)==parseInt(M)){H=!0;var g=parseInt(arraydetransports[a].type);if(1==g)for(st=0;st<arraydetransports[a].arraystops.length;st++)for(cs=0;cs<N.length;cs++)parseInt(N[cs])==parseInt(arraydetransports[a].arraystops[st].id_)&&O.push(arraydetransports[a].arraystops[st].nombre);var h=O.join(", "),k=1==g?0:arraydetransports[a].rid;40<h.length&&(h=h.substring(0,
36)+"...");_divititable.append('<div id="day_'+x+"_"+D[c]+'" class="day-place-pl"><table class="table"><tr><td class="t3" ><label class="cursor label_check"><span  id="span_t_'+x+'" style="color:#'+arraydetransports[a].color+';">'+arraydetransports[a].nombre+"</span><br><h4>"+h+'</h4><td class="table_img"><div class="drag_me"><img src="https://lh6.googleusercontent.com/-5enOtqMjn8Y/VMk6B6MVGJI/AAAAAAANhCo/XV-BGDFNPQU/s136/TRANSPORT.png" onclick="addelminateroute_t('+D[c]+","+g+","+k+');"></div></td></label></td></tr></table></div>')}});
H||(_divititable.append('<div id="day_'+x+"_"+D[c]+'" class="day-place-pl"></div>'),B="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm?rnu=5131616516651",E={action:"bringothercitytrans",tid:M},$("#day_"+x+"_"+D[c]).load(B,E))}-1<D[c].indexOf("s")&&(servdeciudad=!1,M=D[c].replace("s",""),$.each(arraydeservices,function(a,b){parseInt(arraydeservices[a].sid)==parseInt(M)&&(servdeciudad=!0,_divititable.append('<div id="day_'+x+"_"+D[c]+'" class="day-place-pl"><table class="table"><tr><td class="t3" ><label class="cursor label_check"><span  id="span2_'+
x+"_t_"+c+'">'+arraydeservices[a].catname+" - "+arraydeservices[a].nombre+'</span><td class="table_img"><div class="drag_me"><img src="https://lh5.googleusercontent.com/-Lbqsh6kBgUA/VEg3r6f9CmI/AAAAAAANg4c/R7wFJ1lLlx8/s136/5%2520service.png" onclick="addelminateroute_s('+arraydeservices[a].rid+","+arraydeservices[a].sid+');"></div></td></label></td></tr></table></div>'))}),servdeciudad||(console.log("here"),_divititable.append('<div id="day_'+x+"_"+D[c]+'" class="day-place-pl"></div>'),B="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm?rnu=5131616516651",
E={action:"bringothercityserv",sid:M},$("#day_"+x+"_"+D[c]).load(B,E)))}}if(!v||""==v){if(C&&""!=C)for(console.log("trans list"),p=!0,tresdeciudad=!1,k=!0,D=C.split(","),N=A.split(","),c=0;c<D.length;c++)tresdeciudad=!1,O=[],$.each(arraydetransports,function(a,b){if(parseInt(arraydetransports[a].rid)==parseInt(D[c])){tresdeciudad=!0;var g=parseInt(arraydetransports[a].type);if(1==g)for(st=0;st<arraydetransports[a].arraystops.length;st++)for(cs=0;cs<N.length;cs++)parseInt(N[cs])==parseInt(arraydetransports[a].arraystops[st].id_)&&
O.push(arraydetransports[a].arraystops[st].nombre);var h=O.join(", "),k=1==g?0:arraydetransports[a].rid;40<h.length&&(h=h.substring(0,36)+"...");_divititable.append('<div id="day_'+x+"_t"+D[c]+'" class="day-place-pl"><table class="table"><tr><td class="t3" ><label class="cursor label_check"><span  id="span_t_'+x+'" style="color:#'+arraydetransports[a].color+';">'+arraydetransports[a].nombre+"</span><br><h4>"+h+'</h4><td class="table_img"><div class="drag_me"><img src="https://lh6.googleusercontent.com/-5enOtqMjn8Y/VMk6B6MVGJI/AAAAAAANhCo/XV-BGDFNPQU/s136/TRANSPORT.png" onclick="addelminateroute_t('+
D[c]+","+g+","+k+');"></div></td></label></td></tr></table></div>')}}),tresdeciudad||(console.log("trans list no"+D[c]),_divititable.append('<div id="day_'+x+"_t"+D[c]+'" class="day-place-pl"></div>'),B="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm?rnu=5131616516651",E={action:"bringothercitytrans",tid:D[c]},$("#day_"+x+"_t"+D[c]).load(B,E));if(G&&""!=G)for(k=p=!0,D=G.split(","),c=0;c<D.length;c++)servdeciudad=!1,$.each(arraydeservices,function(a,b){parseInt(arraydeservices[a].sid)==
parseInt(D[c])&&(servdeciudad=!0,_divititable.append('<div id="day_'+x+"_s"+D[c]+'" class="day-place-pl"><table class="table"><tr><td class="t3" ><label class="cursor label_check"><span  id="span2_'+x+"_t_"+c+'">'+arraydeservices[a].catname+" - "+arraydeservices[a].nombre+'</span><td class="table_img"><div class="drag_me"><img src="https://lh5.googleusercontent.com/-Lbqsh6kBgUA/VEg3r6f9CmI/AAAAAAANg4c/R7wFJ1lLlx8/s136/5%2520service.png" onclick="addelminateroute_s('+arraydeservices[a].rid+","+arraydeservices[a].sid+
');"></div></td></label></td></tr></table></div>'))}),servdeciudad||(console.log("here"),_divititable.append('<div id="day_'+x+"_s"+D[c]+'" class="day-place-pl"></div>'),B="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content3.cfm?rnu=5131616516651",E={action:"bringothercityserv",sid:D[c]},$("#day_"+x+"_s"+D[c]).load(B,E))}k||(_divititable2.prepend('<div class="" style="text-shadow:none;">No Places Added</div>'),$("#butt_mp_day_"+x).remove());_divititable.sortable({handle:".drag_me",update:function(a,
b){var g=$(this).sortable("toArray").toString().replace(/day_/g,"").split(","),h=[],k=[];for(x=0;x<g.length;x++){var p=g[x].split("_"),q=p[0];k.push(p[1]);0>p[1].indexOf("t")&&0>p[1].indexOf("s")&&h.push(p[1])}$.cookie("EZROUTE_day_"+q,!0);$.cookie("EZMAPCITYPLACES_day"+q,h.join(","));$.cookie("EZFULLORDER_day"+q,k.join(","))}})}q.accordion({collapsible:!0,active:!1,animated:"bounceslide",heightStyle:"content"});(A=$.cookie("MYITINERARYID"))&&""!=A?(traepersonalesyhotdeals(A,h,w.join(",")),$("#plus_funcs2").show()):
$("#plus_funcs2").hide();if(!p)return myezAlert.render("Please make a selection."),(a=parseInt($("input:radio[name='category']:checked").val()))&&""!=a&&0!=a?$("#show_places").trigger("click"):"none"==$("#body_col2").css("display")&&$("#show_categ").trigger("click"),!1;$("#myitin-panel").panel("open");check_image_load()};traepersonalesyhotdeals=function(a,g,h){$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_EI.cfm?rnu=5131616516651",async:!0,data:{action:"personalyhotdeal_myiti",
itiid:a,numdays:g,userid:sessionStorage.cf_sid?sessionStorage.cf_sid:"",orders:h},success:function(a){$("#divitifuncs").html(a)}})};bringplacedata3=function(a,g,h,k){1==a.queryed?(k.empty(),k.append(a.rating__)):$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/mapcity_content.cfm",async:!0,cache:!0,data:"action=imgytype&pids="+a.mk_category.idunico+"&restimg_g="+restimg_g+"&day=0",error:function(){img="images/myezplan-free-vacation-planner.svg";type_="<h4>Type: Atraction</h4>";
g.empty();h.empty();k.empty();g.append(img);h.append(type_)},success:function(g){a.queryed=1;g=g.split("!");img='<img data-real-type="image" src="https://lh3.googleusercontent.com/-xhmo8Iinz68/VEnrYWO4eWI/AAAAAAANg80/yBuZi9jSgYc/s109/Loading3%2520small.png" data-real-src="'+g[1]+'" />';type_="<h4>Type: "+g[0]+"</h4>";areacity_="<h4>"+g[5]+" - "+g[4]+"</h4>";a.areacity__=areacity_;a.type__=type_;a.audio_link=g[6];a.ismap=g[7];a.img__=img;var u="";if(0!=g[3]){var p=g[3];for(i=1;6>i;i++){var w=i-.5;
if(p>i)var v="images/rating/star.svg";p<i&&(v="images/rating/star_outline.svg");p<i&&p==w&&(v="images/rating/star_half.svg");u=u+'<img width="25px" style="width:25px !important" data-real-type="image" src="images/rating/star_outline.svg" data-real-src="'+v+'" />'}}v="<h4>"+u+"</h4>";a.rating__=v;0!=g[2]&&(restimg_g=restimg_g+","+g[2],countrestimg_g+=1,19<countrestimg_g&&(restimg_g="0",countrestimg_g=0));h.empty();k.empty();h.append(type_);k.append(v);check_image_load()}})};bringplacedata2=function(a,
g,h){h=h||mapcitypopup.mapconfig;$.each(h.markers,function(g,q){if(h.markers[g].mk_id==a){_marker=h.markers[g];var u=$("#"+_marker.mk_category.idunico+"newimg"),p=$("#"+_marker.mk_category.idunico+"newtype"),w=$("#menu_place #"+_marker.mk_category.idunico+"newrating");bringplacedata3(_marker,u,p,w)}})};bringplacedata=function(a,g,h,k,q){$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/mapcity_content.cfm",async:!0,cache:!0,data:"action=imgytype_picks&pids="+a.mk_category.idunico+
"&restimg_g="+g,success:function(g){g=g.split("!");img='<img data-real-type="image" src="https://lh3.googleusercontent.com/-xhmo8Iinz68/VEnrYWO4eWI/AAAAAAANg80/yBuZi9jSgYc/s109/Loading3%2520small.png" data-real-src="'+g[1]+'" />';type_="<h4>"+g[3]+" - "+g[0]+"</h4>";a.img__=img;a.areacity__=type_;a.audio_link=g[4];a.ismap=g[5];0!=g[2]&&(restimg_g=restimg_g+","+g[2],countrestimg_g+=1,19<countrestimg_g&&(restimg_g="0",countrestimg_g=0));k.html(img);q.html(type_);check_image_load()}})};mapcitypopup.showPlaces=
function(a){updateMapCityCookie();global_showbutton=!1;a=a||mapcitypopup.mapconfig;mapcitypopup.markers=[];var g=a.markers.length;for(m=0;m<g;m++){"undefined"==typeof a.markers[m].queryed&&(a.markers[m].queryed=0);var h=a.markers[m].icon;0<h.indexOf("s.png")&&(h=h.replace("s.png",".png"),a.markers[m].icon=h);a.markers[m].setVisible(!1);mapcitypopup.markers.push(a.markers[m])}a=$("#body_col4 #menu_place .table");a.empty();$("#body_col4 #myitinerary").empty();g="";h=mapcitypopup.markers.length;for(m=
0;m<h;m++){var k=mapcitypopup.markers[m],q=k.mk_category.planname;q!=g&&a.append('<tr><th class="t0" colspan="3">'+q+"</th></tr>");a.append('<tr><th class="t1"><input type="checkbox" name="place" value="'+k.mk_id+'" id="place_'+k.mk_id+'" class="check_place"/></th></tr>');0<=$.inArray(k.mk_id,global_MapCityCookie)&&$("#place_"+k.mk_id+"").attr("checked",!0);g=q}mapcitypopup.showCats();mapcitypopup.showPlaces2()};mapcitypopup.showPlaces2=function(a){a=a||mapcitypopup.mapconfig;mapcitypopup.markers=
[];restimg_g="0";countrestimg_g=0;var g=[];$("input:checkbox[name='plan']:checked").each(function(a,b){g.push(parseInt($(b).val()))});var h=[];$("input:checkbox[name='place']:checked").each(function(a,b){h.push(parseInt($(b).val()))});var k=parseInt($("input:radio[name='category']:checked").val()),q=$("input:radio[name='category']:checked").closest("label").find("span").html(),u=a.markers.length;for(mc=0;mc<u;mc++){a.markers[mc].setVisible(!1);if(0<=$.inArray(a.markers[mc].mk_id,h)){var p=a.markers[mc].icon.replace(".png",
"s.png");a.markers[mc].icon=p;a.markers[mc].setVisible(!0)}var p=a.markers[mc].mk_category.category,w=parseInt(a.markers[mc].mk_category.planid);0<=$.inArray(w,g)&&(w=a.markers[mc].mk_category.category,0<=parseFloat(w[0])&&(_cat=parseFloat(w[0]),$("#div_"+_cat).show()),0<=parseFloat(w[1])&&(_cat1=parseFloat(w[1]),$("#div_"+_cat1).show()),0<=parseFloat(w[2])&&(_cat2=parseFloat(w[2]),$("#div_"+_cat2).show()),0<=$.inArray(k,p)&&(a.markers[mc].setVisible(!0),mapcitypopup.markers.push(a.markers[mc])))}k=
$("#body_col4 #menu_place .table");k.empty();$("#body_col4 #myitinerary").empty();var v="";_countplans=0;u=mapcitypopup.markers.length;for(mp=0;mp<u;mp++){var p=mapcitypopup.markers[mp],w=p.mk_category.planname,C='<img data-real-type="image" src="https://lh3.googleusercontent.com/-xhmo8Iinz68/VEnrYWO4eWI/AAAAAAANg80/yBuZi9jSgYc/s109/Loading3%2520small.png" data-real-src="'+p.mk_category.imgurl+'" />',A="<h4>Type: "+p.mk_category.type+"</h4>";p.areacity__="<h4>"+p.mk_category.cyname+" - "+p.mk_category.planname+
"</h4>";p.type__=A;p.audio_link=p.mk_category.audiourl;p.ismap=p.mk_category.ismap;p.img__=C;C=38<p.title.length?p.title.substr(0,35)+"...":p.title;w!=v&&(_countplans+=1,1>_countplans&&check_plandiv_load(),k.append('<tr class="pla_class" data-plan="'+_countplans+'"><th class="t0" colspan="3">'+w+'<span class="catname-head">'+q+"</span></th></tr>"),"undefined"!=typeof viewbanner1&&1==viewbanner1?_countplans<=arraydebanner1.length&&(v=arraydebanner1[_countplans-1].link,""==arraydebanner1[_countplans-
1].link&&(v="javascript:;"),k.append('<tr><td colspan="3"><div id="bannertype1_'+_countplans+'" class="bannertype1"><a href="'+v+'" target="_blank"><img class="bannertype1-inn" src="'+arraydebanner1[_countplans-1].img+'" width="100%" height="90px" /></a></div></td></tr>')):k.append('<tr><td colspan="3"><div id="bannertype1_'+_countplans+'" class="bannertype1"></div></td></tr>'));k.append('<tr id="pla_tr_'+p.mk_id+'" class="tr_pla_'+_countplans+' tr_place" data-pid="'+p.mk_id+'" data-iduniq="'+p.mk_category.idunico+
'" data-orgimg="'+p.mk_category.imgurl+'" data-rating="'+p.mk_category.rating+'"><td class="t4"><input type="checkbox" name="place" value="'+p.mk_id+'" id="place_'+p.mk_id+'" class="check_place squaredTwo squaredTwoGrande" /><label for="place_'+p.mk_id+'"></label></td><td class="placetooltip_old"  data-tipid="'+p.mk_category.idunico+'" data-tipicon="'+p.icon+'"><div><table onclick="window.top.showinfoplace(\''+p.mk_category.idunico+"','"+p.mk_id+'\', \'mapcitypopup\');" class="table show_load"><tr><td class="t3"><label onclick="window.top.showinfoplace(\''+
p.mk_category.idunico+"','"+p.mk_id+'\', \'mapcitypopup\');" class="cursor label_check"><span class="mark-title">'+C+'</span><br><div id="'+p.mk_category.idunico+'newtype" ><h4>Type:'+p.mk_category.type+'</h4></div><div id="'+p.mk_category.idunico+'newrating"></div><td class="table_img"> <div id="'+p.mk_category.idunico+'newimg"><img src="images/myezplan-free-vacation-planner.svg"/></div></td></tr></table></tr>');0<=$.inArray(p.mk_id,global_MapCityCookie)&&$("#place_"+p.mk_id+"").attr("checked",!0);
v=w}a.setCenterByBounds();setTimeout("check_plandiv_load2()",1E3);xsize>window.mbscreen&&$("#maplist-cont #lplaces-body").html($("#body_col4_canvas #menu_place").html()).promise().done($("#maplist-cont #lplaces-body .t4, #maplist-cont #lplaces-body .table_img").remove())};mapcitypopup.callBackGoogleMapCityPopup=function(a,g,h){updateMapCityCookie();mapcitypopup.showPlaces(a)}});
$(window).load(function(a){$(document).on("blur","#daynote_mi",function(a){0==$(this).val().length&&$(this).val("Add a note").addClass("watermark")}).on("focus","#daynote_mi",function(a){"Add a note"==$(this).val()&&$(this).val("").removeClass("watermark")}).val("Add a note").addClass("watermark");faqpage="mapcitypopup";placesadded=[];placesdeleted=[];placesadded2=[];placesdeleted2=[];varshowmep=!1;$(".button-show-MEP").on("click",function(a){1==varlistchanged?viewrouteforday(currentday):(a=$("#show_box2"),
varshowmep?(varshowmep=!1,$(".4").show(),$(".div_plans_route").hide(),$(".div_plans_noroute").hide(),$(".div_plans_route_label").hide(),$(".button-show-MEP").css("background-color","rgb(211, 211, 211)"),$(".button-show-MEP").html("List"),$(".wrap").css("height","100%"),a.css("position","absolute"),a.css("z-index","2"),a.css("right","0"),a.css("left","0"),a.css("border","0px"),google.maps.event.trigger(mapcitypopup.mapconfig.google.map,"resize")):(varshowmep=!0,resetdayarray(currentday),$(".4").hide(),
$("#div_plans_route").is(":empty")?$("#div_plans_route").hide():$(".div_plans_route").show(),$("#div_plans_noroute").is(":empty")?$("#div_plans_noroute").hide():$(".div_plans_noroute").show(),$(".div_plans_route_label").show(),check_image_load(),a.css("position","initial"),a.css("border","1px solid #ddd"),$(".button-show-MEP").css("background-color","rgb(23, 55, 94)"),$(".button-show-MEP").html("Map"),$(".wrap").css("height","100%")))});$(document).on("change",".check_place",function(a){var g=$.cookie("NUMDAYS");
a=1;g&&""!=g&&(a=g);var h=$.cookie("EZDATE1"),k=$.cookie("EZDATE2"),q="",u="";h&&""!=h&&(q=h);k&&""!=k&&(u=k);var p=$(this),g=$("#Calendario-mapcitypopup-pan");g.panel({close:function(a,b){closerutascalendario()}});g.show();g.panel("open");g.showLoading("Please Wait,<br/>Loading...<br/>",!1);var w=window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/mapcity_content3.cfm?rnu=5131616516651":"data_ajax/mapcity_content3.cfm?rnu=5131616516651";a={action:"calendarioplaces",ruta_id:p.val(),
date1:q,date2:u,numdays:a,source:"Mapcitypopup"};$.ajax({type:"POST",url:w,async:!0,cache:!1,data:a,success:function(a){$("#Calendario-mapcitypopup-pan .box-body").html(a).promise().done($(".mask-loading").remove());sessionStorage.calendar=a;window.lastdate1=h;window.lastdate2=k}});$(g).width();parseInt(g.css("z-index"));$(g).css({});window.reloadlastitemcal=function(){p.trigger("click")}});return!1});
function cleancurrentitin(){var a=new PNotify({title:"myezplan warnig",text:"WARNING!, this process can not be undone.\nWhat would you like to clean?",icon:"glyphicon glyphicon-question-sign",styling:"jqueryui",type:"error",hide:!1,confirm:{confirm:!0,buttons:[{text:"Days",addClass:"btn-primary",click:function(b){global_showbutton=!1;$(".ui-panel").panel("close");a.remove();cleanitidays()}},{text:"All",click:function(b){global_showbutton=!1;$(".ui-panel").panel("close");a.remove();cleanitiall()}},
{text:"Cancel",click:function(b){a.remove()}}]},buttons:{closer:!1,sticker:!1},history:{history:!1}})}
function cleanitidays(){var a=$.cookie("NUMDAYS");for(x=1;x<=a;x++)console.log(x),$.cookie("EZMAPCITYPLACES_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYPLACES_day"+x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZMAPCITYPLACES_day"+x,null),$.cookie("EZMAPCITYPLACES2_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYPLACES2_day"+x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZMAPCITYPLACES2_day"+x,null),$.cookie("EZMAPCITYSUBPLACES_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYSUBPLACES_day"+
x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZMAPCITYSUBPLACES_day"+x,null),$.cookie("EZTRANSTOPS_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZTRANSTOPS_day"+x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZTRANSTOPS_day"+x,null),$.cookie("EZTRANSPORT_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZTRANSPORT_day"+x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZTRANSPORT_day"+x,null),$.cookie("EZSERVICES_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZSERVICES_day"+x,!1,{path:"/mobile/appdata",
expires:-1}),$.cookie("EZSERVICES_day"+x,null),$.cookie("EZROUTE_day_"+x,!1,{path:"/",expires:-1}),$.cookie("EZROUTE_day_"+x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZROUTE_day_"+x,null),$.cookie("EZGOTM_day_"+x,!1,{path:"/",expires:-1}),$.cookie("EZGOTM_day_"+x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZGOTM_day_"+x,null),$.cookie("EZ_P_O_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZ_P_O_day"+x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZ_P_O_day"+x,null),$.cookie("EZNOTE_day"+
x,!1,{path:"/",expires:-1}),$.cookie("EZNOTE_day"+x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZNOTE_day"+x,null),$.cookie("EZFULLORDER_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZFULLORDER_day"+x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZFULLORDER_day"+x,null),$.cookie("EZDEALS_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZDEALS_day"+x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZDEALS_day"+x,null),$.cookie("EZPPLAN_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZPPLAN_day"+
x,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZPPLAN_day"+x,null);for(pr=1;10>=pr;pr++)$.cookie("EZPR"+pr,!1,{path:"/",expires:-1}),$.cookie("EZPR"+pr,!1,{path:"/mobile/appdata/webtest",expires:-1}),$.cookie("EZPR"+pr,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZPR"+pr,null),$.cookie("EZPR_"+pr,!1,{path:"/",expires:-1}),$.cookie("EZPR_"+pr,!1,{path:"/mobile/appdata/webtest",expires:-1}),$.cookie("EZPR_"+pr,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZPR_"+pr,null),$.cookie("EZPR"+
pr+"_S",!1,{path:"/",expires:-1}),$.cookie("EZPR"+pr,!1,{path:"/mobile/appdata/webtest",expires:-1}),$.cookie("EZPR"+pr,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZPR"+pr+"_S",null),$.cookie("EZPR_"+pr+"_S",!1,{path:"/",expires:-1}),$.cookie("EZPR_"+pr,!1,{path:"/mobile/appdata/webtest",expires:-1}),$.cookie("EZPR_"+pr,!1,{path:"/mobile/appdata",expires:-1}),$.cookie("EZPR_"+pr+"_S",null);checkplacesadd();checktransportsadd();checkservicesadd()}
function cleanitiall(){cleanitidays();$.cookie("EZDATE1",!1,{path:"/",expires:-1});$.cookie("EZDATE1",!1,{path:"/mobile/appdata/webtest",expires:-1});$.cookie("EZDATE1",null);$.cookie("EZDATE2",!1,{path:"/",expires:-1});$.cookie("EZDATE2",!1,{path:"/mobile/appdata/webtest",expires:-1});$.cookie("EZDATE2",null);$.cookie("EZIDEAS",!1,{path:"/",expires:-1});$.cookie("EZIDEAS",!1,{path:"/mobile/appdata/webtest",expires:-1});$.cookie("EZIDEAS",null);$.cookie("EZIDEAS_C",!1,{path:"/",expires:-1});$.cookie("EZIDEAS_C",
!1,{path:"/mobile/appdata/webtest",expires:-1});$.cookie("EZIDEAS_C",null);$.cookie("EZPERSONAL",!1,{path:"/",expires:-1});$.cookie("EZPERSONAL",!1,{path:"/mobile/appdata/webtest",expires:-1});$.cookie("EZPERSONAL",null);$.cookie("EZRUTASPLACES",!1,{path:"/",expires:-1});$.cookie("EZRUTASPLACES",!1,{path:"/mobile/appdata/webtest",expires:-1});$.cookie("EZRUTASPLACES",null);$.cookie("NUMDAYS",!1,{path:"/",expires:-1});$.cookie("NUMDAYS",!1,{path:"/mobile/appdata/webtest",expires:-1});$.cookie("NUMDAYS",
!1,{path:"/mobile/appdata",expires:-1});$.cookie("NUMDAYS",null)}$(window).load(function(){var a=$("#show_box2").offset().top,b=function(){var b=$(window).scrollTop();"none"!=$("#div_plans_route").css("display")&&(b>a?$("#show_box2").css("position","fixed"):$("#show_box2").css("position","initial"))};b();$(window).scroll(function(){b()})});function Showmemore(a){$("#"+a).slideToggle(0)}
function resetdayarray(a,b){b||(b="list");arg_mapconfig=mapcitypopup.mapconfig;var g=$.cookie("EZFULLORDER_day"+a),h=$.cookie("EZMAPCITYPLACES_day"+a);g&&""!=g&&(h=g);idsnoroute=[];varnumenruta=0;var k=$.cookie("EZMAPCITYPLACES2_day"+a);k&&""!=k&&(idsnoroute=k.split(","));var k=$.cookie("EZTRANSPORT_day"+a),q=$.cookie("EZTRANSPORT_S_day"+a),u=$.cookie("EZSERVICES_day"+a);estediarutamarkers=[];if(h&&""!=h){var p=h.split(",");for(c=0;c<p.length;c++)if(0>p[c].indexOf("t")&&0>p[c].indexOf("s")){if(40<
p[c]){for(mm=0;mm<arg_mapconfig.markers.length;mm++){var w=!1;if(arg_mapconfig.markers[mm].mk_id==p[c]){w=!0;arg_mapconfig.markers[mm].setVisible(!0);arg_mapconfig.markers[mm].mk_type=1;v=arg_mapconfig.markers[mm];Plan_Bounds.extend(v.getPosition());h=v.title.length;30<h&&v.title.substr(0,30);for(no=h=0;no<idsnoroute.length;no++)parseInt(p[c])==parseInt(idsnoroute[no])&&(h=1);v.genid=p[c];0==h?(varnumenruta+=1,v.listpos=c,v.setIcon("ezmapas/maps_pics/basic/"+varnumenruta+".png"),estediarutamarkers.push(v),
$("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table"))}}if(!w)for(xx=0;xx<othercityarray.length;xx++)if(othercityarray[xx].mk_id==p[c]){othercityarray[xx].setMap(mapcitypopup.mapconfig.google.map);othercityarray[xx].mk_type=1;v=othercityarray[xx];Plan_Bounds.extend(v.getPosition());h=v.title.length;30<h&&v.title.substr(0,30);for(no=
h=0;no<idsnoroute.length;no++)parseInt(p[c])==parseInt(idsnoroute[no])&&(h=1);v.genid=p[c];0==h?(varnumenruta+=1,v.setIcon("ezmapas/maps_pics/basic/"+varnumenruta+".png"),v.listpos=c,estediarutamarkers.push(v),$("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table"))}}if(11>p[c]){h=$.cookie("EZPERSONAL");h=h.split("!");h[p[c]-1].split("*");
var v=personalmrks[p[c]-1];Plan_Bounds.extend(v.getPosition());v.mk_type=2;v.setVisible(!0);v.setOptions({draggable:!1});for(no=h=0;no<idsnoroute.length;no++)parseInt(p[c])==parseInt(idsnoroute[no])&&(h=1);v.genid=p[c];0==h?(varnumenruta+=1,v.setIcon("ezmapas/maps_pics/basic/"+varnumenruta+".png"),v.listpos=c,estediarutamarkers.push(v),$("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+p[c]+" table").removeClass(),
$("#div_route_"+a+"_"+p[c]+" table").addClass("table"))}if(10<p[c]&&21>p[c]){var C=p[c]-10,h=$.cookie("EZPR_"+C),h=h.split("!");for(pm=0;pm<personalroutesmarks.length;pm++)personalroutesmarks[pm].id==p[c]-10&&(personalroutesmarks[pm].setVisible(!0),personalroutespolylines[pm].setVisible(!0),v=personalroutesmarks[pm]);Plan_Bounds.extend(v.getPosition());v.mk_type=3;for(no=h=0;no<idsnoroute.length;no++)parseInt(p[c])==parseInt(idsnoroute[no])&&(h=1);v.genid=p[c];0==h?(varnumenruta+=1,v.setIcon("ezmapas/maps_pics/basic/"+
varnumenruta+".png"),v.listpos=c,estediarutamarkers.push(v),$("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table"))}if(20<p[c]&&31>p[c]){C=p[c]-21;ideasroutesmarks[C].setVisible(!0);$.each(arrayideasr,function(a,b){arrayideasr[a].added_index==C&&1==arrayideasr[a].added&&arrayideasr[a].setVisible(!0)});$.cookie("EZIDEAS_C").split("!")[C].split("*");
v=ideasroutesmarks[C];Plan_Bounds.extend(v.getPosition());v.mk_type=4;v.id=p[c];for(no=h=0;no<idsnoroute.length;no++)parseInt(p[c])==parseInt(idsnoroute[no])&&(h=1);v.genid=p[c];0==h?(varnumenruta+=1,v.setIcon("ezmapas/maps_pics/basic/"+varnumenruta+".png"),v.listpos=c,estediarutamarkers.push(v),$("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table"))}if("undefined"!=
typeof arraymstuff){var A=estediarutamarkers.length||0,A=A-1;$.each(arraymstuff,function(b,g){if(arraymstuff[b].msid==p[c]){var h=arraymstuff[b].msid,k=0;for(no=0;no<idsnoroute.length;no++)h==idsnoroute[no]&&(k=1);0==k?(A+=1,arraymstuff[b].listpos=c,Plan_Bounds.extend(arraymstuff[b].getPosition()),estediarutamarkers.push(arraymstuff[b]),$("#div_route_"+a+"_"+h+" table").removeClass(),$("#div_route_"+a+"_"+h+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+h+" table").removeClass(),$("#div_route_"+
a+"_"+h+" table").addClass("table"))}})}"undefined"!=typeof arraydeals&&(console.log("arr deals"),A=estediarutamarkers.length||0,--A,$.each(arraydeals,function(b,g){if(arraydeals[b].did==p[c]){var h=arraydeals[b].did,k=0;for(no=0;no<idsnoroute.length;no++)h==idsnoroute[no]&&(k=1);0==k?(console.log("adding to route"),A+=1,arraydeals[b].listpos=c,Plan_Bounds.extend(arraydeals[b].getPosition()),estediarutamarkers.push(arraydeals[b]),$("#div_route_"+a+"_"+h+" table").removeClass(),$("#div_route_"+a+"_"+
h+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+h+" table").removeClass(),$("#div_route_"+a+"_"+h+" table").addClass("table"))}}))}else{if(-1<p[c].indexOf("t")){var G=p[c].replace("t",""),B=[];q&&""!=q&&(B=q.split(","));var E=[];traesdeestaciudad=!1;$.each(arraydetransports,function(b,g){if(parseInt(arraydetransports[b].rid)===parseInt(G)){traesdeestaciudad=!0;var h=0;for(no=0;no<idsnoroute.length;no++)p[c]==idsnoroute[no]&&(h=1);if(1==parseInt(arraydetransports[b].type))for(st=0;st<
arraydetransports[b].arraystops.length;st++)for(cs=0;cs<B.length;cs++)Plan_Bounds.extend(arraydetransports[b].arraystops[st].getPosition()),parseInt(B[cs])==parseInt(arraydetransports[b].arraystops[st].id_)&&E.push(arraydetransports[b].arraystops[st].nombre);else Plan_Bounds.extend(arraydetransports[b].getPosition());var k=E.join(", ");arraydetransports[b].mk_type=10;40<k.length&&k.substring(0,36);arraydetransports[b].genid=p[c];0==h?(estediarutamarkers.push(arraydetransports[b]),arraydetransports[b].setVisible(!0),
arraydetransports[b].listpos=c,$("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table"))}});if(!traesdeestaciudad)for(index=0;index<otherarraytrans.length;index++)if(parseInt(otherarraytrans[index].rid)===parseInt(G)){console.log("ths tra");for(no=h=0;no<idsnoroute.length;no++)p[c]==idsnoroute[no]&&(h=1);if(1==parseInt(otherarraytrans[index].type))for(st=
0;st<otherarraytrans[index].arraystops.length;st++)for(cs=0;cs<B.length;cs++)Plan_Bounds.extend(otherarraytrans[index].arraystops[st].getPosition()),parseInt(B[cs])==parseInt(otherarraytrans[index].arraystops[st].id_)&&E.push(otherarraytrans[index].arraystops[st].nombre);else Plan_Bounds.extend(otherarraytrans[index].getPosition());var F=E.join(", ");otherarraytrans[index].mk_type=10;40<F.length&&(F=F.substring(0,36)+"...");otherarraytrans[index].genid=p[c];0==h?(estediarutamarkers.push(otherarraytrans[index]),
otherarraytrans[index].setVisible(!0),otherarraytrans[index].listpos=c,$("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table"))}}if(-1<p[c].indexOf("s")&&(console.log("serv no order"),servesdeestaciudad=!1,G=p[c].replace("s",""),$.each(arraydeservices,function(b,g){if(parseInt(arraydeservices[b].sid)==parseInt(G)){servesdeestaciudad=
!0;var h=0;for(no=0;no<idsnoroute.length;no++)p[c]==idsnoroute[no]&&(h=1);arraydeservices[b].genid=p[c];0==h?(arraydeservices[b].setVisible(!0),arraydeservices[b].mk_type=11,console.log(c),arraydeservices[b].listpos=c,Plan_Bounds.extend(arraydeservices[b].getPosition()),estediarutamarkers.push(arraydeservices[b]),$("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+
"_"+p[c]+" table").addClass("table"))}}),!servesdeestaciudad))for(console.log("serv other"),index=0;index<otherarrayserv.length;index++)if(parseInt(otherarrayserv[index].sid)==parseInt(G)){for(no=h=0;no<idsnoroute.length;no++)p[c]==idsnoroute[no]&&(h=1);otherarrayserv[index].genid=p[c];0==h?(otherarrayserv[index].setVisible(!0),otherarrayserv[index].mk_type=11,otherarrayserv[index].listpos=c,Plan_Bounds.extend(otherarrayserv[index].getPosition()),estediarutamarkers.push(otherarrayserv[index]),$("#div_route_"+
a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table table_"+c)):($("#div_route_"+a+"_"+p[c]+" table").removeClass(),$("#div_route_"+a+"_"+p[c]+" table").addClass("table"))}}}if(!g||""==g){A=estediarutamarkers.length||0;--A;if(k&&""!=k){console.log("tra");var I=k.split(","),B=[];q&&""!=q&&(B=q.split(","));for(cc=0;cc<I.length;cc++)if(A+=1,E=[],$.each(arraydetransports,function(b,g){if(parseInt(arraydetransports[b].rid)===parseInt(I[cc])){var h=0;for(no=0;no<idsnoroute.length;no++)"t"+
I[cc]==idsnoroute[no]&&(h=1);if(1==parseInt(arraydetransports[b].type))for(st=0;st<arraydetransports[b].arraystops.length;st++)for(cs=0;cs<B.length;cs++)Plan_Bounds.extend(arraydetransports[b].arraystops[st].getPosition()),parseInt(B[cs])==parseInt(arraydetransports[b].arraystops[st].id_)&&E.push(arraydetransports[b].arraystops[st].nombre);else Plan_Bounds.extend(arraydetransports[b].getPosition());var k=E.join(", ");40<k.length&&k.substring(0,36);arraydetransports[b].mk_type=10;arraydetransports[b].genid=
p[c];console.log(h);0==h&&(console.log("add tra"),arraydetransports[b].setVisible(!0),arraydetransports[b].listpos=A,estediarutamarkers.push(arraydetransports[b]),$("#div_route_"+a+"_t"+p[c]+" table").addClass("table_"+c))}}),!traesdeestaciudad)for(index=0;index<otherarraytrans.length;index++)if(parseInt(otherarraytrans[index].rid)===parseInt(I[cc])){console.log("ths tra");for(no=h=0;no<idsnoroute.length;no++)"t"+I[cc]==idsnoroute[no]&&(h=1);if(1==parseInt(otherarraytrans[index].type))for(st=0;st<
otherarraytrans[index].arraystops.length;st++)for(cs=0;cs<B.length;cs++)Plan_Bounds.extend(otherarraytrans[index].arraystops[st].getPosition()),parseInt(B[cs])==parseInt(otherarraytrans[index].arraystops[st].id_)&&E.push(otherarraytrans[index].arraystops[st].nombre);else Plan_Bounds.extend(otherarraytrans[index].getPosition());F=E.join(", ");40<F.length&&(F=F.substring(0,36)+"...");otherarraytrans[index].mk_type=10;otherarraytrans[index].genid=p[c];0==h&&(estediarutamarkers.push(otherarraytrans[index]),
otherarraytrans[index].setVisible(!0),otherarraytrans[index].listpos=A,$("#div_route_"+a+"_t"+p[c]+" table").addClass("table_"+c))}}if(u&&""!=u)for(console.log("serves"),p=u.split(","),c=0;c<p.length;c++)if(servesdeestaciudad=!1,A+=1,$.each(arraydeservices,function(b,g){if(parseInt(arraydeservices[b].sid)==parseInt(p[c])){servesdeestaciudad=!0;var h=0;for(no=0;no<idsnoroute.length;no++)"s"+p[c]==idsnoroute[no]&&(h=1);arraydeservices[b].genid=p[c];0==h&&(arraydeservices[b].setVisible(!0),arraydeservices[b].mk_type=
11,arraydeservices[b].listpos=A,Plan_Bounds.extend(arraydeservices[b].getPosition()),estediarutamarkers.push(arraydeservices[b]),$("#div_route_"+a+"_s"+p[c]+" table").addClass("table_"+A))}}),!servesdeestaciudad)for(console.log("serv other"),index=0;index<otherarrayserv.length;index++)if(parseInt(otherarrayserv[index].sid)==parseInt(p[c])){for(no=h=0;no<idsnoroute.length;no++)"s"+p[c]==idsnoroute[no]&&(h=1);otherarrayserv[index].genid=p[c];0==h&&(otherarrayserv[index].setVisible(!0),otherarrayserv[index].mk_type=
11,otherarrayserv[index].listpos=A,Plan_Bounds.extend(otherarrayserv[index].getPosition()),estediarutamarkers.push(otherarrayserv[index]),$("#div_route_"+a+"_s"+p[c]+" table").addClass("table_"+A))}}"list"==b&&($("#div_plans_route").is(":empty")?$("#div_plans_route").hide():$("#div_plans_route").show(),$("#div_plans_noroute").is(":empty")?$("#div_plans_noroute").hide():$("#div_plans_noroute").show())}window.myezplan=window.myezplan||{};myezplan.maps=myezplan.maps||{};
myezplan.maps.config=function(){this.canvasmap=null;this.canvasdirections=$("#wrapperbody_direction #directionsPanel").get([0]);this.endpoint=this.startpoint=null;this.markers=[];this.waypoints=[];this.maptravelmode="WALKING";this.mapcenter=null;this.mapzoom=8;this.mapchanged=!0;this.places={pl:[],plse:[],plom:[],sp:"",ep:"",gotm:"WALKING",upid:"0",userselection:{changed:!1,sp:"",ep:""}};this.google={map:null,mapoptions:{zoom:this.mapzoom,center:this.mapcenter,zoomControl:!0,navigationControl:!0,
scaleControl:!1,mapTypeControl:!1,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},renderoptions:{map:null,suppressMarkers:!1,suppressInfoWindows:!1},geocoder:new google.maps.Geocoder,directionsservice:new google.maps.DirectionsService,directionsdisplay:null,routerequest:{}};myezplan.maps.config.prototype.updateMapConfig=function(){this.google.mapoptions.zoom=this.mapzoom;this.google.mapoptions.center=this.mapcenter;""!=this.places.sp&&(this.startpoint=this.getMarkerPosition(this.places.sp));
""!=this.places.ep&&(this.endpoint=this.getMarkerPosition(this.places.ep))};myezplan.maps.config.prototype.addGoogleMap=function(a){this.google.map=a;this.google.renderoptions.map=a;$.each(this.markers,function(b,g){g.setMap(a)});this.google.directionsdisplay=new google.maps.DirectionsRenderer(this.google.renderoptions);drawpoly(a);this.setCenterByBounds()};myezplan.maps.config.prototype.setCenterByBounds=function(){if(0==this.markers.length)return!1;var a=new google.maps.LatLngBounds;$.each(this.markers,
function(b,g){g.visible&&a.extend(g.getPosition())});var b=$.cookie("EZPERSONAL");if(b&&""!=b)for(b=b.split("!"),co=0;co<b.length;co++){var g=b[co].split("*")[1].replace("(","").replace(")","").split(","),g=new google.maps.LatLng(parseFloat(g[0]),parseFloat(g[1]));a.extend(g)}if(a.isEmpty())return!1;this.google.map.fitBounds(a);return!0};myezplan.maps.config.prototype.updateRouteConfig=function(){""==$.trim(this.startpoint)&&""!=$.trim(this.places.sp)&&(this.startpoint=this.getMarkerPosition(this.places.sp));
""==$.trim(this.endpoint)&&""!=$.trim(this.places.ep)&&(this.endpoint=this.getMarkerPosition(this.places.ep));this.google.routerequest={origin:this.startpoint,destination:this.endpoint,waypoints:this.waypoints,travelMode:this.maptravelmode,optimizeWaypoints:!0}};myezplan.maps.config.prototype.getMarkerByPlaceId=function(a){var b={index:null,marker:null};$.each(this.markers,function(g,h){if(h.mk_id==a)return b.index=g,b.marker=h,!1});return b};myezplan.maps.config.prototype.getMarkerPosition=function(a){return(a=
this.getMarkerByPlaceId(a))?a.marker.position:null}};"function"==typeof geoip_latitude&&(myezplan.maps.locationbase=new google.maps.LatLng(geoip_latitude(),geoip_longitude()));
myezplan.maps.initializeGoogleMap=function(a,b){var g={status:"OK",errormessage:""};null==a.canvasmap&&(g.status="ERROR",g.errormessage="there is no canvas selected");"OK"==g.status&&(null==a.mapcenter&&(a.mapcenter=myezplan.maps.locationbase),0==a.markers.length&&(a.mapzoom=14,myezplan.maps.createMyezplanMarker(0,a.mapcenter,"Close By",null,null,a.markers)),a.updateMapConfig(),a.addGoogleMap(new google.maps.Map(a.canvasmap,a.google.mapoptions)));b&&"function"==typeof b&&b(a,g.status,g)};
function array_unique(a){return a.filter(function(a,g,h){return 0>this.indexOf(a)?(this.push(a),!0):!1},[])}var puntospan=[],waypts=[],waypts2=[],waypts3=[],startpunto=[],endpunto=[],order,rutacompleta,marc_limite;
myezplan.maps.calculateGoogleRoute=function(a,b){var g={status:"OK",errormessage:""};a.updateMapConfig();a.updateRouteConfig();$(a.canvasdirections).empty();if(""==$.trim(a.startpoint)||""==$.trim(a.endpoint))g.status="ERROR",g.errormessage="there is no start point or end point";$.trim(a.startpoint)==$.trim(a.endpoint)&&0==a.waypoints.length&&(g.status="ERROR",g.errormessage="start point and end point are the same and no waypoints");"OK"==g.status?a.google.directionsservice.route(a.google.routerequest,
function(h,k){startpunto.push(a.startpoint);endpunto.push(a.endpoint);var q=h.routes[0].legs;order=h.routes[0].waypoint_order;for(u=0;u<q.length;u++)0==u?waypts2.push(q[u].start_location):waypts3.push(q[u].start_location),puntos=a.waypoints;for(var u=0;u<order.length;u++)puntospan.push(waypts3[u]);puntospan=array_unique(puntospan);startpunto=array_unique(startpunto);endpunto=array_unique(endpunto);rutacompleta=startpunto.concat(puntospan,endpunto);marc_limite=rutacompleta.length;k==google.maps.DirectionsStatus.OK?
(a.google.directionsdisplay.setDirections(h),a.google.directionsdisplay.setPanel(a.canvasdirections)):g.status=k;b&&"function"==typeof b&&b(g.status,g)}):b&&"function"==typeof b&&b(g.status,g)};var marcador=0;
$(document).ready(function(){$(".next_marker").click(function(){mapcity.mapconfig.google.map.setZoom(18);marcador!=marc_limite&&(marcador++,mapcity.mapconfig.google.map.panTo(rutacompleta[marcador-1]))});$(".back_marker").click(function(){1!=marcador&&0!=marcador&&(marcador--,mapcity.mapconfig.google.map.panTo(rutacompleta[marcador-1]))});$(".reset_nav").click(function(){mapcity.routeMap();marcador=0})});
myezplan.maps.createMyezplanMarker=function(a,b,g,h,k,q,u){var p=$.isArray(q);u="boolean"==$.type(u)?u:!0;b=new google.maps.Marker({position:b,title:g,icon:h});b.mk_id="";b.mk_category={category:"0"};""!=a&&(b.mk_id=a);null!=k&&(b.mk_category=k);p&&q.push(b);b.setVisible(u);return b};myezplan.maps.showInfoplaceMyezplanMarker=function(a,b,g,h){google.maps.event.addListener(a,"click",function(){window.top.showinfoplace(b,g,h)})};
myezplan.maps.showInfoWindow=function(a,b,g,h){var k=this;k.infoWindowMap;google.maps.event.addListener(a,"click",function(){k.infoWindowMap&&k.infoWindowMap.close();k.infoWindowMap=new google.maps.InfoWindow({content:b});k.infoWindowMap.open(a.map,a);g&&"function"==typeof g&&g(h,a)})};myezplan.maps.cleanRouteDirections=function(){$(arg_mapconfig.canvasdirections).empty()};
myezplan.maps.showSteps=function(a,b){for(var g=b.routes[0].legs[0],h=0;h<g.steps.length;h++){var k=new google.maps.Marker({position:g.steps[h].start_point,map:a});myezplan.maps.attachInstructionText(a,k,g.steps[h].instructions)}};myezplan.maps.attachInstructionText=function(a,b,g){google.maps.event.addListener(b,"click",function(){stepDisplay.setContent(g);stepDisplay.open(a,b)})};Close_reportaproblem=function(){$("#mask-reportview").fadeOut(300);$("#mask-reportview").empty();$("#mask-reportview").remove()};


function Open_reportaproblem_p(a){

    /*
    $("body").append('<div id="mask-reportview" class="mask-reportview" align="center"><div style="background-color: white;width:95%;max-width:700px;margin-top:50px;-webkit-box-shadow: 0px 0px 15px 4px #eee;-webkit-border-radius: 16px 16px 16px 16px;"><h1 style="text-align:center;"><span class="capitalize_red">R</span>eport a Problem<img style="float:right; padding-right:10px;" height="35px" src="https://lh5.googleusercontent.com/-Cb5dhSGmMSA/U5I5STA1muI/AAAAAAANfGk/1rOXlx8756Q/s52/Untitled8.png" onclick="Close_reportaproblem();"></h1><div id="reportaproblem-content"></div></div></div>');
var b=parseInt($("#roadmapplace-box").css("z-index"))+5;$("#mask-reportview").css({"z-index":b});$("#mask-reportview").fadeIn(300);a={action:"reportaproblem_p",plid:a,user:cf_sid};$("#reportaproblem-content").load("https://myezplan.com/data_ajax/reportaproblem_content.cfm",a,function(a,b,k){switch(b){case "error":Close_reportaproblem()}})}function ideasrouteclick(a){if("mapcity"!=faqpage){var b=arrayideasr[a].id,g=1;""==arrayideasr[a].desc_&&(g=0);ideasroutedetails(b,g)}
    */

}


function ideasrouteover(a){arrayideasr[a].setOptions({strokeColor:"#000000"});$(".ideasrow_"+a).css("background-color","rgb(211, 211, 211)")}function ideasrouteout(a){arrayideasr[a].setOptions({strokeColor:arrayideasr[a].color});1==arrayideasr[a].added?$(".ideasrow_"+a).css("background-color","rgb(169, 169, 169)"):$(".ideasrow_"+a).css("background-color","")}
function armatextolistaideas(){var a="";for(l=0;l<textolistaideas.length;l++)a+=textolistaideas[l];a='<table style="border-collapse:collapse;">'+a+"</table>";$("#listadeideas").html(a);$("#listadeideas").show()}
function textodepersonales(){var a="";for(pm=0;pm<personalmrks.length;pm++)a=a+'<tr class="personalmrk_'+pm+'" onmouseover="mrkpersonalover('+(pm+1)+');" onmouseout="mrkpersonalout('+(pm+1)+');" onclick="mrkpersonalclick('+(pm+1)+');"><td style="width:40px;text-align:center;"><img src="'+personalmrks[pm].getIcon()+'" height="35px;"></td><td>'+personalmrks[pm].getTitle()+"</td></tr>";a='<div style="max-height:350px; overflow:auto; padding: 5px 5px 5px 5px;max-width: 670px;width:90%;border: solid 2px #ddd;margin:5px;"><table style="border-collapse:collapse;">'+
a+"</table></div>";$("#transport_descs").html(a)}function mrkpersonalover(a){--a;personalmrks[a].setAnimation(google.maps.Animation.BOUNCE);$(".personalmrk_"+a).css("background-color","rgb(169, 169, 169)")}function mrkpersonalout(a){--a;personalmrks[a].setAnimation(null);$(".personalmrk_"+a).css("background-color","")}
function mrkpersonalclick(a){var b=a-1;beforezoom=mapcitypopup.mapconfig.google.map.getZoom();beforecenter=mapcitypopup.mapconfig.google.map.getCenter();personalmrks[b].userinfowindow.open(mapcitypopup.mapconfig.google.map,personalmrks[b]);var g=personalmrks[b].map.center.G,h=personalmrks[b].map.center.K,k=personalmrks[b].title;mapcitypopup.mapconfig.google.map.setCenter(personalmrks[b].map.center);mapcitypopup.mapconfig.google.map.setZoom(15);$("#body_map_canvas .gm-style").removeClass("gmstylefull");
a='<div style="padding: 5px 5px 5px 5px;max-width: 670px;width:95%;" class="box-gray-c"><table><tbody><tr><td><img height="35" src="ezmapas/maps_pics/basic/userplace.png"></td><td><span style="font-weight:bold;color:#c00000;">'+k+'</span></td></tr></tbody></table><span><a id="buttdel_ir_2" value="Eliminate" onclick="deletepersonal_ya(\''+k+"',"+a+');" style=""><img src="https://lh4.googleusercontent.com/-J8QLIopkdW4/VOdmvVtfapI/AAAAAAANhJA/FcImfqWSudY/s46/basura3.png" height="35">&nbsp;</a></span><span><a value="Edit" onclick="opencalforpersonals(\''+
k+"',"+a+');"><img src="https://lh3.googleusercontent.com/-FfGsgqD06X4/VEm0BLONY7I/AAAAAAANg7k/2JnRmAw-7_s/s55/183.png" height="35"></a></span>&nbsp;<span><a href="javascript:;" class="" style="" onclick="sugestplace(\''+k+"','("+g+","+h+")',"+window.citid+');" title="" alt="Close Window alt"><img height="35px" src="https://lh6.googleusercontent.com/-m5bw1hqOADw/VNQWdgi3lpI/AAAAAAANhG8/CjBIzmgVm3g/s45/Suggestions%2520Active.png"></a></span>&nbsp;<span><a href="javascript:;" style="font-weight:bold;" onclick="returnfrompp('+
b+');"><img src="https://lh5.googleusercontent.com/-Cb5dhSGmMSA/U5I5STA1muI/AAAAAAANfGk/1rOXlx8756Q/s52/Untitled8.png" style="" height="35px"></a></span></div>';closesubroutedata();$("#transport_descs").append(a)}function eliminateindexestrans(a){var b=-1;for(d=0;d<listadetrans_ids.length;d++)listadetrans_ids[d]==a&&(b=d);return b}
function eliminatetransfromlist(a){ids_=a.split(",");for(x=0;x<ids_.length;x++)a=eliminateindexestrans(ids_[x]),listadetrans_ids.splice(a,1),listadetrans.splice(a,1),x==ids_.length-1&&showtranslist()}function eliminateindexesserv(a){var b=-1;for(d=0;d<listadeserv_ids.length;d++)listadeserv_ids[d]==a&&(b=d);return b}
function eliminateservfromlist(a){ids_=a.split(",");for(x=0;x<ids_.length;x++)a=eliminateindexesserv(ids_[x]),listadeserv_ids.splice(a,1),listadeserv.splice(a,1),x==ids_.length-1&&showservlist()}
function showtranslist(){var a='<table id="list-trans">';for(t=0;t<listadetrans.length;t++)a+=listadetrans[t];a+="</table>";0<listadetrans.length?$("#transport_descs").html('<div class="transervlt-cont" style="padding: 5px 5px 5px 5px;max-width: 670px;" class="box-gray-c">'+a+"</div>"):$("#transport_descs").html("")}
function showservlist(){var a='<table id="list-serv">';for(t=0;t<listadeserv.length;t++)a+=listadeserv[t];a+="</table>";0<listadeserv.length?$("#transport_descs").html('<div class="transervlt-cont" style="padding: 5px 5px 5px 5px;max-width: 670px;" class="box-gray-c">'+a+"</div>"):$("#transport_descs").html("")}
function trasportselected(a){var b=0,g=$.cookie("NUMDAYS"),h=1;g&&""!=g&&(h=g);for(n=1;n<=h;n++)if((g=$.cookie("EZTRANSPORT_day"+n))&&""!=g)for(g=g.split(","),t=0;t<g.length;t++)g[t]==a&&(b=1);return b}function trasportselected_day(a,b){var g=0,h=$.cookie("EZTRANSPORT_day"+b);if(h&&""!=h)for(h=h.split(","),t=0;t<h.length;t++)h[t]==a&&(g=1);return g}
function servicesselected(a){var b=0,g=$.cookie("NUMDAYS"),h=1;g&&""!=g&&(h=g);for(n=1;n<=h;n++)if((g=$.cookie("EZSERVICES_day"+n))&&""!=g)for(g=g.split(","),t=0;t<g.length;t++)g[t]==a&&(b=1);return b}
function drawpersonalroutes(){var a=[];for(pr=1;10>=pr;pr++){var b=$.cookie("EZPR_"+pr);if(b&&""!=b){if(1==pr)var g="#FF00FF",h="https://lh6.googleusercontent.com/-8xxqF9thOCg/U9nRcchbb_I/AAAAAAANgBg/C77KoahO1Sc/s44/64.png";2==pr&&(g="#00FFCC",h="https://lh3.googleusercontent.com/-Tx9ASyR-Pm0/U9nRcry7fQI/AAAAAAANgB4/S4-sPOCQyv4/s44/66.png");3==pr&&(g="#6600CC",h="https://lh3.googleusercontent.com/-Y2nKnJNaweg/U9nRcP8BO4I/AAAAAAANgBc/nnLGfRYqBm8/s45/65.png");4==pr&&(g="#FF0033",h="https://lh5.googleusercontent.com/-E1dAbz_GUo8/U9nRfXIuR0I/AAAAAAANgCw/x-ZRzX81FTM/s44/72.png");
5==pr&&(g="#99CC33",h="https://lh4.googleusercontent.com/-Npa9fnZ8jsI/U9nRgTkZovI/AAAAAAANgCg/RYgxYCvC1as/s44/74.png");6==pr&&(g="#009999",h="https://lh3.googleusercontent.com/-yVml473bYZ4/U9nRhTGcy6I/AAAAAAANgC8/b_xcPHU1RM0/s44/77.png");7==pr&&(g="#FF6600",h="https://lh6.googleusercontent.com/-_APxQcrJomA/U9nRhG6kRZI/AAAAAAANgCo/aCfSRKHPbO4/s44/76.png");8==pr&&(g="#666600",h="https://lh6.googleusercontent.com/-f05N3TVBgaQ/U9nReUw3BJI/AAAAAAANgCI/Wqev2rAqxDI/s44/70.png");9==pr&&(g="#989898",h="https://lh6.googleusercontent.com/-gjaXgjiHqzc/U9nRgg5WKcI/AAAAAAANgCk/TQs3DftLy1U/s44/75.png");
10==pr&&(g="#FF0000",h="https://lh6.googleusercontent.com/-io7fsMrgN34/U9nRenFm-_I/AAAAAAANgCE/zbAnDMFVe4Q/s44/71.png");var b=b.split("!"),k=b[1],q=[];q.push(b[0]);q.push(k);q.push(pr);q.push(g);q.push(h);a.push(q)}}map_pr(a,0)}
function placeMarker_proute(a,b,g,h,k){a=new google.maps.Marker({position:a,icon:k,map:mapcitypopup.mapconfig.google.map,title:b,draggable:!1});a.id=g;a.icono=k;personalroutesmarks.push(a);google.maps.event.addListener(a,"click",function(){console.log("userroutemarker click");showprdata(g,b)})}
function placeMarker(a){var b=prompt("Please enter Place name",""),g=b||"";if(!g||""==g)return myezAlert.render("Not a valid name, please try again"),!1;var h=$.cookie("EZPERSONAL");if(h&&""!=h){h=h.split("!");if(10<=h.length)return myezAlert.render("You have reached the max(10) of personal points"),!1;placesadded2.push(h.length+1)}else placesadded2.push(1);var k=new google.maps.Marker({position:a,icon:"ezmapas/maps_pics/basic/userplace.png",map:mapcitypopup.mapconfig.google.map,draggable:!0});k.setTitle(g.toString());
k.orignumber=personalmrks.length+1;personalmrks.push(k);h=(h=$.cookie("EZPERSONAL"))&&""!=h?h+"!"+b+"*"+a:b+"*"+a;$.cookie("EZPERSONAL",h);k.userinfowindow=new google.maps.InfoWindow({content:'<table><tr><th align="center">'+b+'</th></tr><tr><td align="center"><input type="button" value="Delete" onclick="deletepersonal(\''+b+"',"+personalmrks.length+');"></td></tr><tr><td align="center"><input type="button" value="Edit Dates" onclick="opencalforpersonals(\''+b+"',"+personalmrks.length+');"></td></tr><tr><td align="center"><input type="button" value="Suggest" onclick="sugestplace(\''+
b+"','"+a+"',"+city_id_var+');"></td></tr></table>',size:new google.maps.Size(150,150)});google.maps.event.addListener(k,"click",function(){mrkpersonalclick(k.orignumber)});google.maps.event.addListener(k,"mouseover",function(){mrkpersonalover(k.orignumber)});google.maps.event.addListener(k,"mouseout",function(){mrkpersonalout(k.orignumber)});google.maps.event.addListener(k,"dragend",function(){updatecoor(k.getTitle(),k.getPosition())});"undefined"!=typeof global_showbutton&&global_showbutton&&(global_showbutton=
!1,mapcitypopup.showSelPlaces());opencalforpersonals(g,personalmrks.length);textodepersonales()}

function opencalforpersonals(a,b){for(m=0;m<personalmrks.length;m++)personalmrks[m].getTitle()==a&&personalmrks[m].orignumber==b&&(idx=m+1);var g=$.cookie("NUMDAYS"),h=1;g&&""!=g&&(h=g);var k=$.cookie("EZDATE1"),q=$.cookie("EZDATE2"),u=g="";k&&""!=k&&(g=k);q&&""!=q&&(u=q);var p=$("#Calendario-mapcitypopup-pan");p.panel({close:function(a,b){}});p.show();p.panel("open");p.showLoading("Please Wait,<br/>Loading...<br/>",!1);$.ajax({type:"POST",url:window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/mapcity_content3.cfm?rnu=5131616516651":
    "data_ajax/mapcity_content3.cfm?rnu=5131616516651",async:!0,cache:!1,data:{action:"calendarioplaces",ruta_id:idx,date1:g,date2:u,numdays:h,source:"Mapcitypopup_p",name:a},success:function(a){$("#Calendario-mapcitypopup-pan .box-body").html(a).promise().done($(".mask-loading").remove());sessionStorage.setItem("calendarpp"+idx,a);window.lastdate1=k;window.lastdate2=q}});$(p).width();parseInt(p.css("z-index"));$(p).css({});window.reloadlastitemcal=function(){opencalforpersonals(a,b)}}

function placeMarker2(a,b){var g=new google.maps.Marker({position:b,icon:"ezmapas/maps_pics/basic/userplace.png",map:mapcitypopup.mapconfig.google.map,title:a,draggable:!0});personalmrks.push(g);g.orignumber=personalmrks.length;g.userinfowindow=new google.maps.InfoWindow({content:'<table><tr><th align="center">'+a+'</th></tr><tr><td align="center"><input type="button" value="Delete" onclick="deletepersonal_ya(\''+a+"',"+personalmrks.length+');"></td></tr><tr><td align="center"><input type="button" value="Edit Dates" onclick="opencalforpersonals(\''+
a+"',"+personalmrks.length+');"></td></tr><tr><td align="center"><input type="button" value="Suggest" onclick="sugestplace(\''+a+"','"+b+"',"+city_id_var+');"></td></tr></table>',size:new google.maps.Size(150,150)});google.maps.event.addListener(g,"click",function(){mrkpersonalclick(g.orignumber)});google.maps.event.addListener(g,"mouseover",function(){mrkpersonalover(g.orignumber)});google.maps.event.addListener(g,"mouseout",function(){mrkpersonalout(g.orignumber)});google.maps.event.addListener(g,
"dragend",function(){updatecoor(g.getTitle(),g.getPosition())});"undefined"!=typeof global_showbutton&&global_showbutton&&(global_showbutton=!1,mapcitypopup.showSelPlaces())}function updatecoor(a,b){var g=(a+"*"+b).replace(/ /g,""),h=$.cookie("EZPERSONAL");if(h&&""!=h){var h=h.split("!"),k="";for(co=0;co<h.length;co++)var q=h[co].split("*")[0],u=""==k?"":"!",k=q!=a?k+u+h[co]:k+u+g;$.cookie("EZPERSONAL",k)}}
function deletepersonal_ya(a,b){for(m=0;m<personalmrks.length;m++)if(personalmrks[m].getTitle()==a&&personalmrks[m].orignumber==b){personalmrks[m].setMap(null);var g=m}personalmrks.splice(g,1);var h=$.cookie("EZPERSONAL");if(h&&""!=h){var k=h.split("!"),q="";for(co=0;co<k.length;co++)k[co].split("*")[0]!=a&&(h=""==q?"":"!",q=q+h+k[co])}$.cookie("EZPERSONAL",q);if((q=$.cookie("NUMDAYS"))&&""!=q&&0!=q)for(d=0;d<q;d++){if(h=$.cookie("EZMAPCITYPLACES_day"+(d+1)),k=$.cookie("EZMAPCITYPLACES2_day"+(d+1)),
h&&""!=h){var u=h.split(","),p="";for(x=0;x<=u.length-1;x++)if(u[x]!=g+1){h=",";""==p&&(h="");var w=11>u[x]&&u[x]>g+1?u[x]-1:u[x],p=p+h+w}$.cookie("EZMAPCITYPLACES_day"+(d+1),p);if(k&&""!=k){k=k.split(",");p="";for(y=0;y<=k.length-1;y++)k[y]!=g+1&&(h=",",""==p&&(h=""),w=11>k[y]&&k[y]>g+1?k[y]-1:k[y],p=p+h+w);$.cookie("EZMAPCITYPLACES2_day"+(d+1),p)}}}else if(h=$.cookie("EZMAPCITYPLACES_day1"),k=$.cookie("EZMAPCITYPLACES2_day1"),h&&""!=h){u=h.split(",");p="";for(x=0;x<=u.length-1;x++)u[x]!=g+1&&(h=
",",""==p&&(h=""),w=11>u[x]&&u[x]>g+1?u[x]-1:u[x],p=p+h+w);$.cookie("EZMAPCITYPLACES_day1",p);if(k&&""!=k){k=k.split(",");p="";for(y=0;y<=k.length-1;y++)k[y]!=g+1&&(h=",",""==p&&(h=""),w=11>k[y]&&k[y]>g+1?k[y]-1:k[y],p=p+h+w);$.cookie("EZMAPCITYPLACES2_day1",p)}}updateMapCityCookie();placesdeleted2.push(b);"undefined"!=typeof global_showbutton&&global_showbutton&&(global_showbutton=!1,mapcitypopup.showSelPlaces());mapcitypopup.mapconfig.google.map.setCenter(beforecenter);mapcitypopup.mapconfig.google.map.setZoom(beforezoom);
closesubroutedata();c_pp=!1;create_pp()}
function deletepersonal(a,b){for(m=0;m<personalmrks.length;m++)if(personalmrks[m].getTitle()==a&&personalmrks[m].orignumber==b){personalmrks[m].setMap(null);var g=m}personalmrks.splice(g,1);placetodel=-1;for(z=0;z<placesadded2.length;z++)placesadded2[z]==g+1&&(placetodel=z),placesadded2[z]>g+1&&--placesadded2[z];0<=placetodel&&placesadded2.splice(placetodel,1);var h=$.cookie("EZPERSONAL");if(h&&""!=h){var k=h.split("!"),q="";for(co=0;co<k.length;co++)k[co].split("*")[0]!=a&&(h=""==q?"":"!",q=q+h+
k[co])}$.cookie("EZPERSONAL",q);if((q=$.cookie("NUMDAYS"))&&""!=q&&0!=q)for(d=0;d<q;d++){if(h=$.cookie("EZMAPCITYPLACES_day"+(d+1)),k=$.cookie("EZMAPCITYPLACES2_day"+(d+1)),h&&""!=h){var u=h.split(","),p="";for(x=0;x<=u.length-1;x++)if(u[x]!=g+1){h=",";""==p&&(h="");var w=11>u[x]&&u[x]>g+1?u[x]-1:u[x],p=p+h+w}$.cookie("EZMAPCITYPLACES_day"+(d+1),p);if(k&&""!=k){k=k.split(",");p="";for(y=0;y<=k.length-1;y++)k[y]!=g+1&&(h=",",""==p&&(h=""),w=11>k[y]&&k[y]>g+1?k[y]-1:k[y],p=p+h+w);$.cookie("EZMAPCITYPLACES2_day"+
(d+1),p)}}}else{h=$.cookie("EZMAPCITYPLACES_day1");k=$.cookie("EZMAPCITYPLACES2_day1");if(h&&""!=h){u=h.split(",");p="";for(x=0;x<=u.length-1;x++)u[x]!=g+1&&(h=",",""==p&&(h=""),w=11>u[x]&&u[x]>g+1?u[x]-1:u[x],p=p+h+w);$.cookie("EZMAPCITYPLACES_day1",p)}if(k&&""!=k){k=k.split(",");p="";for(y=0;y<=k.length-1;y++)k[y]!=g+1&&(h=",",""==p&&(h=""),w=11>k[y]&&k[y]>g+1?k[y]-1:k[y],p=p+h+w);$.cookie("EZMAPCITYPLACES2_day1",p)}}updateMapCityCookie();"undefined"!=typeof global_showbutton&&global_showbutton&&
(global_showbutton=!1,mapcitypopup.showSelPlaces())}function personalplaces(){var a=$.cookie("EZPERSONAL");if(a&&""!=a)for(a=a.split("!"),co=0;co<a.length;co++){var b=a[co].split("*"),g=b[0],b=b[1].replace("(","").replace(")","").split(","),b=new google.maps.LatLng(parseFloat(b[0]),parseFloat(b[1]));placeMarker2(g,b)}}
deletepersonalplan_mi=function(a,b){if(!confirm("You are going to delete this personal plan, are you sure?"))return!1;var g={action:"deletepersonal_myiti",itiid:a,upp_id:b};$("#divitifuncs").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_EI.cfm?rnu=5131616516651",g)};
deletedeal_mi=function(a,b){if(!confirm("You are going to delete this deal from the itinerary, are you sure?"))return!1;var g={action:"deletedeal_myiti",itiid:a,uid_id:b};$("#divitifuncs").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_EI.cfm?rnu=5131616516651",g)};
addnotetopersonalplan_mi=function(a,b){$(".divitifuncs2").remove();"Add a note"==b&&(b="");$("#divitifuncs").append('<div class="divitifuncs2"></div>');var g={action:"addnotepersonal_myiti",note:b,upp_id:a};$(".divitifuncs2").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_EI.cfm?rnu=5131616516651",g)};
addnotetodeal_mi=function(a,b){$(".divitifuncs2").remove();"Add a note"==b&&(b="");$("#divitifuncs").append('<div class="divitifuncs2"></div>');var g={action:"addnotedeal_myiti",note:b,uid_id:a};$(".divitifuncs2").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_EI.cfm?rnu=5131616516651",g)};
emptydaycookies=function(a){if(!confirm("This will delete all places and routes for this day, are you sure"))return!1;$.cookie("EZMAPCITYPLACES_day"+a,!1,{path:"/",expires:-1});$.cookie("EZMAPCITYPLACES_day"+a,null);$.cookie("EZMAPCITYPLACES2_day"+a,!1,{path:"/",expires:-1});$.cookie("EZMAPCITYPLACES2_day"+a,null);$.cookie("EZMAPCITYSUBPLACES_day"+a,!1,{path:"/",expires:-1});$.cookie("EZMAPCITYSUBPLACES_day"+a,null);$.cookie("EZTRANSTOPS_day"+a,!1,{path:"/",expires:-1});$.cookie("EZTRANSTOPS_day"+
a,null);$.cookie("EZTRANSPORT_day"+a,!1,{path:"/",expires:-1});$.cookie("EZTRANSPORT_day"+a,null);$.cookie("EZSERVICES_day"+a,!1,{path:"/",expires:-1});$.cookie("EZSERVICES_day"+a,null);$.cookie("EZROUTE_day_"+a,!1,{path:"/",expires:-1});$.cookie("EZROUTE_day_"+a,null);$.cookie("EZGOTM_day_"+a,!1,{path:"/",expires:-1});$.cookie("EZGOTM_day_"+a,null);$.cookie("EZFULLORDER_day"+a,null);checkplacesadd();checktransportsadd();checkservicesadd();$(".ui-panel").panel("close");var b=$.cookie("MYITINERARYID");
b&&""!=b&&(a={action:"emptyday_myiti",itiid:b,day:a},$("#divitifuncs").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_EI.cfm?rnu=5131616516651",a))};
addnotetoday_mi=function(a,b){$(".divitifuncs2").remove();"Add a note"==b&&(b="");$("#divitifuncs").append('<div class="divitifuncs2"></div>');$.cookie("EZNOTE_day"+a,b);var g=$.cookie("MYITINERARYID");g&&""!=g&&(g={action:"addnotetoday_myiti",itiid:g,day:a,note:b},$(".divitifuncs2").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_EI.cfm?rnu=5131616516651",g))};
movepersonaltoaday_mi=function(a,b,g){a={action:"movepersonal_myiti",itiid:a,newday:g,upp_id:b};$("#divitifuncs").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_EI.cfm?rnu=5131616516651",a)};movedealtoaday_mi=function(a,b,g){a={action:"movedeal_myiti",itiid:a,newday:g,uid_id:b};$("#divitifuncs").load("https://myezplan.com/mobile/appdata/data_ajax/mapcity_content_EI.cfm?rnu=5131616516651",a)};
function myDealPrint_mi(a,b,g){a.preventDefault();a="https://myezplan.com/mobile/appdata/voucherpdf.cfm?"+("om="+b+"&duid="+g+"")+"";if("inline"==b)return window.open(a,"voucherpdf",""),!1;window.location.replace(a);return!1}
function returnfrompp(a){personalmrks[a].userinfowindow.close(mapcitypopup.mapconfig.google.map,personalmrks[a]);mapcitypopup.mapconfig.google.map.setCenter(beforecenter);mapcitypopup.mapconfig.google.map.setZoom(beforezoom);$("#body_map_canvas .gm-style").addClass("gmstylefull");closesubroutedata();c_pp=!1;create_pp()}goToItinerary=function(){cf_sid?window.location.href="myitinerary.cfm":pedir_sesion("1","mapcity.goToItinerary(1)")};
OpenmyPlanToMap=function(a,b,g){var h=a.replace("mapcity.cfm?","?");a=decodeURIComponent(getUrlStringParamValue(a,"pl"));$("#myuserplan-box").hide();setCountryToMapCity_ajax(b,g,!0);mapcity.countryid=b;mapcity.cityid=g;$.cookie("EZMAPCITYQUERY",h);$.cookie("EZMAPCITYSAVELOAD","SAVED");mapcity.places.pl=a.split(",");$.each(mapcity.places.pl,function(a,b){if($.isNumeric(b)){var g="data_ajax/map_city_ajax.cfm?rnu="+randomNumberUrl()+"";$.post(g,{pid:b,action:"add"})}});$("#mask").remove();window.setTimeout("mapcity.initPage();",
10);mapcity.getPlansByCity();mapcity.updateMapCityConfig();mapcity.getCookieQuery();mapcity.getPlaces();mapcity.routeMap()};mapcity.setCookieQuery=function(){var a=$.cookie("EZMAPCITYLOGINAFTER"),b=$.cookie("EZMAPCITYSAVELOGIN");"SAVED"!=$.cookie(mapcity.selectors.cookieload)&&"LOGIN"!=a&&"LOGIN"!=b&&$.cookie(mapcity.selectors.cookiequery,mapcity.pageurl.getUrlQuery());$.cookie(mapcity.selectors.cookiequery);return mapcity.getCookieQuery()};
mapcity.getCookieQuery=function(a){"boolean"==typeof a&&a&&mapcity.setCookieQuery();a=$.cookie(mapcity.selectors.cookiequery);var b=decodeURIComponent(getUrlStringParamValue(a,"plse"));$.isEmptyObject(b)||(mapcity.places.plse=b.split(","),$.each(mapcity.places.plse,function(a,b){$.isNumeric(b)&&(mapcity.places.plse[a]=parseInt(b))}));b=decodeURIComponent(getUrlStringParamValue(a,"plom"));$.isEmptyObject(b)||(mapcity.places.plom=b.split(","),$.each(mapcity.places.plom,function(a,b){$.isNumeric(b)&&
(mapcity.places.plom[a]=parseInt(b))}));"SAVED"==$.cookie(mapcity.selectors.cookieload)&&(mapcity.places.userselection.changed=!0);"LOGIN"==$.cookie("EZMAPCITYLOGINAFTER")&&(mapcity.places.userselection.changed=!0);"LOGIN"==$.cookie("EZMAPCITYSAVELOGIN")&&(mapcity.places.userselection.changed=!0);mapcity.places.sp=getUrlStringParamValue(a,"sp");mapcity.places.ep=getUrlStringParamValue(a,"ep");mapcity.places.gotm=getUrlStringParamValue(a,"gotm")||mapcity.mapconfig.maptravelmode;mapcity.places.upid=
getUrlStringParamValue(a,"upid");return a};mapcity.setUPID=function(a){mapcity.places.upid=a;$(mapcity.selectors.upid).val(a)};mapcity.isFormValidToProcess=function(){return""==mapcity.places.sp||""==mapcity.places.ep||""==mapcity.places.plse||""==mapcity.places.gotm?!1:!0};mapcity.changePageVariables=function(){mapcity.pageurl.cityname=mapcity.cityname;$(document).attr("title","Things to do in "+mapcity.cityname);$("#pageheadercityname").html(mapcity.cityname);$("#mapplanscity-box #city-name").html(mapcity.cityname)};
mapcity.getCitiesByCountry=function(){var a=$(mapcity.selectors.city);myezplan.forms.select.removeOptionsByJqueySelector($(a.selector+" option[value!='']"));mapcity.getCitiesByCountry_Ajax()};
mapcity.getCitiesByCountry_Ajax=function(){var a={method:"getCitiesByCountry_json",countryid:mapcity.countryid},b=$(mapcity.selectors.city);$.getJSON("cfc/applocation.cfc",a).error(myezplan.utils.ajaxError).success(function(a,h,k){a=$.map(a.data,function(a){return{name:a.name,id:a.id}});myezplan.forms.select.addOptionsMapNameId(b,a);0<myezplan.forms.select.selectByValue(b,mapcity.cityid,!0).length&&b.change()})};
mapcity.getPlansByCity=function(){var a=$(mapcity.selectors.city);mapcity.cityid=a.val();"0"!=mapcity.cityid&&(mapcity.cityname=$(a.selector+" option:selected").text(),mapcity.changePageVariables(),mapcity.getPlansByCity_Ajax(mapcity.cityid))};
mapcity.getPlansByCity_Ajax=function(a){$(mapcity.selectors.plan).ddslick("destroy");$.getJSON("cfc/mapcity.cfc",{method:"getPlansByCity_json",cityid:a}).error(myezplan.utils.ajaxError).success(function(b,g,h){$(mapcity.selectors.plan).ddslick({data:b.data,width:"100%",selectText:"Select an Area",truncateDescription:!0,onSelected:function(b){mapcity.showPopupMapCityPopup(a,b.selectedData.value)}});0==mapcity.places.pl.length&&""!=mapcity.cityname&&($(mapcity.selectors.plan).ddslick("open"),$("div.loadi").show(0))})};
mapcity.getUserPlanName=function(){mapcity.places.upid&&$.getJSON("cfc/mapcity.cfc",{method:"getUserPlanNameById_json",upid:mapcity.places.upid}).error(myezplan.utils.ajaxError).success(function(a,b,g){0<a.count&&(mapcity.places.upname=a.data[0].up_name,$("#map-top-planname").text("-"+mapcity.places.upname))})};mapcity.updateMapCityConfig=function(){var a=$(mapcity.selectors.city);mapcity.cityid=a.val();"0"!=mapcity.cityid&&mapcity.updateMapCityConfig_ajax(mapcity.cityid)};
mapcity.updateMapCityConfig_ajax=function(){var a={method:"getCityById_json",cityid:mapcity.cityid};$(mapcity.selectors.city);$.getJSON("cfc/applocation.cfc",a).error(myezplan.utils.ajaxError).success(function(a,g,h){0<a.count&&(a=a.data[0],$("#mapcityloadingimgage").prop("src",mapcity.mapcityloadingimgagepath),$("#big_box_header").css("background-image",""),$("#large_box_footer").css("background-image",""),$("#footer_box").css("background-image",""),a.city_loadingbanner&&(0==a.city_loadingbanner.search("http")?
$("#mapcityloadingimgage").prop("src",a.city_loadingbanner):$("#mapcityloadingimgage").prop("src",myezplan.pathmapscity+a.city_loadingbanner)),a.city_upperbanner&&(0==a.city_upperbanner.search("http")?$("#big_box_header").css("background-image","url("+a.city_upperbanner+")"):$("#big_box_header").css("background-image","url("+myezplan.pathmapscity+a.city_upperbanner+")")),a.city_lowerbanner&&(0==a.city_lowerbanner.search("http")?$("#large_box_footer").css("background-image","url("+a.city_lowerbanner+
")"):$("#large_box_footer").css("background-image","url("+myezplan.pathmapscity+a.city_lowerbanner+")")),a.city_lowerleftbanner&&(0==a.city_lowerleftbanner.search("http")?$("#footer_box").css("background-image","url("+a.city_lowerleftbanner+")"):$("#footer_box").css("background-image","url("+myezplan.pathmapscity+a.city_lowerleftbanner+")")))})};
mapcity.showPopupMapCityPopup=function(a,b){var g={method:"getPlacesByIdGroupedByCity",pids:mapcity.places.pl.join(",")},h=$("#places_list");$.getJSON("cfc/mapcity.cfc",g).error(myezplan.utils.ajaxError).success(function(g,q,u){g=g.data[0];var p="";if(g){mapcity.loading=!0;mapcity.mapconfig.mapchanged=!0;mapcity.getCookieQuery();$(mapcity.selectors.plse).val("");$(mapcity.selectors.plom).val("");$.each(mapcity.mapconfig.markers,function(a,b){b.setMap(null)});mapcity.mapconfig.markers=[];mapcity.mapconfig.mapcenter=
null;mapcity.mapconfig.google.directionsdisplay&&(mapcity.mapconfig.google.directionsdisplay.setMap(null),mapcity.mapconfig.google.directionsdisplay=null);var w=0;$.each(g,function(g,h){p+='<table id="menu_place_table" class="table" cellspacing="0"><caption class="tc bold">'+g+"</caption>";$.each(h,function(g,h){w++;_icon=mapcity.pathtoicon+"basic/"+w+".png";myezplan.maps.createMyezplanMarker(h.ruta_id,new google.maps.LatLng(h.lat,h.lon),h.ruta_name,_icon,null,mapcity.mapconfig.markers);myezplan.maps.config.mapcenter=
new google.maps.LatLng(a,b);p+="<tr>";p+='<td class="t1"><input id="plsecheck" type="checkbox" value="'+h.ruta_id+'" class="plsecheck cursor formitemchanged checkplaceadd" title="Click Here to add/remove this place from route" data-id="'+h.ruta_id+'" data-name="'+h.ruta_name+'" /></td>';var k=38<h.ruta_name.length?h.ruta_name.substr(0,35)+"...":h.ruta_name;p+='<td class="placetooltip" data-tipicon="'+_icon+'" data-tipprov="'+h.serviceprovider_id+'" data-tipname="'+h.ruta_name+'" data-tipname="'+h.ruta_name+
'" data-tipimage="'+h.info_imageurl+'" data-tiptype="'+h.detail_type+'" data-id="'+h.ruta_id+'" data-idunico="'+h.ruta_idunico+'" ><table class="table"><tr><td class="t2"><img aligin="middle" src="'+_icon+'" class="cursor img-checkbox-point" /></td><td class="t3">'+k+"</td></tr></table></td>";p+='<th class="t4 cursor textredmyezplan imgplaceremove" /*title="Remove from plan"*/ data-id="'+h.ruta_id+'" data-name="'+h.ruta_name+'" >&times;</th>';p+="</tr>"});p+="</table>"});myezplan.forms.select.removeAllOptions($(mapcity.selectors.sp));
myezplan.forms.select.removeAllOptions($(mapcity.selectors.ep));h.html(p);$("#places_list .checkplaceadd").each(function(a,b){mapcity.addToMapCity(b,"load")});if(""==mapcity.places.sp||""==mapcity.places.ep||!mapcity.places.userselection.changed||$.trim(mapcity.places.sp)===$.trim(mapcity.places.ep)&&!mapcity.places.userselection.changed)console.log("Sort By Lat"),mapcity.sortSelectsWhereTo(),$(mapcity.selectors.gotm).val("WALKING")}mapcity.loading=!0;$(mapcity.selectors.sp).val(mapcity.places.sp);
$(mapcity.selectors.ep).val(mapcity.places.ep);mapcity.places.userselection.changed&&$(mapcity.selectors.gotm).val(mapcity.places.gotm);$(mapcity.selectors.upid).val(mapcity.places.upid);mapcity.setCookieQuery();mapcity.getUserPlanName();0==mapcity.places.pl.length&&"0"==mapcity.cityid?($("#mapcitycity-box").slideDown("slow"),$("body").append('<div id="mask" class="mask"></div>'),$("#mask").fadeIn(300)):($("div.loadi").hide(0),mapcity.initMap());mapcity.loading=!1})};
mapcity.getPlaces=function(){$("#places_list").empty();mapcity.getCookiePlaces();mapcity.getPlaces_Ajax(mapcity.cityid)};mapcity.nextPlaces=function(){$("#places_list").empty();mapcity.getCookiePlaces();mapcity.getPlaces_Ajax(mapcity.cityid)};
mapcity.getPlaces_Ajax=function(a){a={method:"getPlacesByIdGroupedByCity",pids:mapcity.places.pl.join(",")};var b=$("#places_list");$.getJSON("cfc/mapcity.cfc",a).error(myezplan.utils.ajaxError).success(function(a,h,k){a=a.data[0];var q="";if(a){mapcity.loading=!0;mapcity.mapconfig.mapchanged=!0;mapcity.getCookieQuery();$(mapcity.selectors.plse).val("");$(mapcity.selectors.plom).val("");$.each(mapcity.mapconfig.markers,function(a,b){b.setMap(null)});mapcity.mapconfig.markers=[];mapcity.mapconfig.mapcenter=
null;mapcity.mapconfig.google.directionsdisplay&&(mapcity.mapconfig.google.directionsdisplay.setMap(null),mapcity.mapconfig.google.directionsdisplay=null);var u=0;$.each(a,function(a,b){q+='<table id="menu_place_table" class="table" cellspacing="0"><caption class="tc bold">'+a+"</caption>";$.each(b,function(a,b){u++;_icon=mapcity.pathtoicon+"basic/"+u+".png";0==a&&null==mapcity.mapconfig.mapcenter&&(mapcity.mapconfig.mapcenter=new google.maps.LatLng(b.centro_mapa1,b.centro_mapa2));myezplan.maps.showInfoplaceMyezplanMarker(myezplan.maps.createMyezplanMarker(b.ruta_id,
new google.maps.LatLng(b.lat,b.lon),b.ruta_name,_icon,null,mapcity.mapconfig.markers),b.ruta_idunico,b.ruta_id,"mapcity");q+="<tr>";q+='<td class="t1"><input id="'+b.ruta_idunico+'" type="checkbox" value="'+b.ruta_id+'" class="plsecheck cursor formitemchanged checkplaceadd squaredTwo squaredTwoMediano" title="Click Here to add/remove this place from route" data-id="'+b.ruta_id+'" data-name="'+b.ruta_name+'" /><label for="'+b.ruta_idunico+'"></label></td>';var g=38<b.ruta_name.length?b.ruta_name.substr(0,
35)+"...":b.ruta_name;q+='<td class="placetooltip" data-tipicon="'+_icon+'" data-tipprov="'+b.serviceprovider_id+'" data-tipname="'+b.ruta_name+'" data-tipname="'+b.ruta_name+'" data-tipimage="'+b.info_imageurl+'" data-tiptype="'+b.detail_type+'" data-id="'+b.ruta_id+'" data-idunico="'+b.ruta_idunico+'" ><table class="table"><tr><td class="t2"><img aligin="middle" src="'+_icon+'" class="cursor img-checkbox-point" /></td><td class="t3">'+g+"<br> <h4>Type: "+b.detail_type+'</h4></label></div></td><td id="table_img"> <img  src='+
b.info_imageurl+"></td></tr></table></td>";q+='<th class="t4 cursor textredmyezplan imgplaceremove" /*title="Remove from plan" */data-id="'+b.ruta_id+'" data-name="'+b.ruta_name+'" >&times;</th>';q+="</tr>"});q+="</table>"});myezplan.forms.select.removeAllOptions($(mapcity.selectors.sp));myezplan.forms.select.removeAllOptions($(mapcity.selectors.ep));b.html(q);$("#places_list .checkplaceadd").each(function(a,b){mapcity.addToMapCity(b,"load")});if(""==mapcity.places.sp||""==mapcity.places.ep||!mapcity.places.userselection.changed||
$.trim(mapcity.places.sp)===$.trim(mapcity.places.ep)&&!mapcity.places.userselection.changed)console.log("Sort By Lat"),mapcity.sortSelectsWhereTo(),$(mapcity.selectors.gotm).val("WALKING")}mapcity.loading=!0;$(mapcity.selectors.sp).val(mapcity.places.sp);$(mapcity.selectors.ep).val(mapcity.places.ep);mapcity.places.userselection.changed&&$(mapcity.selectors.gotm).val(mapcity.places.gotm);$(mapcity.selectors.upid).val(mapcity.places.upid);mapcity.setCookieQuery();mapcity.getUserPlanName();0==mapcity.places.pl.length&&
"0"==mapcity.cityid?($("#mapcitycity-box").slideDown("slow"),$("body").append('<div id="mask" class="mask"></div>'),$("#mask").fadeIn(300)):($("div.loadi").hide(0),mapcity.initMap());mapcity.loading=!1})};
mapcity.initMap=function(){null==mapcity.mapconfig.google.map||mapcity.mapconfig.mapchanged?myezplan.maps.initializeGoogleMap(mapcity.mapconfig,function(a,b,g){if("ERROR"==b)return console.log(b+":"+g.errormessage),!1;$("#mapcitycity-box").hide("fast");mapcity.mapconfig.google.map&&myLocationControlAdd(mapcity.mapconfig.google.map);mapcity.routeMap()}):console.log("no changes to draw")};
mapcity.routeMap=function(){mapcity.setCookieQuery();"NEW"!=$.cookie(mapcity.selectors.cookieload)&&$.cookie("EZMAPCITYSAVELOAD","NEW");"LOGINP"!=$.cookie("EZMAPCITYLOGINAFTER")&&$.cookie("EZMAPCITYLOGINAFTER","LOGINP");"LOGINP"!=$.cookie("EZMAPCITYSAVELOGIN")&&$.cookie("EZMAPCITYSAVELOGIN","LOGINP");if(""==mapcity.places.sp||""==mapcity.places.ep)return!1;mapcity.mapconfig.maptravelmode=mapcity.places.gotm;mapcity.mapconfig.waypoints=[];var a=mapcity.constplse-1;parseInt(mapcity.places.sp)==parseInt(mapcity.places.ep)&&
--a;$.each(mapcity.mapconfig.markers,function(b,g){var h=parseInt(g.mk_id);0<=mapcity.places.plse.indexOf(h)&&h!=parseInt(mapcity.places.sp)&&h!=parseInt(mapcity.places.ep)&&!(mapcity.mapconfig.waypoints.length>=a)&&mapcity.mapconfig.waypoints.push({location:g.position,stopover:!0})});myezplan.maps.calculateGoogleRoute(mapcity.mapconfig,function(a,g){return!0})};
mapcity.addToMapCity=function(a,b){var g=$(a);if(g){b=b?b:"click";mapcity.mapconfig.vacio=!1;var h=parseInt(a.value),k=g.data("name");$(mapcity.selectors.form);var g=$(mapcity.selectors.sp),q=$(mapcity.selectors.ep),u=$(mapcity.selectors.plse),p=[],w=$.trim(u.val());""!=w&&(p=w.split(","),$.each(p,function(a,b){$.isNumeric(b)&&(p[a]=parseInt(b))}));var w=$(mapcity.selectors.plom),v=[],C=$.trim(w.val());""!=C&&(v=C.split(","),$.each(v,function(a,b){$.isNumeric(b)&&(v[a]=parseInt(b))}));if("load"===
b)a.checked=!0,0<=$.inArray(h,mapcity.places.plse)?p.length>=mapcity.constplse&&(a.checked=!1):0<=$.inArray(h,mapcity.places.plom)?a.checked=!1:p.length>=mapcity.constplse&&(a.checked=!1);else if("click"===b&&p.length>=mapcity.constplse&&a.checked){myezAlert.render("You have reached the maximum number of places ("+mapcity.constplse+") per map.");a.checked=!1;return}a.checked?(p.push(h),0<=v.indexOf(h)&&v.splice(v.indexOf(h),1),myezplan.forms.select.addOption(g,h,k),myezplan.forms.select.addOption(q,
h,k)):(0<=p.indexOf(h)&&p.splice(p.indexOf(h),1),v.push(h),k=parseInt($(mapcity.selectors.sp).val()),C=parseInt($(mapcity.selectors.ep).val()),k===h&&(mapcity.places.sp=mapcity.getNextPlaceByLatOrder(h,C).id,$(mapcity.selectors.sp).val(mapcity.places.sp),mapcity.setCookieQuery()),C===h&&(mapcity.places.ep=mapcity.getPreviousPlaceByLatOrder(h,k).id,$(mapcity.selectors.ep).val(mapcity.places.ep),mapcity.setCookieQuery()),myezplan.forms.select.removeOptionByValue(g,h),myezplan.forms.select.removeOptionByValue(q,
h));p.sort(function(a,b){return a-b});u.val(p.join());v.sort(function(a,b){return a-b});w.val(v.join())}else e.stopPropagation(),e.preventDefault()};pllat_SortByLatAsc=function(a,b){var g=a.lat,h=b.lat;return g<h?-1:g>h?1:0};pllat_SortByLonAsc=function(a,b){var g=a.lon,h=b.lon;return g<h?-1:g>h?1:0};function dynamicSort(a){var b=1;"-"===a[0]&&(b=-1,a=a.substr(1,a.length-1));return function(g,h){return(g[a]<h[a]?-1:g[a]>h[a]?1:0)*b}}
mapcity.sortSelectsWhereTo=function(){mapcity.setCookieQuery();mapcity.places.pllat=[];$.each(mapcity.places.plse,function(a,b){$.each(mapcity.mapconfig.markers,function(a,h){h.mk_id==b&&mapcity.places.pllat.push({id:b,lat:h.position.jb,lon:h.position.kb})})});1<=mapcity.places.pllat.length&&(mapcity.places.pllat.sort(dynamicSort("-lat")),mapcity.places.sp=mapcity.places.pllat[0].id,mapcity.places.ep=mapcity.places.pllat[mapcity.places.pllat.length-1].id)};
mapcity.getNextPlaceByLatOrder=function(a,b){var g=!1,h={id:null,index:-1};if(!a)return h;$.each(mapcity.places.pllat,function(k){if(!g&&this.id==a&&mapcity.places.pllat[k+1]){var q=mapcity.places.pllat[k+1];q.id!=b&&(g=!0,h={id:q.id,index:k+1})}});return h};
mapcity.getPreviousPlaceByLatOrder=function(a,b){var g=!1,h={id:null,index:-1};if(!a)return h;$.each(mapcity.places.pllat,function(k){if(!g&&this.id==a&&mapcity.places.pllat[k-1]){var q=mapcity.places.pllat[k-1];q.id!=b&&(g=!0,h={id:q.id,index:k-1})}});return h};
mapcity.removeFromMapCity=function(a){a=$(a);var b=a.parent(),g=b.closest("table");b.find(".checkplaceadd");a.data("name");var h=a.data("id");deleteFromMapCityPopup(h,"mapcity",function(a,q){mapcity.getCookiePlaces();b.css("background-color","#990000").animate({opacity:.1},"slow",function(){b.hide("slow").remove();0==g.find(">tbody>tr").length&&g.animate({opacity:.05},"fast").slideToggle("fast",function(){g.hide("slow").remove()});var a=mapcity.mapconfig.getMarkerByPlaceId(h);mapcity.mapconfig.markers[a.index].setMap(null);
mapcity.mapconfig.markers.splice(a.index,1);!mapcity.mapconfig.vacio&&mapcity.mapconfig.google.directionsdisplay&&(mapcity.mapconfig.google.directionsdisplay.setMap(null),mapcity.mapconfig.google.directionsdisplay=null,mapcity.getPlaces())})})};
mapcity.cleanCurrentMapCity_menutop=function(){console.log("First Time");$.cookie("EZDATE1",!1,{path:"/",expires:-1});$.cookie("EZDATE2",!1,{path:"/",expires:-1});$.cookie("EZRUTASPLACES",!1,{path:"/",expires:-1});var a=$.cookie("NUMDAYS"),b=1;a&&""!=a&&0!=a&&(b=a,$.cookie("NUMDAYS",!1,{path:"/",expires:-1}));for(x=1;x<=b;x++)$.cookie("EZMAPCITYPLACES_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZTRANSTOPS_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZTRANSPORT_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZSERVICES_day"+
x,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYPLACES2_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYSUBPLACES_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZROUTE_day_"+x,!1,{path:"/",expires:-1}),$.cookie("EZGOTM_day_"+x,!1,{path:"/",expires:-1}),$.cookie("EZ_P_O_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZNOTE_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZFULLORDER_day"+x,!1,{path:"/",expires:-1});for(pr=1;10>=pr;pr++)$.cookie("EZPR"+pr,!1,{path:"/",expires:-1}),$.cookie("EZPR_"+pr,!1,{path:"/",
expires:-1}),$.cookie("EZPR"+pr+"_S",!1,{path:"/",expires:-1}),$.cookie("EZPR_"+pr+"_S",!1,{path:"/",expires:-1});$.cookie("EZIDEAS",!1,{path:"/",expires:-1});$.cookie("EZIDEAS_C",!1,{path:"/",expires:-1});$.cookie("EZPERSONAL",!1,{path:"/",expires:-1});if((a=$.cookie("EZCATS"))&&""!=a){a=a.split("*");for(x=0;x<a.length;x++)$.cookie(a[x],!1,{path:"/",expires:-1});$.cookie("EZCATS","")}if((a=$.cookie("EZAREAS"))&&""!=a){a=a.split("*");for(x=0;x<a.length;x++)$.cookie(a[x],!1,{path:"/",expires:-1});
$.cookie("EZAREAS","")}$.cookie("EZMAPCITYQUERY","");"undefined"==typeof mapcity.places&&(mapcity.places="");"undefined"==typeof mapcity.mapconfig&&(mapcity.mapconfig="");"undefined"==typeof mapcity.mapconfig.maptravelmode&&(mapcity.mapconfig.maptravelmode="");""==mapcity.places&&""==mapcity.mapconfig&&""==mapcity.mapconfig.maptravelmode||"index"==faqpage?(a="https://myezplan.com/mobile/appdata/data_ajax/map_city_ajax.cfm?rnu="+randomNumberUrl()+"",b={action:"clean2"},$.post(a,b).error(myezplan.utils.ajaxError).success(function(a,
b,k){a=$("#new_plan_clean");$("#new_plan_clean").showLoading("Please Wait,<br/>Loading...<br/>",!1);b="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content.cfm?"+randomNumberUrl()+"";$("#new_plan_clean").load(b,{action:"New_Plan",parametro:"new"},function(a,b,g){switch(b){case "error":$("#new_plan_clean").empty()}});$("body").append('<div id="mask" class="mask"></div>');$("#mask").show();a.show()})):(mapcity.setUPID(0),a="https://myezplan.com/mobile/appdata/data_ajax/map_city_ajax.cfm?rnu="+
randomNumberUrl()+"",b={action:"clean"},$.post(a,b).error(myezplan.utils.ajaxError).success(function(a,b,k){a=$("#new_plan_clean");$("#new_plan_clean").showLoading("Please Wait,<br/>Loading...<br/>",!1);b="https://myezplan.com/mobile/appdata/data_ajax/mapcity_content.cfm?"+randomNumberUrl()+"";$("#new_plan_clean").load(b,{action:"New_Plan",parametro:"new"},function(a,b,g){switch(b){case "error":$("#new_plan_clean").empty()}});$("body").append('<div id="mask" class="mask"></div>');$("#mask").show();
a.show()}))};
mapcity.mapSaveInit=function(){if(this.pageurl.mapValidToProcess&&!this.pageurl.mapValidToProcess())return myezAlert.render("Please, complete all the steps before saving."),!1;var a=mapcity.places.upid;encodeURIComponent($.trim(mapcity.save.$fname.val()));if(""==cf_sid)return $.cookie("EZMAPCITYSAVELOGIN","LOGIN"),pedir_sesion(1,"mapcity.mapSaveInit()"),!1;if(""!=a&&window.confirm("Do you want to replace your current Plan?"))return mapcity.mapSaveAjax("u"),!0;closePopup(0);mapcity.save.$popup.fadeIn(300);mapcity.save.$popup.height();
a=(mapcity.save.$popup.width()+24)/2;mapcity.save.$popup.css({"margin-left":-a});$("body").append('<div id="mask" class="mask"></div>');$("#mask").fadeIn(300);$("#Datepicker_").datepicker();$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/saveplans_itineraryajaxsearch.cfm",async:!0,cache:!1,data:"action=searchitineraries&uid="+cf_sid,success:function(a){$("#search_itinerary").html(a)}});mapcity.save.$fname.focus();return!0};
plantoItineraryValida=function(a,b,g,h){$.ajax({type:"POST",url:"data_ajax/myitinerary_content_ajax.cfm",async:!1,cache:!1,data:{action:"saveuseritinerary",saveaction:"validalimiteplansI",aditi:h}}).success(function(k){if(30==k)return myezAlert.render("Your Plan has been saved, but your current itinerary have reached the maximum limit of Plans (30), if you want to add it to a itinerary go to My Itinerary"),!1;myPlanAddToItinerary(a,b,g,h)})};
planValida=function(a){$.ajax({type:"POST",url:"data_ajax/myitinerary_content_ajax.cfm",async:!1,cache:!1,data:{action:"saveuseritinerary",saveaction:"validalimiteplans"}}).success(function(a){if(60==a)return myezAlert.render("You have reached the maximum limit of Plans (60), if you want to create a new one you have to delete one of your old Plans"),!1;mapcity.mapSaveAjax("i")})};
$(document).ready(function(a){googleMymap=function(){"index"!=faqpage&&(mapcity.mapconfig=new myezplan.maps.config,mapcity.mapconfig.canvasmap=$("#right_map_box #map_canvas").get([0]),mapcity.mapconfig.google.mapoptions.navigationControl=!1,mapcity.mapconfig.mapchanged=!1,mapcity.places=mapcity.mapconfig.places)};mapcity.loading=!0;mapcity.constplse=10;mapcity.loadingmap=!0;mapcity.pathtoicon="ezmapas/maps_pics/";mapcity.selectors={};mapcity.selectors.form="form#drawform";mapcity.selectors.city=mapcity.selectors.form+
" #city";mapcity.selectors.plan=mapcity.selectors.form+" #plan";mapcity.selectors.pl=mapcity.selectors.form+" #pl";mapcity.selectors.plse=mapcity.selectors.form+" #plse";mapcity.selectors.plom=mapcity.selectors.form+" #plom";mapcity.selectors.sp=mapcity.selectors.form+" #sp";mapcity.selectors.ep=mapcity.selectors.form+" #ep";mapcity.selectors.gotm=mapcity.selectors.form+" #gotm";mapcity.selectors.upid=mapcity.selectors.form+" #upid";mapcity.selectors.itemchanged=mapcity.selectors.form+" .formitemchanged";
mapcity.selectors.cookieplaces="EZMAPCITYPLACES";mapcity.selectors.cookiequery="EZMAPCITYQUERY";mapcity.selectors.cookieload="EZMAPCITYSAVELOAD";mapcity.pageurl=new myezplan.pageurl;mapcity.pageurl.searchmethod="form";mapcity.pageurl.printpage="mapcityprint.cfm";mapcity.pageurl.searchform=mapcity.selectors.form;mapcity.pageurl.mapValidToProcess=mapcity.isFormValidToProcess;mapcitypopup.save={};mapcitypopup.save.$message=$("#messageerror-saveplan");mapcitypopup.save.$popup=$("#saveplan-box");mapcitypopup.save.$form=
mapcitypopup.save.$popup.find("form");mapcitypopup.save.$fname=mapcitypopup.save.$form.find("#saveplan_name");mapcitypopup.save.$share=mapcitypopup.save.$form.find("#saveplan_shareit");mapcitypopup.save.$itin=mapcitypopup.save.$form.find("#sel-itinerary");mapcitypopup.save.$addtoitinerary=mapcitypopup.save.$form.find("#saveplan_addtoitinerary");$(mapcity.selectors.city).change(function(a){mapcity.getPlansByCity();mapcity.updateMapCityConfig()});$(document).on("mouseover","#places_list .placetooltip",
function(a){var g=$(this);myezplan.showGloboTooltip(a.target,{tipimage:g.data("tipimage"),tipicon:g.data("tipicon"),tipname:g.data("tipname"),tiptype:g.data("tiptype"),tipprov:g.data("tipprov")})});maptopbuttonnewmap=function(a){window.confirm("You are going to create a new plan. Your current plan will be lost if not saved. Do you want to continue?")&&($.cookie("page",1),$("#new_plan").empty(),new_country_city("new"));return!0}});
function OpenmyPlanToMap(a,b,g){window.open("https://www.myezplan.com/"+a,"_parent")}
$(document).ready(function(a){saveitininit=function(){$(document).off("click","#saveplan-box #saveplan_submit");$(document).on("click","#saveplan-box #saveplan_submit",function(a){a.preventDefault();var g=$("#messageerror-saveplan"),h=$("#saveplan_name"),k=$.trim($(h).val());a=$("#saveplan_addtoitinerary2").is(":checked");emptyMessageError(g);if(a)AddtouserItinerary_Init();else{if(""==k){$(h).select();$(h).focus();var q=new PNotify({title:"Myezplan Notice",text:"Name is required. Please try again",
styling:"jqueryui",type:"error",delay:1E3,mouse_reset:!1,buttons:{closer:!1,sticker:!1}});q.get().click(function(){q.remove()});return!1}$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",async:!1,cache:!1,data:{action:"checkuserItynerarybyname",upname:k},error:function(a,b,h){showMessageError(g,h,300);hideMessageError(g,!1,300)},success:function(a){if(0<a)return currentuserplan=a,confirm("You already have a plan under the same name. Do you want to replace it ?")?
($.cookie("MYITINERARYID",currentuserplan),$.cookie("MYITINERARYNAME",k),saveUserPlan("up",currentuserplan,k)):$(h).focus(),!1;saveUserPlan("i",k);return!1}})}})};AddtouserItinerary_Init=function(){var a=document.getElementById("sel-itinerary").value;$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction=countcookies&uid="+a,error:function(a,b,k){showMessageError(_message,k,300);hideMessageError(_message,
!1,300)},success:function(g){var h=g.split(",");g=h[0];var k=h[1],q=h[2],h=h[3],u=0,p=0,w=$.cookie("EZIDEAS");w&&""!=w&&(u=w.split("!").length);(w=$.cookie("EZPERSONAL"))&&""!=w&&(p=w.split("!").length);for(pr=1;10>=pr;pr++)(w=$.cookie("EZPR_"+pr))&&""!=w&&(cuantasperonal_r=1);if(10<parseInt(g)+parseInt(u))return myezAlert.render("Can't add to itinerary, the ideas routes number is bigger than the max number permitted"),!1;if(10<parseInt(k)+parseInt(p))return myezAlert.render("Can't add to itinerary, the personal places number is bigger than the max number permitted"),
!1;if(10<parseInt(q)+parseInt(q))return myezAlert.render("Can't add to itinerary, the personal routes number is bigger than the max number permitted"),!1;AddtouserItinerary_days(a,g,k,q,h)}})};AddtouserItinerary_days=function(a,g,h,k,q){var u=$("#messageerror-saveplan"),p=$.cookie("NUMDAYS"),w=1;p&&""!=p&&(w=p);$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",async:!0,cache:!1,data:"action=adddaystojoin&addto="+a+"&upinumdays="+w,error:function(a,b,g){showMessageError(u,
g,300);hideMessageError(u,!1,300)},success:function(p){AddtouserItinerary_cookies(u,a,g,h,k,q,w)}})};AddtouserItinerary_cookies=function(a,g,h,k,q,u,p){var w=armaarraydecookies([]),v=w[0],C=w[1],w=w[2];0==v.length&&AddtouserItinerary_adddays(a,g,h,k,q,u,p);for(co=0;co<v.length;co++){var A="action=joincookies&addto="+g+"&upinumdays="+p+"&ideascount="+h+"&personalcount="+k+"&personal_rcount="+q+"&cookname="+v[co].replace(/EZPR_/g,"").replace(/_S/g,"")+"&cookdata="+C[co]+"&cooktype="+w[co]+"&encualva="+
co;$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",async:!0,cache:!1,data:A,error:function(g,h,k){showMessageError(a,k,300);hideMessageError(a,!1,300)},success:function(A){A==v.length-1&&AddtouserItinerary_adddays(a,g,h,k,q,u,p)}})}};AddtouserItinerary_adddays=function(a,g,h,k,q,u,p){for(x=1;x<=p;x++){var w=$.cookie("EZMAPCITYPLACES_day"+x);w||(w="");var v=$.cookie("EZMAPCITYPLACES2_day"+x);v||(v="");var C=$.cookie("EZMAPCITYSUBPLACES_day"+x);C||(C=
"");var A=$.cookie("EZTRANSPORT_day"+x);A||(A="");var G=$.cookie("EZTRANSPORT_S_day"+x);G||(G="");var B=$.cookie("EZSERVICES_day"+x);B||(B="");var E=$.cookie("EZROUTE_day_"+x),E=E?1:0,F=$.cookie("EZGOTM_day_"+x);F||(F="");$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",async:!0,cache:!1,data:"action=adddaysrouteiti&uid="+g+"&numday="+x+"&daysbefore="+u+"&places="+w+"&places2="+v+"&subplaces="+C+"&transports="+A+"&trasportstops="+G+"&services="+B+"&ideascount="+
h+"&personalcount="+k+"&personal_rcount="+q+"&ruta="+E+"&gotm="+F+"&encualva="+x,error:function(g,h,k){showMessageError(a,k,300);hideMessageError(a,!1,300)},success:function(g){g=g.split(",");var h=g[0];if(g[1]==p){showMessageError(a,"Itinerary Saved",300);hideMessageError(a,!0,300);var k=new PNotify({title:"myezplan notice",text:"Would you like to load your updated itinerary?",icon:"glyphicon glyphicon-question-sign",styling:"jqueryui",hide:!1,confirm:{confirm:!0,buttons:[{text:"Yes",addClass:"btn-primary",
click:function(a){window.location="https://myezplan.com/mobile/appdata/mapcityurl.cfm?ui_id="+h}},{text:"No",click:function(a){k.get().click(function(){a.remove()});var b=new PNotify({title:"myezplan Warning",text:"If you do not load your updated itinerary, every time you save your current one, it will be duplicated if you do it in the same saved itinerary.",icon:!0,type:"error",styling:"jqueryui",hide:!1,confirm:{confirm:!0},buttons:{closer:!0,sticker:!0}});b.get().on("pnotify.confirm",function(){b.get().click(function(){b.remove()})}).on("pnotify.cancel",
function(){b.get().click(function(){b.remove()});k.open()})}}]},buttons:{closer:!1,sticker:!1},history:{history:!1}})}}})}};mapcitypopup.PrintItinerary=function(){var a=$.cookie("MYITINERARYID");$.cookie("MYITINERARYNAME");window.appmobile&&"yes"==window.appmobile?window.open("https://www.myezplan.com/myitineraryprint_o.cfm?ui_id="+a,"_blank"):window.open("myitineraryprint_o.cfm?ui_id="+a,"_blank")};mapcitypopup.PrintItinerary_day=function(a,g){window.appmobile&&"yes"==window.appmobile?window.open("https://www.myezplan.com/mapcityprint.cfm?ui_id="+
a+"&day="+g+"#","_blank"):window.open("mapcityprint.cfm?ui_id="+a+"&day="+g+"#","_blank")};

    mapcitypopup.ShareItinerary=function(a){varfullurl=window.location.origin+"/mapcityurl.cfm?ui_id="+a;$.ajax({url:"https://myezplan.com/mobile/appdata/cfc/mapcity.cfc",data:{method:"googleURLShorten_json",url:varfullurl},async:!1,dataType:"json"}).error(varshorturl=varfullurl).success(function(a){varshorturl=a.URL});a=$("#share-box");a.panel();a.show();a.panel("open");a.find("#title-box-2").click();a.height();
a.width();$("body").append('<div id="mask" class="mask"></div>');var g=getFacebookUrl(varfullurl),h=getTweeterUrl(varshorturl),k=getBloggerUrl(varshorturl),q=getMailUrl(varshorturl),u=getGpxUrl(varfullurl);

        a.find("#share-box-facebook-e").click(function(a){cordova.InAppBrowser.open(g, '_system');return!1});

        a.find("#share-box-twitter-e").click(function(a){cordova.InAppBrowser.open(h, '_system');return!1});

        a.find("#share-box-blogger-e").click(function(a){cordova.InAppBrowser.open(k, '_system');return!1});

        a.find("#share-box-2 #sharelink").val(q);

        a.find("#share-box-2 #sharelinkgpx").val(u)};

    // eliminar cuarta y quinta opcion

        x = $(document).find("#show_sop4, #show_sop5")
    console.log(x);

    getFacebookUrl=function(a){return"https://www.facebook.com/sharer.php?u="+encodeURIComponent(a)+"&t=Things to do in "+varcitynombre+"&id=myezplan"};getTweeterUrl=function(a){var g=document.getElementById("titulo_aleatorio").value;return"https://twitter.com/intent/tweet?via=myezplan1&url="+a+"&text="+g+" "+varcitynombre+"&related=myezplan"};getBloggerUrl=function(a){var g=document.getElementById("titulo_aleatorio").value;return"https://api.addthis.com/oexchange/0.8/forward/blogger/offer?url="+a+"&title="+
g+" "+varcitynombre+""};getMailUrl=function(a){return encodeURIComponent(a)};getGpxUrl=function(a){return encodeURIComponent(a)};saveUserPlan=function(a,g){var h=$("#messageerror-saveplan"),k=$.cookie("NUMDAYS"),q=1;k&&""!=k&&(q=k);var u=$.cookie("EZDATE1"),p=$.cookie("EZDATE2"),w=k="";u&&""!=u&&(k=u);p&&""!=p&&(w=p);u=0;$("#saveplan_shareit").is(":checked")&&(u=1);$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction="+
a+"&usid="+cf_sid+"&upname="+g+"&date1="+k+"&date2="+w+"&upshareit="+u+"&upinumdays="+q+"&cityid="+city_id_var,error:function(a,b,g){showMessageError(h,g,300);hideMessageError(h,!1,300)},success:function(k){if("i"==a){$.cookie("MYITINERARYID",k);$.cookie("MYITINERARYNAME",g);itineraryid=k;var p=armaarraydecookies([]),u=p[0],w=p[1],p=p[2];for(co=0;co<u.length;co++)$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction=cookies&uid="+
k+"&cookname="+u[co]+"&cookdata="+w[co]+"&cooktype="+p[co],error:function(a,b,g){showMessageError(h,g,300);hideMessageError(h,!1,300)}});for(x=1;x<=q;x++){(u=$.cookie("EZMAPCITYPLACES_day"+x))||(u="");(w=$.cookie("EZMAPCITYPLACES2_day"+x))||(w="");(p=$.cookie("EZFULLORDER_day"+x))||(p="");var B=$.cookie("EZMAPCITYSUBPLACES_day"+x);B||(B="");var E=$.cookie("EZTRANSPORT_day"+x);E||(E="");var F=$.cookie("EZTRANSPORT_S_day"+x);F||(F="");var I=$.cookie("EZSERVICES_day"+x);I||(I="");var K=$.cookie("EZROUTE_day_"+
x),K=K?1:0,J=$.cookie("EZGOTM_day_"+x);J||(J="");$.ajax({type:"POST",url:"https://myezplan.com/mobile/appdata/data_ajax/map_usersplans_ajax.cfm",async:!0,cache:!1,data:"action=savemapcitypopupItinerary&saveaction=insertdays&uid="+k+"&numday="+x+"&places="+u+"&places2="+w+"&subplaces="+B+"&transports="+E+"&trasportstops="+F+"&services="+I+"&ruta="+K+"&gotm="+J+"&fullorder="+p,error:function(a,b,g){showMessageError(h,g,300);hideMessageError(h,!1,300)}})}}$("#myitin-panel").panel("open");showMessageError($("#general-msg"),
"Itinerary Saved",300,"success","top");hideMessageError($("#general-msg"),!1,300)}})};armaarraydecookies=function(a){a=[];var g=[],h=[],k=[],q=$.cookie("EZIDEAS");q&&""!=q&&(h.push("EZIDEAS"),g.push(q),k.push(1));(q=$.cookie("EZIDEAS_C"))&&""!=q&&(h.push("EZIDEAS_C"),g.push(q),k.push(2));(q=$.cookie("EZPERSONAL"))&&""!=q&&(h.push("EZPERSONAL"),g.push(q),k.push(3));for(pr=1;10>=pr;pr++)(q=$.cookie("EZPR_"+pr))&&""!=q&&(h.push("EZPR_"+pr),g.push(q),k.push(4)),(q=$.cookie("EZPR_"+pr+"_S"))&&""!=q&&(h.push("EZPR_"+
pr+"_S"),g.push(q),k.push(5));a.push(h);a.push(g);a.push(k);return a}});closeMyLocation=function(a){"undefined"!=typeof initialLocation&&(a.setCenter(initialLocation),myLocationControlChange("disable"),clearTimeout(gtml_time1),clearTimeout(gtml_time2));MyLocationDiv.remove()};
goToMyLocation=function(a,b){"undefined"==typeof initialLocation&&(initialLocation=b.getCenter());clearTimeout(gtml_time1);clearTimeout(gtml_time2);navigator.geolocation?null!=myLocationMarker?(myLocationMarker.setMap(null),myLocationMarker=null,b.setCenter(initialLocation),"undefined"==typeof a||null==a?gtml_time2=window.setTimeout(goToMyLocation,1E4,a,b):(myLocationControlChange("disable"),clearTimeout(gtml_time1),clearTimeout(gtml_time2))):(browserSupportFlag=!0,$("#middle_mapcityandcheck").showLoading("Finding location",
!1),watchID=navigator.geolocation.watchPosition(function(a){null!=myLocationMarker&&myLocationMarker.setMap(null);a=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);b.setCenter(a);myLocationMarker=new google.maps.Marker({position:a,map:b,title:"You are here!",icon:myLocationMarkerIcon,zIndex:google.maps.Marker.MAX_ZINDEX+1});myLocationControlChange("enable");clearTimeout(gtml_time2);$(".mask-loading").remove()},function(){handleNoGeolocation(browserSupportFlag)},window.gpsoptions)):google.gears?
(browserSupportFlag=!0,google.gears.factory.create("beta.geolocation").getCurrentPosition(function(a){initialLocation=new google.maps.LatLng(a.latitude,a.longitude);b.setCenter(initialLocation)},function(){handleNoGeoLocation(browserSupportFlag)})):(browserSupportFlag=!1,handleNoGeolocation(browserSupportFlag))};
function handleNoGeolocation(a){1==a?(myezAlert.render("Geolocation service failed. Is your GPS enabled?"),$(".mask-loading").remove(),navigator.geolocation.clearWatch(watchID)):myezAlert.render("Your browser doesn't support geolocation. We've placed you in Siberia.")}
function myLocationControlChange(a){$("#controluimylocation").css("background-color","transparent");"disable"==a?(navigator.geolocation.clearWatch(watchID),controlText.innerHTML='<svg class="icon icon-my_location" style="width: 30px; height: 30px;"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-my_location"></use></svg>'):"enable"==a&&(controlText.innerHTML='<svg class="icon icon-location_disabled" style="width: 30px; height: 30px;"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-location_disabled"></use></svg>')}
function myLocationControlAdd(a){var b=document.createElement("div");new myLocationControl(b,a);b.index=1;b.id="mapbtn-container";a.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(b)}
function myLocationControl(a,b){$("#controluimylocation").remove();MyLocationDiv=a;a.style.padding="3px";var g=document.createElement("div");g.style.backgroundColor="transparent";g.style.cursor="pointer";g.style.textAlign="center";g.style.padding="3px";g.style.display="inline-block";g.id="controluimylocation";a.appendChild(g);controlText=document.createElement("div");controlText.id="imgbuttmyloca";controlText.style.fontFamily="Arial,sans-serif";controlText.style.fontSize="12px";controlText.style.paddingLeft=
"4px";controlText.style.paddingRight="4px";controlText.innerHTML='<svg class="icon icon-my_location" style="width: 30px; height: 30px;"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-my_location"></use></svg>';$("#controluimylocation").empty();"block"!=$("#controluimylocation").css("display")&&g.appendChild(controlText);google.maps.event.addDomListener(g,"click",function(a){goToMyLocation(a,b)})}
function goToMapPlace(a,b){var g="";switch(a){case "start":g="edit"==b?$.trim($("#editPlan_panel #partida_").val())||$.trim($("#editPlan_panel form #sp").val()):$.trim($("#partida_").val())||$.trim($("form #sp").val());if(""==g)return!1;if(6>g){var h=$.cookie("EZPERSONAL"),h=h.split("!"),h=h[g-1],h=h.split("*");h[1].replace("(","").replace(")","").split(",")}break;case "end":g="edit"==b?$.trim($("#editPlan_panel #llegada_").val())||$.trim($("#editPlan_panel form #ep").val()):$.trim($("#llegada_").val())||
$.trim($("form #ep").val());if(""==g)return!1;6>g&&(h=$.cookie("EZPERSONAL"),h=h.split("!"),h=h[g-1],h=h.split("*"),h[1].replace("(","").replace(")","").split(","))}openexternalmedia_mapplace(g)}function tooltip_(a){""!=a&&(document.getElementById("globo").innerHTML=a,document.getElementById("globo").style.display="block")}function toolout_(){document.getElementById("globo").innerHTML="";document.getElementById("globo").style.display="none"}
function extrainfofunc(){"none"==$("#titlehead").css("display")?($("#body_map_canvas .gm-style").removeClass("gmstylefull"),$("#titlehead").show(),$("#titlehead_virt").show(),$(".buttonsforplanday").show(),$("#imgextrainfo svg use").attr("xlink:href","#icon-expand_less")):($("#body_map_canvas .gm-style").addClass("gmstylefull"),$("#titlehead").hide(),$("#titlehead_virt").hide(),$(".buttonsforplanday").hide(),$("#imgextrainfo svg use").attr("xlink:href","#icon-expand_more"))}
var browserSupportFlag=new Boolean,gtml_time1=0,gtml_time2=0,myLocation={},myLocationMarker=null,myAddressMarker=null,myLocationMarkerFlag=!1;function cleanRouteDirections(){$("#directionsPanel").empty()}function cleanAllMarkers_(){myLocationMarkerFlag&&(myLocationMarkerFlag=!1,directionsDisplay.setMap(null));null!=myAddressMarker&&(directionsDisplay.setMap(null),null!=myLocationMarker&&(myLocationMarker.setMap(null),myLocationMarker=null))}
function myMapsCleanAllRoutes(){$("#AddressExchange").hide();$("#mapPclean").hide();cleanRouteDirections();"function"==typeof myAddressMarkersClean&&myAddressMarkersClean(!0);myLocationMarkersClean(!0,!0)}function USGSOverlay(a,b,g){this.bounds_=a;this.image_=b;this.map_=g;this.div_=null;this.setMap(g)}
USGSOverlay.prototype.onAdd=function(){var a=document.createElement("DIV");a.style.border="none";a.style.borderWidth="0px";a.style.position="absolute";var b=document.createElement("img");b.src=this.image_;b.style.width="100%";b.style.height="100%";a.appendChild(b);this.div_=a;this.getPanes().overlayLayer.appendChild(a)};
USGSOverlay.prototype.draw=function(){var a=this.getProjection(),b=a.fromLatLngToDivPixel(new google.maps.LatLng(parseFloat(coor1imagenv[0]),parseFloat(coor1imagenv[1]))),a=a.fromLatLngToDivPixel(new google.maps.LatLng(parseFloat(coor2imagenv[0]),parseFloat(coor2imagenv[1]))),g=this.div_;g.style.left=Math.floor(b.x)-70+"px";g.style.top=Math.floor(a.y)-70+"px";g.style.width=Math.ceil(a.x-b.x)+140+"px";g.style.height=Math.ceil(b.y-a.y)+140+"px"};window.myezplan=window.myezplan||{};
myezplan.pathmapscity="ezmapas/maps_city/";myezplan.findUrl2=function(a){if(""==a.urlname){var b=window.location.href;b.split&&(b=b.split("?")[0]);b.split&&b.split("#");a.urlname="https://www.myezplan.com/mapcity.cfm"}a.urlquery=mapcity.selectors.cookiequery;var b="",g=$.cookie("EZPERSONAL");g&&""!=g&&(b=g);a.fullurl=a.urlname+""+a.urlquery+"&plp="+b;return!0};
myezplan.findUrl2Edit=function(a){if(""==a.urlname){var b=window.myUrl;b.split&&(b=b.split("?")[0]);b.split&&b.split("#");a.urlname="https://www.myezplan.com/mapcity.cfm"}a.urlquery=mapcity.selectorsEdit.cookiequery_edit;$.cookie("EZPERSONAL");a.fullurl=window.shaMyUrl;return!0};
myezplan.findUrl=function(a){var b=a.searchmethod||"form";if(""==a.urlname){var g=window.location.href;g.split&&(g=g.split("?")[0]);g.split&&g.split("#");a.urlname="https://www.myezplan.com/"}switch(b.toLowerCase()){case "form":if(!a.searchform)throw"searchform has no value";b=$(a.searchform);a.urlquery=$.trim("?"+b.find(":input[name][value!='']").serialize());break;case "url":a.urlquery=$.trim(""==window.location.search?"?":window.location.search)}a.fullurl=window.shaMyUrl;return!0};
myezplan.findUrlShorten2=function(a){a.findUrl2();if(""!=a.urlquery&&"?"!=a.urlquery)return a.cache[a.fullurl]?a.fullurlshorten=a.cache[a.fullurl]:$.ajax({url:"https://myezplan.com/mobile/appdata/cfc/mapcity.cfc",data:{method:"googleURLShorten_json",url:a.fullurl},async:!1,dataType:"json"}).error(myezplan.utils.ajaxError).success(function(b){a.cache[a.fullurl]=b.URL;a.fullurlshorten=b.URL}),!0};
myezplan.findUrlShorten2Edit=function(a){a.findUrl2Edit();if(""!=a.urlquery&&"?"!=a.urlquery)return a.cache[a.fullurl]?a.fullurlshorten=a.cache[a.fullurl]:$.ajax({url:"https://myezplan.com/mobile/appdata/cfc/mapcity.cfc",data:{method:"googleURLShorten_json",url:a.fullurl},async:!1,dataType:"json"}).error(myezplan.utils.ajaxError).success(function(b){a.cache[a.fullurl]=b.URL;a.fullurlshorten=b.URL}),!0};
myezplan.findUrlShorten=function(a){a.findUrl();if(""!=a.urlquery&&"?"!=a.urlquery)return a.cache[a.fullurl]?a.fullurlshorten=a.cache[a.fullurl]:$.ajax({url:"https://myezplan.com/mobile/appdata/cfc/mapcity.cfc",data:{method:"googleURLShorten_json",url:a.fullurl},async:!1,dataType:"json"}).error(myezplan.utils.ajaxError).success(function(b){a.cache[a.fullurl]=b.URL;a.fullurlshorten=b.URL}),!0};myezplan.getUrlQuery=function(a){a.findUrl();return a.urlquery};
myezplan.getFullUrl=function(a){a.findUrl();return a.fullurl};myezplan.getFullUrlShorten=function(a){a.findUrlShorten();return a.fullurlshorten};myezplan.getFullUrlShorten2=function(a){a.findUrlShorten2();return a.fullurlshorten};myezplan.getFullUrlShorten2Edit=function(a){a.findUrlShorten2Edit();return a.fullurlshorten};myezplan.mapSave=function(a){return a.mapValidToProcess&&!a.mapValidToProcess()?(myezAlert.render("Please, complete all the steps before saving."),!1):!0};
myezplan.mapPrint2=function(a){if(!a.printpage)return console.log("Not implemented."),!1;var b="",g=$.cookie("EZPERSONAL");g&&""!=g&&(b=g);return window.open(a.printpage+mapcity.selectors.cookiequery+"&plp="+b+"&uiusid="+sessionStorage.cf_sid,"_system")};
myezplan.mapPrint2Edit=function(a){if(!a.printpage)return console.log("Not implemented."),!1;var b="",g=$.cookie("EZPERSONAL");g&&""!=g&&(b=g);return window.open(a.printpage+mapcity.selectorsEdit.cookiequery_edit+"&plp="+b+"&uiusid="+sessionStorage.cf_sid,"_system")};
myezplan.mapPrint=function(a){return a.mapValidToProcess&&!a.mapValidToProcess()?(myezAlert.render("Please, complete all the steps before printing."),!1):a.printpage?window.open(a.printpage+a.urlquery,"mapprint"):(console.log("Not implemented."),!1)};
myezplan.mapShare2=function(a){a.getFullUrlShorten2();if(""==a.urlquery||"?"==a.urlquery)myezAlert.render("Nothing selected");else{var b=$("#share-box");b.panel();b.show();b.panel("open");b.find("#title-box-2").click();b.height();b.width();b.css({});b.find("#share-box-facebook-e").click(function(b){window.open(a.getFacebookUrl(),"sharer","toolbar=0,status=0,width=626,height=436");return!1});b.find("#share-box-twitter-e").click(function(b){window.open(a.getTweeterUrl_m(a),"sharer","toolbar=0,status=0,width=626,height=436");
return!1});b.find("#share-box-blogger-e").click(function(b){window.open(a.getBloggerUrl_m(a),"sharer","toolbar=0,status=0,width=626,height=436");return!1});b.find("#share-box-2 #sharelink").val(a.getMailUrl(a));b.find("#share-box-2 #sharelinkgpx").val(a.getGpxUrl(a));return!0}};
myezplan.mapShare2Edit=function(a){a.getFullUrlShorten2Edit();if(""==a.urlquery||"?"==a.urlquery)myezAlert.render("Nothing selected");else{var b=$("#share-box");b.panel();b.show();b.panel("open");b.find("#title-box-2").click();b.height();b.width();b.css({});b.find("#share-box-facebook-e").click(function(b){window.open(a.getFacebookUrlEdit(),"sharer","toolbar=0,status=0,width=626,height=436");return!1});b.find("#share-box-twitter-e").click(function(b){window.open(a.getTweeterUrlEdit(a),"sharer","toolbar=0,status=0,width=626,height=436");
return!1});b.find("#share-box-blogger-e").click(function(b){window.open(a.getBloggerUrl_mEdit(a),"sharer","toolbar=0,status=0,width=626,height=436");return!1});b.find("#share-box-2 #sharelink").val(a.getMailUrl(a));b.find("#share-box-2 #sharelinkgpx").val(a.getGpxUrl(a));return!0}};
myezplan.mapShare=function(a){if(a.mapValidToProcess&&!a.mapValidToProcess())return myezAlert.render("Please, complete all the steps before sharing."),!1;a.getFullUrlShorten();if(""==a.urlquery||"?"==a.urlquery)myezAlert.render("Nothing selected");else{var b=$("#share-box");b.fadeIn(300);b.find("#title-box-2").click();b.height();b.width();b.css({});$("body").append('<div id="mask" class="mask"></div>');$("#mask").fadeIn(300);b.find("#share-box-facebook-e").click(function(b){window.open(a.getFacebookUrl(),
"sharer","toolbar=0,status=0,width=626,height=436");return!1});b.find("#share-box-twitter-e").attr("href",a.getTweeterUrl(a));b.find("#share-box-blogger-e").attr("href",a.getBloggerUrl(a));b.find("#share-box-2 #sharelink").val(a.getMailUrl(a));b.find("#share-box-2 #sharelinkgpx").val(a.getGpxUrl(a));return!0}};myezplan.getFacebookUrl=function(a){return"https://www.facebook.com/sharer.php?u="+encodeURIComponent(a.fullurl)+"&t=Things to do in "+a.cityname+"&id=myezplan"};
myezplan.getFacebookUrlEdit=function(a){return"https://www.facebook.com/sharer.php?u="+encodeURIComponent(a.fullurl)+"&t=Things to do in "+window.cnameEdit+"&id=myezplan"};myezplan.getTweeterUrl=function(a){var b=document.getElementById("titulo_aleatorio").value;return"https://twitter.com/intent/tweet?via=myezplan1&url="+a.fullurlshorten+"&text="+b+" "+a.cityname+"&related=myezplan"};
myezplan.getTweeterUrlEdit=function(a){var b=document.getElementById("titulo_aleatorio").value;return"https://twitter.com/intent/tweet?via=myezplan1&url="+a.fullurlshorten+"&text="+b+" "+window.cnameEdit+"&related=myezplan"};myezplan.getBloggerUrl=function(a){var b=document.getElementById("titulo_aleatorio").value;return"https://api.addthis.com/oexchange/0.8/forward/blogger/offer?url="+a.fullurlshorten+"&title="+b+" "+a.cityname+""};
myezplan.getTweeterUrl_m=function(a){var b=document.getElementById("titulo_aleatorio").value;return"https://twitter.com/intent/tweet?via=myezplan1&url="+a.fullurlshorten+"&text="+b+" "+mapcity.cityname+"&related=myezplan"};myezplan.getBloggerUrl_m=function(a){var b=document.getElementById("titulo_aleatorio").value;return"https://api.addthis.com/oexchange/0.8/forward/blogger/offer?url="+a.fullurlshorten+"&title="+b+" "+mapcity.cityname+""};
myezplan.getBloggerUrl_mEdit=function(a){var b=document.getElementById("titulo_aleatorio").value;return"https://api.addthis.com/oexchange/0.8/forward/blogger/offer?url="+a.fullurlshorten+"&title="+b+" "+window.cnameEdit+""};myezplan.getMailUrl=function(a){return encodeURIComponent(a.fullurlshorten)};myezplan.getGpxUrl=function(a){return encodeURIComponent(a.fullurl)};
myezplan.pageurl=function(){this.searchmethod="form";this.searchform=null;this.fullurlshorten=this.fullurl=this.urlquery=this.urlname="";this.cache={};this.cityname=""};myezplan.pageurl.prototype.findUrl=function(){myezplan.findUrl(this)};myezplan.pageurl.prototype.findUrl2=function(){myezplan.findUrl2(this)};myezplan.pageurl.prototype.findUrl2Edit=function(){myezplan.findUrl2Edit(this)};myezplan.pageurl.prototype.findUrlShorten=function(){myezplan.findUrlShorten(this)};
myezplan.pageurl.prototype.findUrlShorten2=function(){myezplan.findUrlShorten2(this)};myezplan.pageurl.prototype.findUrlShorten2Edit=function(){myezplan.findUrlShorten2Edit(this)};myezplan.pageurl.prototype.getUrlQuery=function(){return myezplan.getUrlQuery(this)};myezplan.pageurl.prototype.getFullUrl=function(){return myezplan.getFullUrl(this)};myezplan.pageurl.prototype.getFullUrlShorten=function(){return myezplan.getFullUrlShorten(this)};myezplan.pageurl.prototype.getFullUrlShorten2=function(){return myezplan.getFullUrlShorten2(this)};
myezplan.pageurl.prototype.getFullUrlShorten2Edit=function(){return myezplan.getFullUrlShorten2Edit(this)};myezplan.pageurl.prototype.mapValidToProcess=null;myezplan.pageurl.prototype.mapSave=function(){return myezplan.mapSave(this)};myezplan.pageurl.prototype.mapPrint=function(){return myezplan.mapPrint(this)};myezplan.pageurl.prototype.mapPrint2=function(){return myezplan.mapPrint2(this)};myezplan.pageurl.prototype.mapPrint2Edit=function(){return myezplan.mapPrint2Edit(this)};
myezplan.pageurl.prototype.mapShare=function(){return myezplan.mapShare(this)};myezplan.pageurl.prototype.mapShare2=function(){return myezplan.mapShare2(this)};myezplan.pageurl.prototype.mapShare2Edit=function(){return myezplan.mapShare2Edit(this)};myezplan.pageurl.prototype.getFacebookUrl=function(){return myezplan.getFacebookUrl(this)};myezplan.pageurl.prototype.getFacebookUrlEdit=function(){return myezplan.getFacebookUrlEdit(this)};myezplan.pageurl.prototype.getTweeterUrl=function(){return myezplan.getTweeterUrl(this)};
myezplan.pageurl.prototype.getTweeterUrlEdit=function(){return myezplan.getTweeterUrlEdit(this)};myezplan.pageurl.prototype.getBloggerUrl=function(){return myezplan.getBloggerUrl(this)};myezplan.pageurl.prototype.getTweeterUrl_m=function(){return myezplan.getTweeterUrl_m(this)};myezplan.pageurl.prototype.getBloggerUrl_m=function(){return myezplan.getBloggerUrl_m(this)};myezplan.pageurl.prototype.getBloggerUrl_mEdit=function(){return myezplan.getBloggerUrl_mEdit(this)};
myezplan.pageurl.prototype.getMailUrl=function(){return myezplan.getMailUrl(this)};myezplan.pageurl.prototype.getGpxUrl=function(){return myezplan.getGpxUrl(this)};myezplan.printing=myezplan.printing||{};myezplan.printing.showPrint=function(a,b){$("#"+b+"").toggle("fast")};myezplan.utils=myezplan.utils||{};myezplan.utils.ajaxError=function(a,b,g){myezAlert.render(g)};
myezplan.showGloboTooltip=function(a,b){if(""==$.trim(b.tipimage))return!1;$("#globo .tipicon").prop("src",$.trim(b.tipicon));$("#globo .tipimage").prop("src",$.trim(b.tipimage));var g=38<b.tipname.length?b.tipname.substr(0,35)+"...":b.tipname;$("#globo .tipname").html($.trim(g));1==b.tipprov?$("#globo .tipprov").html('Check out Audio Tours, Pictures, Reviews, Video Clips &amp; <strong class="textredmyezplan2">Hot Deals</strong>'):$("#globo .tipprov").html("<strong>Check this deal out !!</strong></br>Great savings are waiting for you");
$("#globo .tiptype").html($.trim(b.tiptype));$(a).mouseout(function(a){$("#globo").hide(0)});$("#globo").show(0)};myezplan.forms=myezplan.forms||{};
myezplan.forms.select={addOptionsFromJSON:function(a,b){var g=$.map(b,function(a){return{label:a.name,id:a.id}});$.each(g,function(b,g){a.append(new Option(g.label,g.id))})},addOptionsMapNameId:function(a,b,g){var h=this;$.each(b,function(b,q){a.append(h.createOption(q.id,q.name,$.trim(g)===$.trim(q.id)))})},addOption:function(a,b,g,h){a.append(this.createOption(b,g,h))},createOption:function(a,b,g){a=new Option(b,a);g&&$(a).prop("selected",!0);return a},addOptionPlaceHolder:function(a,b,g){b=new Option(g,
b);$(b).data("placeholder",!0);a.append(b);return b},removeOptionByValue:function(a,b){$(a).find("option[value="+b+"]").remove()},removeOptionsByJqueySelector:function(a){$(a).remove()},removeAllOptions:function(a){$(a).find("option").remove()},selectByValue:function(a,b){return $(a).find("option[value="+b+"]").prop("selected",!0)}};viewdates=!1;
function fecha(a){if(-1!=a.indexOf("/")){var b=a.indexOf("/",1),g=a.indexOf("/",b+1);this.mes=a.substring(0,b);this.dia=a.substring(b+1,g);this.anio=a.substring(g+1,a.length)}else this.anio=this.mes=this.dia=0}
function adddates(){viewdates?(document.getElementById("divadddates").style.display="none",viewdates=!1,document.getElementById("buttonadddates").style.backgroundColor="rgb(211, 211, 211)"):(document.getElementById("divadddates").style.display="block",viewdates=!0,document.getElementById("buttonadddates").style.backgroundColor="#17375e")}closenewplan=function(){$("#new_plan").panel("close")};
traer_ciudad_new=function(a){$("#ciudad_sel_new option").detach();$("#ciudad_sel_new").append('<option value="">Choose One ... </option>');for(i=0;i<citiesArray.length;i++){var b=citiesArray[i];b.COUNTRY==a&&$("#ciudad_sel_new").append('<option value="'+b.ID+'" class="'+b.COUNTRY+'">'+b.NAME+"</option>")}};
Continue_new=function(){var a=document.getElementById("estado_sel_new").value,b=$("#estado_sel_new option[value='+estado+']").text();if(""==a)if(1==fromlogin)a=5;else return myezAlert.render("Please complete the steps"),document.getElementById("estado_sel_new").focus(),!1;var g=document.getElementById("ciudad_sel_new").value,h=$("#ciudad_sel_new option:selected").text();if(""==g)if(1==fromlogin)g=5,h="Miami";else return myezAlert.render("Please complete the steps"),document.getElementById("ciudad_sel_new").focus(),
!1;localStorage._city=g;localStorage._country=a;localStorage._cityname=h;localStorage._countname=b;localStorage._firstTime="no";fromlogin=0;if(document.getElementById("chenew").checked){$.cookie("EZDATE1",!1,{path:"/",expires:-1});$.cookie("EZDATE1",null);$.cookie("EZDATE2",!1,{path:"/",expires:-1});$.cookie("EZDATE2",null);$.cookie("EZIDEAS",!1,{path:"/",expires:-1});$.cookie("EZIDEAS",null);$.cookie("EZIDEAS_C",!1,{path:"/",expires:-1});$.cookie("EZIDEAS_C",null);$.cookie("EZPERSONAL",!1,{path:"/",
expires:-1});$.cookie("EZPERSONAL",null);$.cookie("EZRUTASPLACES",!1,{path:"/",expires:-1});$.cookie("EZRUTASPLACES",null);var b=$.cookie("NUMDAYS"),k=1;b&&""!=b&&0!=b&&(k=b,$.cookie("NUMDAYS",!1,{path:"/",expires:-1}));for(x=1;x<=k;x++)$.cookie("EZMAPCITYPLACES_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYPLACES_day"+x,null),$.cookie("EZMAPCITYPLACES2_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYPLACES2_day"+x,null),$.cookie("EZMAPCITYSUBPLACES_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYSUBPLACES_day"+
x,null),$.cookie("EZTRANSTOPS_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZTRANSTOPS_day"+x,null),$.cookie("EZTRANSPORT_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZTRANSPORT_day"+x,null),$.cookie("EZSERVICES_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZSERVICES_day"+x,null),$.cookie("EZGOTM_day_"+x,!1,{path:"/",expires:-1}),$.cookie("EZGOTM_day_"+x,null),$.cookie("EZ_P_O_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZ_P_O_day"+x,null),$.cookie("EZNOTE_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZNOTE_day"+
x,null),$.cookie("EZFULLORDER_day"+x,!1,{path:"/",expires:-1}),$.cookie("EZFULLORDER_day"+x,null);for(pr=1;10>=pr;pr++)$.cookie("EZPR"+pr,!1,{path:"/",expires:-1}),$.cookie("EZPR"+pr,null),$.cookie("EZPR_"+pr,!1,{path:"/",expires:-1}),$.cookie("EZPR_"+pr,null),$.cookie("EZPR"+pr+"_S",!1,{path:"/",expires:-1}),$.cookie("EZPR"+pr+"_S",null),$.cookie("EZPR_"+pr+"_S",!1,{path:"/",expires:-1}),$.cookie("EZPR_"+pr+"_S",null);if((b=$.cookie("EZCATS"))&&""!=b){b=b.split("*");for(x=0;x<b.length;x++)$.cookie(b[x],
!1,{path:"/",expires:-1}),$.cookie(b[x],null);$.cookie("EZCATS",!1,{path:"/",expires:-1});$.cookie("EZCATS",null)}if((b=$.cookie("EZAREAS"))&&""!=b){b=b.split("*");for(x=0;x<b.length;x++)$.cookie(b[x],!1,{path:"/",expires:-1}),$.cookie(b[x],null);$.cookie("EZAREAS",!1,{path:"/",expires:-1});$.cookie("EZAREAS",null)}b="https://myezplan.com/mobile/appdata/data_ajax/map_city_ajax.cfm?rnu="+randomNumberUrl()+"";$.post(b,{action:"clean"}).success(function(b,k,p){window.location="mapcitypopup.html?ctid="+
g+"&plid="+a+"&cname="+h+"";if(viewdates){b=document.getElementById("datefrom").value;k=document.getElementById("dateto").value;var q=new fecha(b);p=new fecha(k);q=new Date(q.anio,q.mes-1,q.dia);p=(new Date(p.anio,p.mes-1,p.dia)).getTime()-q.getTime();$.cookie("NUMDAYS",Math.floor(p/864E5)+1);$.cookie("EZDATE1",b);$.cookie("EZDATE2",k)}})}else{if(viewdates){var b=$.cookie("EZDATE1"),k=$.cookie("EZDATE2"),q=document.getElementById("datefrom").value,u=document.getElementById("dateto").value;if(b&&""!=
b){var p=new fecha(b),w=new fecha(q),p=new Date(p.anio,p.mes-1,p.dia),w=new Date(w.anio,w.mes-1,w.dia),w=p.getTime()-w.getTime(),w=Math.floor(w/864E5);if(0<w)for(b=q,q=parseInt($.cookie("NUMDAYS")),n=1;n<=q;n++){var p=q-(n-1),v=p+w,C=$.cookie("EZMAPCITYPLACES_day"+p),A=$.cookie("EZMAPCITYPLACES2_day"+p),G=$.cookie("EZMAPCITYSUBPLACES_day"+p),B=$.cookie("EZTRANSPORT_day"+p),E=$.cookie("EZTRANSPORT_S_day"+p),F=$.cookie("EZSERVICES_day"+p);C&&""!=C&&($.cookie("EZMAPCITYPLACES_day"+v,C),$.cookie("EZMAPCITYPLACES_day"+
p,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYPLACES_day"+p,null),A&&""!=A&&($.cookie("EZMAPCITYPLACES2_day"+v,A),$.cookie("EZMAPCITYPLACES2_day"+p,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYPLACES2_day"+p,null)),G&&""!=G&&($.cookie("EZMAPCITYSUBPLACES_day"+v,G),$.cookie("EZMAPCITYSUBPLACES_day"+p,!1,{path:"/",expires:-1}),$.cookie("EZMAPCITYSUBPLACES_day"+p,null)));B&&""!=B&&($.cookie("EZTRANSPORT_day"+v,B),$.cookie("EZTRANSPORT_S_day"+v,E),$.cookie("EZTRANSPORT_day"+p,!1,{path:"/",expires:-1}),
$.cookie("EZTRANSPORT_day"+p,null),$.cookie("EZTRANSPORT_S_day"+p,!1,{path:"/",expires:-1}),$.cookie("EZTRANSPORT_S_day"+p,null));F&&""!=F&&($.cookie("EZSERVICES_day"+v,F),$.cookie("EZSERVICES_day"+p,!1,{path:"/",expires:-1}),$.cookie("EZSERVICES_day"+p,null))}}else b=q;k&&""!=k?(p=new fecha(k),w=new fecha(u),p=new Date(p.anio,p.mes-1,p.dia),w=new Date(w.anio,w.mes-1,w.dia),w=w.getTime()-p.getTime(),w=Math.floor(w/864E5),0<w&&(k=u)):k=u;p=new fecha(b);w=new fecha(k);p=new Date(p.anio,p.mes-1,p.dia);
w=new Date(w.anio,w.mes-1,w.dia);w=w.getTime()-p.getTime();w=Math.floor(w/864E5);$.cookie("NUMDAYS",w+1);$.cookie("EZDATE1",b);$.cookie("EZDATE2",k)}window.location="mapcitypopup.html?ctid="+g+"&plid="+a+"&cname="+h+""}};function overruta_p(a){window["Polyline_pr"+a].setOptions({strokeColor:"#000099"});$("#trl_routes"+a).css("background-color","#ddd")}function outruta_p(a,b){window["Polyline_pr"+a].setOptions({strokeColor:b});$("#trl_routes"+a).css("background-color","")}
function Openphp(a,b,g){window.parent.document.body.style.overflow="hidden";a="phppages/"+a;phpuser=b;phpclient=g;phpcountry="mapcitypopup"==sourcepage?country_id_var:Ccountry_id_var;b=$("#openphp");b.panel().panel("open").show();b.on("panelbeforeclose",function(a,b){window.parent.document.body.style.overflow="auto"});$("#openphp .box-body iframe").attr("src",a);return!1}
function bringcountrylist(a,b){$.ajax({url:"https://myezplan.com/data_ajax/cargar_country_ajax.cfm",async:!0,success:function(g){arraycountry=JSON.parse(g);if("select"==a)for(g=arraycountry.length,b.append('<option value="">Select Country</option>'),c=0;c<g;c++){var h=arraycountry[c];b.append('<option value="'+h.ID+'" class="'+h.COUNTRY+'">'+h.COUNTRY+"</option>")}}})}
function validateURL(a){return/^(http|https|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9-]+.)*[a-zA-Z0-9-]+.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\+&amp;%$#=~_-]+))*$/.test(a)}
function Getfaqs(a){$("#myeztravel-faq").showLoading("Please Wait,<br/>Retriving Topics...<br/>",!1);$("body").append('<div id="mask-faq" class="mask-faq"></div>');$("#mask-faq").fadeIn(0);$("#myeztravel-faq").fadeIn(0);if(sessionStorage.getItem(a))$("#myeztravel-faq").html(sessionStorage.getItem(a));else{var b="https://myezplan.com/mobile/appdata/data_ajax/faq_ajax_content.cfm?page="+a;$("#myeztravel-faq").load(b,{action:"Faq_index"},function(b,h,k){switch(h){case "error":$("#myeztravel-faq").empty();
myezAlert.render("We are sorry, There aren't any help files in this page");break;case "success":sessionStorage.setItem(a,b)}})}return!1}
function geteSminfo(a,b,g){var h=g||"all",k=a||"#rsoc",q=b||"#recommend",u=0,p=0,w=0;$.getJSON(window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/get_extrainfo.cfm?action=sminfo":"data_ajax/get_extrainfo.cfm?action=sminfo",function(a){console.log("icons Ready");$.each(a,function(a,b){if(-1!=b.URL.indexOf("facebook"))var g="Facebook";-1!=b.URL.indexOf("instagram")&&(g="Instagram");-1!=b.URL.indexOf("twitter")&&(g="Twitter");-1!=b.URL.indexOf("android")&&(g="Android");-1!=b.URL.indexOf("apple")&&
(g="Apple");"sm"==b.TYPE?(u++,"sminfo"!=h&&"all"!=h||$(k+" #smicons").append("<a href='"+b.URL+"' target='_blank' style='padding: 0px 3px;'><img alt='"+g+"' src='"+b.ICON+"' height='24px'></a>")):"app"==b.TYPE?(p++,"sminfo"!=h&&"all"!=h||$(k+" #appicons").append("<a href='"+b.URL+"' target='_blank' style='padding: 0px 3px;'><img alt='"+g+"' src='"+b.ICON+"' height='24px'></a>")):(w++,"rcminfo"!=h&&"all"!=h||$(q+" span").append("<a href='"+b.URL+"' target='_blank' style='padding: 0px 3px;'><img src='"+
b.ICON+"' height='50px'></a>"))});$(k).show(250);0!=w&&$(q).show(250)})}function getSponsor(a,b){var g=0,h=b||"#recommend";$.getJSON(window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/get_extrainfo.cfm?action=sponsor&ctid="+a:"data_ajax/get_extrainfo.cfm?action=sponsor&ctid="+a,function(a){$.each(a,function(a,b){g++;$(h+" span").append("<a href='"+b.URL+"' target='_blank' style='padding: 0px 3px;'><img src='"+b.ICON+"' height='50px'></a>")});0!=g&&$(h).show(250)})}
loadExternalAjaxPage_Result=function(a,b,g){switch(b){case "error":$(this).html(g.statusText)}};

function opensocialmedia(){var a=window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/socialmedia.cfm":"data_ajax/socialmedia.cfm";$("#openmedia .box-body").load(a,{action:"GetSocMed"},function(){loadExternalAjaxPage_Result(a); $.getScript('js/anchor.js',function(){console.log('loaded')})});$("#openmedia").panel();$("#openmedia").css("maxWidth","300px");$("#openmedia").show();$("#openmedia").panel("open");return!1}

function close_panel(){$(".ui-panel").panel("close")}

function openapplinks(){var a=window.appmobile&&"yes"==window.appmobile?"https://myezplan.com/data_ajax/socialmedia.cfm":"data_ajax/socialmedia.cfm";$("#openmedia .box-body").load(a,{action:"GetAppLink"},function(){loadExternalAjaxPage_Result(a);$.getScript('js/anchor.js')});$("#openmedia").panel();$("#openmedia").css("maxWidth","200px");$("#openmedia").show();$("#openmedia").panel("open");return!1}
function LoadScript(a,b){var g=document,h=g.createElement("script"),g=g.getElementsByTagName("script")[0];h.src=a;b&&h.addEventListener("load",function(a){b(null,a)},!1);g.parentNode.insertBefore(h,g)};
